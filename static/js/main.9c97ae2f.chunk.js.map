{"version":3,"sources":["api/queries.ts","interfaces.ts","api/errorHandler.ts","assets/certainty_poker_bg.png","components/Lobby/PictureHalf/index.tsx","assets/countryCodes.ts","components/Game/Guess/index.tsx","components/Lobby/UploadModal/index.tsx","components/Lobby/UploadModal/processCsvData.ts","components/Lobby/ActionableHalf/index.tsx","components/Lobby/index.tsx","storage.ts","components/Game/PreGameLobby/PlayerSpot.tsx","components/shared/ConfirmDialogButton/index.tsx","components/Game/PreGameLobby/StartGameButton/index.tsx","components/Drawer/index.tsx","components/Game/NameInputDrawer/index.tsx","components/Game/PreGameLobby/index.tsx","components/Game/PokerTable/Player/Status.tsx","components/Game/helpers/helpers.ts","components/Game/helpers/placeBetHelpers.ts","components/Game/helpers/queryHelpers.ts","components/Game/PokerTable/Player/index.tsx","components/Game/PokerTable/Pot/index.tsx","components/Game/Question/Hints/index.tsx","components/Game/Question/index.tsx","components/Game/Map/index.tsx","components/Game/GuessMap/index.tsx","components/Game/MultipleChoiceOptions/index.tsx","components/Game/PokerTable/index.tsx","components/Game/PokerTable/helpers.ts","components/Game/AnswerDrawer/NumberInput/index.tsx","components/Game/AnswerDrawer/DateInput/index.tsx","components/Game/AnswerDrawer/MapInput/index.tsx","components/Game/AnswerDrawer/MultipleChoiceInput/index.tsx","components/Game/AnswerDrawer/index.tsx","components/Game/Footer/ActionButtons/Button/index.tsx","components/Game/Footer/ActionButtons/RaiseInputDrawer/index.tsx","components/Game/Footer/ActionButtons/index.tsx","components/Game/Footer/index.tsx","components/Game/index.tsx","components/Game/LeaveGameButton/index.tsx","assets/turn-notification.mp3","assets/turn-alert.wav","components/App/index.tsx","serviceWorker.ts","config.ts","index.tsx"],"names":["QuestionTypes","BettingStates","CREATE_GAME_QUERY","gql","UPLOAD_QUESTION_SET","GET_SETS_QUERY","GET_GAME_BY_ID","SUBSCRIBE_TO_GAME_BY_ID","CREATE_PLAYER","START_GAME","PLACE_BET","ADD_GUESS","REMOVE_PLAYER","err","console","error","message","className","src","Image","alt","countryListAlpha2","GB","FR","ES","CN","DE","ZA","AL","DZ","SA","AM","BD","BG","KH","HR","CZ","DK","NL","EE","FI","GR","IL","HU","IN","IT","JP","KR","LV","LT","MY","MN","NO","PL","BR","RO","RU","RS","SK","SI","SE","TH","TR","VN","Guess","guess","questionType","alternatives","NUMERICAL","number","numerical","parseFloat","isNaN","Intl","NumberFormat","format","DATE","moment","toString","GEO","geo","latitude","longitude","MULTIPLE_CHOICE","length","Error","UploadModal","open","handleClose","fetchSets","setSelectedSets","history","useHistory","useState","showCSVInput","setShowCSVInput","data","setData","setName","setSetName","isPrivate","setIsPrivate","language","setLanguage","useMutation","variables","questions","onCompleted","push","undefined","onError","errorLogger","uploadQuestions","content","target","rel","href","onDrop","rows","map","row","question","type","csvAnswer","answer","hint1","hint2","explanation","multiple_choice_alternative1","multiple_choice_alternative2","multiple_choice_alternative3","hints","filter","Boolean","processCsvData","file","inputElem","reason","config","header","addRemoveButton","removeButtonColor","value","onChange","e","placeholder","aria-label","required","autoFocus","selected","Object","keys","countryCodes","code","key","countryCodeToFlagEmoji","q","h","i","id","htmlFor","disabled","onClick","Modal","disablePortal","disableEnforceFocus","disableAutoFocus","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","ActionableHalf","sets","languages","location","useLocation","selectedSets","isUploadModalOpen","setIsUploadModalOpen","shownLanguage","setShownLanguage","setNames","createGame","errorHandler","loading","handleCreateGame","a","to","pathname","style","color","window","host","cursor","s","set","includes","gridColumn","Math","round","pow","metaKey","numberOfQuestions","Lobby","useParams","useLazyQuery","fetchPolicy","useEffect","reduce","uniqueLanguages","sort","b","parseInt","PictureHalf","PLAYER_ID_KEY","FINGERPRINT_KEY","setFingerprintToStorage","gameId","localStorage","clear","random","substring","setItem","getFingerprintFromStorage","getItem","PlayerSpot","playerName","buttonLabel","dialogTitle","confirmLabel","onConfirm","isDisabled","btnClassName","React","setOpen","Dialog","DialogTitle","DialogActions","startGame","DrawerComp","children","drawerProps","Drawer","NameInputDrawer","createPlayer","playerId","name","handleSubmit","input","title","anchor","variant","onKeyUp","which","aria-describedby","PreGameLobby","players","gameLink","navigator","clipboard","writeText","player","StartGameButton","StatusWithTooltip","tooltipTitle","Tooltip","actionIcons","RAISED","CALLED","CHECKED","Status","isWinningPlayer","isQuestionRoundOver","changeInMoney","isDead","hasFolded","allPlayersPlacedTheirGuess","playerHasPlacedTheirGuess","isTurnPlayer","playerIsAllIn","playerAction","bettingState","calculateBettingRoundSpendingForPlayer","bettingRound","bets","sum","bet","amount","getCurrentQuestionRound","game","questionRounds","getCurrentBettingRound","currentQuestionRound","bettingRounds","haveAllPlayersPlacedTheirGuess","remainingPlayers","guesses","calculateAmountToCall","amountSpentAlreadyInBettingRound","amountSpentInBettingRoundPerPlayer","acc","max","values","hasPlayerFolded","foldedPlayerIds","getRevealAnswer","questionRound","isOver","raise","placeBet","currentBettingRound","currentPlayer","moneyOfPlayer","find","money","min","addGuess","addGuessMutation","playerSeatingOrder","PlayerComp","index","numberOfPlayers","isAppPlayer","isShowdown","isSpectator","isGameOver","isTurnPlayerClass","isAppPlayerClass","isDeadClass","bettingRoundSpending","revealGuess","positionIndex","playerMoney","Pot","usedQuestionRound","isGameFull","totalPot","br","forEach","positioning","styles","fontSize","borderTop","marginTop","paddingTop","currentHint","oldHint","Hints","numberOfHints","slice","hint","Question","noHints","totalQuestions","getNumberOfDecimals","val","LocationMarker","handleUpdate","position","setPosition","useMapEvents","click","latlng","lat","lng","Marker","MarkerContainer","markers","useMap","bounds","latLngBounds","extend","isValid","flyToBounds","padding","maxZoom","FeatureGroup","memo","handleOnClick","answerMarker","m","isAnswer","distanceLines","distanceToAnswer","line","LatLng","label","toFixed","MapContainer","center","zoom","maxBounds","maxBoundsViscosity","scrollWheelZoom","TileLayer","attribution","url","Polyline","positions","weight","direction","permanent","offset","prevProps","nextProps","equals","GuessMap","playerGuess","g","mapMarkers","difference","pId","p","Map","MultipleChoiceOptions","handleClick","active","hiddenAlternatives","revealAnswer","optionClassName","PokerTable","isGeoQuestion","isMultipleChoiceQuestion","winningPlayerIds","winners","getWinningPlayerArray","results","Player","NumberInput","setGuess","submit","stringValue","replaceAll","MultipleChoiceInput","AnswerDrawer","showAnswerDrawer","setShowAnswerDrawer","hasPlayerPlacedGuessInCurrentQuestionRound","handleNumberInputSubmit","handleMapInputSubmit","geoCoordinate","DateInput","MapInput","getInput","ActionButton","text","RaiseInputDrawer","handleRaise","showRaiseDrawer","setShowRaiseDrawer","amountToCall","moneyRemaining","setAmount","pattern","ActionButtons","isAppPlayerTurn","call","fold","soundInterval","Footer","appPlayerAnswer","appPlayerMoney","gameHasStarted","setPlayerId","removeItem","deletePlayerIdFromStorage","removePlayer","ConfirmDialogButton","vibrate","t","GameComponent","setGame","showNewQuestionRoundForSpectator","setShowNewQuestionRoundForSpectator","gqlErr","setGqlErr","Audio","notificationSound","playNotification","alertSound","playAlert","fetchGame","newPlayerData","subscriptionError","useSubscription","hash","onSubscriptionData","subscriptionData","clearInterval","gameUpdated","cqr","cbr","allPlayersPlacedTheirBet","play","setInterval","storedPlayerId","getPlayerIdFromStorage","newPlayerId","addPlayer","setPlayerIdToStorage","previousQuestionRound","getPreviousQuestionRound","LeaveGameButton","PageNotFound","App","path","component","exact","Game","hostname","match","SERVER_URL","process","httpLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","link","split","query","getMainDefinition","kind","operation","client","ApolloClient","cache","InMemoryCache","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"+5IAGO,ICHKA,EAOAC,EDJCC,EAAoBC,IAAH,KAQjBC,EAAsBD,IAAH,KAgBnBE,EAAiBF,IAAH,KAUdG,EAAiBH,IAAH,KAiEdI,EAA0BJ,IAAH,KAiEvBK,EAAgBL,IAAH,KAUbM,EAAaN,IAAH,KAMVO,EAAYP,IAAH,KAMTQ,EAAYR,IAAH,KAUTS,EAAgBT,IAAH,KEvMX,WAACU,GACdC,QAAQC,MAAMF,EAAIG,UCDL,MAA0B,+CCI1B,aACb,OACE,yBAAKC,UAAU,mBACb,yBAAKC,IAAKC,EAAOC,IAAI,iB,8EHPfpB,K,UAAAA,E,sBAAAA,E,kCAAAA,E,aAAAA,M,cAOAC,K,kBAAAA,E,gBAAAA,E,iBAAAA,M,KIPZ,IA6CeoB,GA7CW,CACxBC,GAAI,UACJC,GAAI,SACJC,GAAI,WACJC,GAAI,UACJC,GAAI,SACJC,GAAI,YACJC,GAAI,WACJC,GAAI,WACJC,GAAI,OACJC,GAAI,WACJC,GAAI,cACJC,GAAI,YACJC,GAAI,YACJC,GAAI,WACJC,GAAI,QACJC,GAAI,SACJC,GAAI,QACJC,GAAI,WACJC,GAAI,UACJC,GAAI,QACJC,GAAI,SACJC,GAAI,YACJC,GAAI,SACJC,GAAI,UACJC,GAAI,WACJC,GAAI,SACJC,GAAI,UACJC,GAAI,aACJC,GAAI,YACJC,GAAI,YACJC,GAAI,YACJC,GAAI,SACJC,GAAI,aACJC,GAAI,WACJC,GAAI,UACJC,GAAI,UACJC,GAAI,YACJC,GAAI,YACJC,GAAI,UACJC,GAAI,OACJC,GAAI,UACJC,GAAI,c,qBChCS,SAASC,GAAT,GAA8D,IAAD,MAA5CC,EAA4C,EAA5CA,MAAOC,EAAqC,EAArCA,aAAcC,EAAuB,EAAvBA,aACnD,IAAKF,EAAO,OAAO,KACnB,OAAQC,GACN,KAAKlE,EAAcoE,UACjB,IAAMC,EACuB,kBAApBJ,EAAMK,UACTL,EAAMK,UACNC,WAAWN,EAAMK,WAAa,IACpC,OAAIE,MAAMH,GACD,KAEF,+BAAO,IAAII,KAAKC,cAAeC,OAAON,IAC/C,KAAKrE,EAAc4E,KACjB,OAAKX,EAAMK,UAIT,8BACGO,KAAOZ,EAAMK,UAAUQ,WAAY,YAAYH,OAC9C,iBALG,KASX,KAAK3E,EAAc+E,IACjB,OAAO,mDAAWd,EAAMe,WAAjB,aAAW,EAAWC,SAAtB,uBAAmChB,EAAMe,WAAzC,aAAmC,EAAWE,UAA9C,MACT,KAAKlF,EAAcmF,gBACjB,GAA6B,KAAb,OAAZhB,QAAY,IAAZA,OAAA,EAAAA,EAAciB,QAChB,MAAM,IAAIC,MAAM,qDAElB,OAAO,8BAAOlB,EAAY,UAACF,EAAMK,iBAAP,SAAqB,IACjD,QACE,MAAM,IAAIe,MAAM,0BCsNPC,OAzNf,YAAgF,IAAzDC,EAAwD,EAAxDA,KAAMC,EAAkD,EAAlDA,YAAaC,EAAqC,EAArCA,UAAWC,EAA0B,EAA1BA,gBAC7CC,EAAUC,cAD6D,EAErCC,oBAAS,GAF4B,mBAEtEC,EAFsE,KAExDC,EAFwD,OAGrDF,qBAHqD,mBAGtEG,EAHsE,KAGhEC,EAHgE,OAI/CJ,mBAAS,IAJsC,mBAItEK,EAJsE,KAI7DC,EAJ6D,OAK3CN,mBAAgB,GAL2B,mBAKtEO,EALsE,KAK3DC,EAL2D,OAM7CR,qBAN6C,mBAMtES,EANsE,KAM5DC,EAN4D,OAQxCC,YAAYpG,EAAqB,CACpEqG,UAAW,CACTP,UACAQ,UAAWV,EACXI,YAAaA,EACbE,YAEFK,YAAa,WACPP,EACFT,EAAQiB,KAAR,qBAA2BV,IAE3BT,IAEFC,EAAgB,CAACQ,IACjBV,IACAW,EAAW,IACXF,OAAQY,GACRd,GAAgB,IAElBe,QAASC,IA3BkE,mBAQtEC,EARsE,KAQnDjG,EARmD,KAQnDA,MA+BpBkG,EAAUnB,EACd,oCACE,uBAAG7E,UAAU,QAAb,6CAC6C,IAC3C,uBACEA,UAAU,oCACViG,OAAO,SACPC,IAAI,sBACJC,KAAK,wGAJP,QAFF,KAYA,kBAAC,IAAD,CACEC,OAxBe,SAACC,GACpBvB,GAAgB,GAChBE,ECnEW,SAACqB,GACd,OAAOA,EAAKC,KAAI,SAACC,GAAS,IAgBpBrD,EAhBmB,EAanBqD,EAAIxB,KAXNyB,EAFqB,EAErBA,SACAC,EAHqB,EAGrBA,KACQC,EAJa,EAIrBC,OACA3C,EALqB,EAKrBA,SACAC,EANqB,EAMrBA,UACA2C,EAPqB,EAOrBA,MACAC,EARqB,EAQrBA,MACAC,EATqB,EASrBA,YACAC,EAVqB,EAUrBA,6BACAC,EAXqB,EAWrBA,6BACAC,EAZqB,EAYrBA,6BAEIC,EAAQ,CAACN,EAAOC,GAAOM,OAAOC,SAC9BT,EAAiB,GAEvB,OAAQF,GACN,KAAK1H,EAAcoE,UAGnB,KAAKpE,EAAc4E,KACjBgD,EAAOtD,UAAYqD,EACnB,MACF,KAAK3H,EAAc+E,IACjB6C,EAAO5C,IAAM,CACXC,SAAUA,EACVC,UAAWA,GAEb,MACF,KAAKlF,EAAcmF,gBACjByC,EAAOtD,UAAY,EACnBH,EAAe,CACbwD,EACAK,EACAC,EACAC,GAEF,MACF,QACE,MAAM,IAAI7C,MAAM,yBAEpB,MAAO,CACLoC,WACAC,OACAE,SACAO,QACAJ,cACA5D,mBDkBMmE,CAAehB,KAuBnBR,QApBgB,SAACjG,EAAU0H,EAAWC,EAAgBC,GAC1D3H,QAAQC,MAAMF,IAoBV6H,OAAQ,CAAEC,QAAQ,GAClBC,iBAAe,EACfC,kBAAkB,WAElB,0EAIJ,oCACE,yBAAK5H,UAAU,QACb,2BACE6H,MAAO5C,EACP6C,SAAU,SAACC,GACT7C,EAAW6C,EAAE9B,OAAO4B,QAEtBpB,KAAK,OACLzG,UAAU,4DACVgI,YAAY,4BACZC,aAAW,4BACXC,UAAQ,EACRC,WAAS,IAEX,4BACEnI,UAAU,uDACVkI,UAAQ,EACRL,MAAOxC,EACPyC,SAAU,SAACC,GACTzC,EAAYyC,EAAE9B,OAAO4B,SAGvB,4BAAQO,UAAQ,GAAhB,eACCC,OAAOC,KAAKC,IAAcjC,KAAI,SAACkC,GAAD,OAC7B,4BAAQC,IAAKD,EAAMX,MAAOW,GACvBE,YAAuBF,GAAO,IAC9BD,GAAaC,SAKtB,wBAAIxI,UAAU,sBAAd,uBACA,8BACE+E,GAAQ,IAAIuB,KAAI,SAACqC,GAAD,eAChB,yBAAKF,IAAKE,EAAEnC,SAAUxG,UAAU,SAC9B,uBAAGA,UAAU,QAAb,aACY,2BAAI2I,EAAEnC,WAGjBmC,EAAElC,OAAS1H,EAAcmF,iBACxB,uBAAGlE,UAAU,QAAb,UACU,IACR,2BACE,kBAAC+C,GAAD,CACEC,MAAO2F,EAAEhC,OACT1D,aAAc0F,EAAElC,KAChBvD,aAAcyF,EAAEzF,oBAKtB,UAACyF,EAAEzB,aAAH,aAAC,EAAS/C,SACV,uBAAGnE,UAAU,QAAb,SACS,IACN2I,EAAEzB,MAAMZ,KAAI,SAACsC,GAAD,OACX,oCACE,6BACA,0BAAMH,IAAKG,GACT,2BAAIA,YAMZ,UAACD,EAAEzF,oBAAH,aAAC,EAAgBiB,SACjB,uBAAGnE,UAAU,QAAb,gBACgB,IACb2I,EAAEzF,aAAaoD,KAAI,SAACnG,EAAK0I,GAAN,OAClB,oCACE,6BACA,0BAAMJ,IAAKtI,GACT,uBAAGH,UAAiB,IAAN6I,EAAU,iBAAmB,IAAK1I,SAMzDwI,EAAE7B,aACD,uBAAG9G,UAAU,QAAb,gBACe,2BAAI2I,EAAE7B,cAGvB,wBAAI9G,UAAU,aAGlB,yBAAKA,UAAU,QACb,2BACEyG,KAAK,WACLzG,UAAU,OACV8I,GAAG,oBACHjB,MAAO1C,EACP2C,SAAU,WACR1C,EAAaD,EAAY,EAAI,MAGjC,2BAAOnF,UAAU,OAAO+I,QAAQ,qBAAhC,wBAEE,6BACA,sHAMJ,yBAAK/I,UAAU,aACb,4BACEA,UAAU,0HACVgJ,UAAW/D,IAAYI,EACvB4D,QAAS,WACPlD,MAJJ,UASA,4BACE/F,UAAU,iJACViJ,QAAS,WACPnE,GAAgB,KAHpB,qBAYN,OACE,kBAACoE,EAAA,EAAD,CACEC,eAAa,EACbC,qBAAmB,EACnBC,kBAAgB,EAChB/E,KAAMA,EACNtE,UAAU,uCACVsJ,QAAS/E,EACTgF,sBAAoB,EACpBC,kBAAmBC,IACnBC,cAAe,CACbC,QAAS,MAGX,yBAAK3J,UAAU,+GACb,yBAAKA,UAAU,0DACb,wBAAIA,UAAU,iBAAd,2CAGCgG,EACAlG,GAAS,yBAAKE,UAAU,sBAAsBF,EAAMC,a,OEnOhD,SAAS6J,GAAT,GAKJ,IAAD,IAJRC,YAIQ,MAJD,GAIC,EAHR5E,EAGQ,EAHRA,QACA6E,EAEQ,EAFRA,UACAtF,EACQ,EADRA,UAEME,EAAUC,cACVoF,EAAWC,cAFT,EAGgCpF,mBACtCK,EAAU,CAACA,GAAW,IAJhB,mBAGDgF,EAHC,KAGaxF,EAHb,OAM0CG,oBAAS,GANnD,mBAMDsF,EANC,KAMkBC,EANlB,OAOkCvF,mBAAS,MAP3C,mBAODwF,EAPC,KAOcC,EAPd,OAQ0B9E,YAE/BtG,EAAmB,CACpBuG,UAAW,CACT8E,SAAUL,GAEZvE,YAAa,YAAqB,IAAlB6E,EAAiB,EAAjBA,WACd7F,EAAQiB,KAAR,WAAiB4E,EAAWzB,MAE9BjD,QAAS2E,IAjBH,mBAQDD,EARC,KAQaE,EARb,KAQaA,QAYfC,EAAgB,uCAAG,sBAAAC,EAAA,sDACnBV,EAAa9F,QACfoG,IAFqB,2CAAH,qDAMtB,OACE,yBAAKvK,UAAU,kCACb,uBAAGmG,KAAK,IAAInG,UAAU,8BAAtB,mBAGCiF,EACC,2FACgE,IAC9D,kBAAC,IAAD,CACE2F,GAAIb,EAASc,SACbC,MAAO,CAAEC,MAAO,YAFlB,UAGKC,OAAOjB,SAASkB,MAHrB,OAG4BlB,EAASc,WALvC,IAOE,6BAPF,gBAQe,6CARf,kEAUE,6BAVF,gDAcA,oCACE,wBAAI7K,UAAU,QAAd,6BAEE,6BAFF,mCAKA,uLAKA,yIAGE,6BAHF,gDAIgD,IAC9C,4BACEA,UAAU,wCACViJ,QAAS,WACPkB,GAAqB,KAHzB,eALF,MAiBJ,yBAAKnK,UAAU,aACZ8J,EAAUxD,KAAI,SAACjB,GAAD,OACb,0BACEoD,IAAKpD,EACLrF,UAAS,wBACPqF,IAAa+E,EAAgB,GAAK,iBAEpCnB,QAAS,WACPoB,EAAiBhF,IAEnByF,MAAO,CACLI,OAAQ7F,IAAa+E,EAAgB,UAAY,YAGlD1B,YAAuBrD,QAI9B,yBAAKrF,UAAU,sBACZ6J,EACE1C,QAAO,SAACgE,GAAD,OAAOA,EAAE9F,WAAa+E,KAC7B9D,KAAI,SAAC8E,GAAD,OACH,0BACE3C,IAAK2C,EAAInG,QACTjF,UAAS,sJACK,OAAZiK,QAAY,IAAZA,OAAA,EAAAA,EAAcoB,SAASD,EAAInG,UACvB,yBACA,GAHG,YAILA,EAAU,UAAY,IAC1B6F,MAAO,CACLQ,WAAW,QAAD,OAAUC,KAAKC,MACvBD,KAAKE,IAAIL,EAAInG,QAAQd,OAAQ,QAGjC8E,QAAS,SAAClB,GACJ9C,IAGA8C,EAAE2D,SACJ,OAAIzB,QAAJ,IAAIA,OAAJ,EAAIA,EAAcoB,SAASD,EAAInG,UAC7BR,EACEwF,EAAa9C,QAAO,SAAClC,GAAD,OAAamG,EAAInG,UAAYA,MAGnDR,EAAgB,CAAC2G,EAAInG,SAAN,mBAAkBgF,KAGnCxF,EAAgB,CAAC2G,EAAInG,aAIxBmG,EAAInG,QA7BP,KA6BkBmG,EAAIO,kBA7BtB,SAiCN,4BACE3L,UAAU,kIACViJ,QAASyB,EACT1B,UAAWiB,EAAa9F,QAEvBsG,EAAU,aAAe,eAE5B,uBAAGzK,UAAU,QAAb,kCACkC,IAChC,uBACEA,UAAU,wCACVmG,KAAK,mGACLF,OAAO,SACPC,IAAI,uBAJN,QAFF,KAYA,uBAAGlG,UAAU,gBAAb,SAEE,6BAFF,8UAUA,kBAAC,GAAD,CACEsE,KAAM4F,EACN3F,YAAa,WACX4F,GAAqB,IAEvB3F,UAAWA,EACXC,gBAAiBA,K,OC5IVmH,OAvCf,WAAkB,IACR3G,EAAY4G,cAAZ5G,QADO,EAEqB6G,YAEjC1M,EAAgB,CACjB2M,YAAa,WACblG,QAAS2E,EACThF,UAAW,CAAEP,aAPA,mBAERT,EAFQ,KAEWqF,EAFX,KAEK9E,KAQpBiH,qBAAU,WACRxH,MACC,CAACA,EAAWS,IAEf,IAAM6E,GACA,OAAJD,QAAI,IAAJA,OAAA,EAAAA,EAAMA,KACHoC,QAAiB,SAACC,EAAiBf,GAIlC,OAHKe,EAAgBb,SAASF,EAAE9F,WAC9B6G,EAAgBvG,KAAKwF,EAAE9F,UAElB6G,IACN,IACFC,MAAK,SAACxB,EAAGyB,GACR,MAAU,OAANzB,GACM,EAEH0B,SAAS1B,GAAK0B,SAASD,QAC1B,GAEV,OACE,yBAAKpM,UAAU,kBACb,kBAAC4J,GACK,CAAEC,KAAI,OAAEA,QAAF,IAAEA,OAAF,EAAEA,EAAMA,KAAMC,YAAW7E,UAAST,cAE9C,kBAAC8H,EAAD,QC7CAC,GAAgB,YAChBC,GAAkB,cAYXC,GAA0B,SAACC,GAEtCC,aAAaC,QAEb,IAAM/E,EAAQ0D,KAAKsB,SAAShJ,SAAS,IAAIiJ,UAAU,GAEnD,OADAH,aAAaI,QAAb,UAAwBP,GAAxB,YAA2CE,GAAU7E,GAC9CA,GAGImF,GAA4B,SAACN,GAAD,OACvCC,aAAaM,QAAb,UAAwBT,GAAxB,YAA2CE,K,SCP9BQ,OAVf,YAA4C,IAAtBC,EAAqB,EAArBA,WACpB,OACE,yBAAKnN,UAAU,8EACb,0BAAMA,UAAU,0CACbmN,K,8BCIM,eAOD,IANZC,EAMW,EANXA,YACAC,EAKW,EALXA,YACAC,EAIW,EAJXA,aACAC,EAGW,EAHXA,UACAC,EAEW,EAFXA,WACAC,EACW,EADXA,aACW,EACaC,IAAM9I,UAAS,GAD5B,mBACJN,EADI,KACEqJ,EADF,KAMLpJ,EAAc,WAClBoJ,GAAQ,IAQV,OACE,oCACE,4BACE3N,UACEyN,GACA,0HAEFxE,QApBkB,WACtB0E,GAAQ,IAoBJ3E,SAAUwE,GAETJ,GAEH,kBAACQ,GAAA,EAAD,CAAQtJ,KAAMA,EAAMgF,QAAS/E,GAC3B,yBAAKvE,UAAU,aACb,kBAAC6N,GAAA,EAAD,KAAcR,GACd,kBAACS,GAAA,EAAD,KACE,4BAAQ9N,UAAU,uBAAuBiJ,QAAS1E,GAAlD,UAGA,4BACEvE,UAAU,0HACViJ,QA1BU,WACpBsE,IACAI,GAAQ,KA0BGL,QC3CA,eAA+C,IAA5CS,EAA2C,EAA3CA,UAAWrB,EAAgC,EAAhCA,OAAQc,EAAwB,EAAxBA,WAInC,OACE,kBAAC,GAAD,CACED,UALc,WAChBQ,EAAU,CAAEvI,UAAW,CAAEkH,aAKvBW,YAAY,uFACZC,aAAa,aACbF,YAAY,aACZI,WAAYA,K,mCChBH,SAASQ,GAAT,GAIJ,IAHTC,EAGQ,EAHRA,SACA3E,EAEQ,EAFRA,QACG4E,EACK,uCACR,OACE,kBAACC,GAAA,EAAD,gBAEOD,GAGL,yBAAKlO,UAAU,wDACZsJ,GACC,0BACER,GAAG,eACH9I,UAAU,2BACViJ,QAASK,GAHX,UASF,yBAAKtJ,UAAU,wDACZiO,KCfI,SAASG,GAAT,GAIJ,IAHTC,EAGQ,EAHRA,aACA3B,EAEQ,EAFRA,OACA4B,EACQ,EADRA,SACQ,EACgB1J,mBAAS,IADzB,mBACD2J,EADC,KACKtJ,EADL,KAGFuJ,EAAe,WACdF,GACHD,EAAa,CAAE7I,UAAW,CAAEiJ,MAAO,CAAE/B,SAAQS,WAAYoB,OAI7D,OACE,kBAAC,GAAD,CACEG,MAAM,YACNC,OAAQ,SACRrK,MAAOgK,EACPM,QAAQ,aAER,oCACE,uBAAG5O,UAAU,aAAb,mBACA,uBAAGA,UAAU,gBAAb,YAEA,yBAAKA,UAAU,0BACb,2BACE6H,MAAO0G,EACPzG,SAAU,SAACC,GACT9C,EAAQ8C,EAAE9B,OAAO4B,QAEnBgH,QAAS,SAAC9G,GACQ,KAAZA,EAAE+G,OACJN,KAGJ/H,KAAK,OACLzG,UAAU,uCACVgI,YAAY,YACZC,aAAW,cACX8G,mBAAiB,eACjB5G,WAAS,IAEX,4BACE1B,KAAK,SACLuC,UAAWuF,EAAKpK,OAChBnE,UAAU,kIACViJ,QAASuF,GAJX,aCOKQ,I,GAAAA,GAjDf,YAOW,IANTC,EAMQ,EANRA,QACAC,EAKQ,EALRA,SACAnB,EAIQ,EAJRA,UACArB,EAGQ,EAHRA,OACA2B,EAEQ,EAFRA,aACAC,EACQ,EADRA,SAEA,OACE,oCACE,yBAAKtO,UAAU,iFACb,sFACA,yBAAKA,UAAU,qGACb,0BAAMA,UAAU,SAASkP,GACzB,4BACElP,UAAU,2EACViJ,QAAO,sBAAE,sBAAA0B,EAAA,sEACDwE,UAAUC,UAAUC,UAAUrE,OAAOjB,SAAS5D,MAD7C,4CAIT,kBAAC,KAAD,QAGJ,uBAAGnG,UAAU,oBAAb,WACA,uBAAGA,UAAU,yEA1Ba,GA2BFiP,EAAQ9K,OADhC,aA1B0B,GA4BF8K,EAAQ9K,SAAW,EAAI,GAAK,KAEpD,6BACA,yBAAKnE,UAAU,uEACZiP,EAAQ3I,KAAI,SAACgJ,GAAD,OACX,kBAAC,GAAD,CAAY7G,IAAK6G,EAAOxG,GAAIqE,WAAU,OAAEmC,QAAF,IAAEA,OAAF,EAAEA,EAAQf,WAGnDD,GACC,yBAAKtO,UAAU,oBACb,kBAACuP,GAAD,CACExB,UAAWA,EACXrB,OAAQA,EACRc,WAAYyB,EAAQ9K,QAAU,MAKtC,kBAACiK,GAAoB,CAAE1B,SAAQ2B,eAAcC,e,kEC/C7CkB,GAAoB,SAAC,GAAD,IACxBC,EADwB,EACxBA,aACAxB,EAFwB,EAExBA,SAFwB,OAOxB,kBAACyB,GAAA,EAAD,CAAShB,MAAOe,GACd,8BAAOxB,KAIL0B,IAAW,sBACd3Q,EAAc4Q,OACb,kBAAC,GAAD,CAAmBH,aAAa,UAC9B,kBAAC,KAAD,QAHW,gBAMdzQ,EAAc6Q,OACb,kBAAC,GAAD,CAAmBJ,aAAa,UAC9B,kBAAC,KAAD,QARW,gBAWdzQ,EAAc8Q,QACb,kBAAC,GAAD,CAAmBL,aAAa,WAC9B,kBAAC,KAAD,QAbW,IA0GFM,OA3Ef,YAWW,IAVTT,EAUQ,EAVRA,OACAU,EASQ,EATRA,gBACAC,EAQQ,EARRA,oBACAC,EAOQ,EAPRA,cACAC,EAMQ,EANRA,OACAC,EAKQ,EALRA,UACAC,EAIQ,EAJRA,2BACAC,EAGQ,EAHRA,0BACAC,EAEQ,EAFRA,aACAC,EACQ,EADRA,cAEA,GAAIL,EACF,OACE,kBAAC,GAAD,CAAmBV,aAAa,OAC9B,kBAAC,KAAD,OAIN,GAAIW,EACF,OACE,kBAAC,GAAD,CAAmBX,aAAa,UAC9B,kBAAC,KAAD,OAIN,GAAIe,EACF,OACE,kBAAC,GAAD,CAAmBf,aAAa,UAC9B,kBAAC,KAAD,OAIN,GAAIO,GAAmBC,EACrB,OAAO,kBAAC,KAAD,MAET,GAAIA,GAAuBC,GAAiBA,EAAgB,EAC1D,OAAO,kBAAC,KAAD,MAET,GAAID,GAAuBC,GAAiBA,EAAgB,EAC1D,OAAO,kBAAC,KAAD,MAET,IAAKG,EACH,OAAIC,EAEA,kBAAC,GAAD,CAAmBb,aAAa,2BAC9B,kBAAC,KAAD,OAKF,kBAAC,GAAD,CAAmBA,aAAa,2BAC9B,kBAAC,KAAD,OAKR,GAAIc,EACF,OACE,kBAAC,GAAD,CAAmBd,aAAa,iBAC9B,kBAAC,KAAD,CAAQzP,UAAU,kBAIxB,IAAMyQ,EAAenB,EAAOoB,aAC5B,OAAID,GAAgBd,GAAYc,GACvBd,GAAYc,GAGnB,kBAAC,GAAD,CAAmBhB,aAAa,oBAC9B,kBAAC,KAAD,QCxHOkB,GAAyC,SACpDC,EACAtC,GAEA,OAAOsC,EAAaC,KAAK5E,QACvB,SAAC6E,EAAKC,GAAN,OAAcD,GAAOC,EAAIzC,WAAaA,EAAWyC,EAAIC,OAAS,KAC9D,IAISC,GAA0B,SAACC,GAAD,oBACrCA,QADqC,IACrCA,OADqC,EACrCA,EAAMC,gBAAmB,OAAJD,QAAI,IAAJA,GAAA,UAAAA,EAAMC,sBAAN,eAAsBhN,QAAS,IAKzCiN,GAAyB,SAACC,GAAD,oBACpCA,QADoC,IACpCA,OADoC,EACpCA,EAAsBC,eACA,OAApBD,QAAoB,IAApBA,GAAA,UAAAA,EAAsBC,qBAAtB,eAAqCnN,QAAS,IAGrCoN,GAAiC,SAC5CF,EACApC,GAEA,IAAMuC,EAAmBvC,EAAQ9H,QAAO,SAACmI,GAAD,OAAaA,EAAOa,UAC5D,OAAOkB,EAAqBI,QAAQtN,QAAUqN,EAAiBrN,QAGpDuN,GAAwB,SACnCd,EACAtC,GAEA,IAAKsC,EAAaC,KAAK1M,OAAQ,OAAO,EACtC,IAAMwN,EAAmChB,GACvCC,EACAtC,GAGIsD,EAAqChB,EAAaC,KAAK5E,QAC3D,SAAC4F,EAAKd,GAEJ,OADAc,EAAId,EAAIzC,WAAauD,EAAId,EAAIzC,WAAa,GAAKyC,EAAIC,OAC5Ca,IAET,IAGF,OACEtG,KAAKuG,IAAL,MAAAvG,KAAI,YAAQlD,OAAO0J,OAAOH,KAC1BD,GAISK,GAAkB,SAC7BX,EACA/C,GAF6B,cAG1B+C,QAH0B,IAG1BA,OAH0B,EAG1BA,EAAsBY,gBAAgB5G,SAASiD,IAEvC4D,GAAkB,SAACC,GAC9B,QAAIA,EAAcC,SAGdD,EAAc3L,SAASC,OAAS1H,EAAcmF,gBACzCiO,EAAcb,cAAcnN,QAAU,EAG7CgO,EAAc3L,SAASU,MAAM/C,OAAS,EAAIgO,EAAcb,cAAcnN,SCJ7DkO,GAAQ,SACnBrB,EACAsB,EACApB,EACA5C,GACI,IAAD,IACG+C,EAAuBJ,GAAwBC,GAC/CqB,EAAsBnB,GAAuBC,GACnD,GACGA,IACkB,OAAnBkB,QAAmB,IAAnBA,OAAA,EAAAA,EAAqBC,cAAc1J,MAAOwF,EAF5C,CAQA,GADqBoD,GAAsBa,EAAqBjE,GAC7C0C,EACjB,MAAM,IAAI5M,MAAM,iDAGlB,IAAMqO,EAAa,oBACjBvB,EAAKjC,QAAQyD,MAAK,qBAAG5J,KAAgBwF,YADpB,aACjB,EAAgDqE,aAD/B,QACwC,EAE3DL,EAAS,CACP9M,UAAW,CACTiJ,MAAO,CACL/B,OAAQwE,EAAKpI,GACbwF,SAAUA,EACV0C,OAAQzF,KAAKqH,IAAI5B,EAAQyB,SC1FpBI,GAAW,SACtBC,EACA5B,EACAlO,EACAsL,GAEAwE,EAAiB,CACftN,UAAW,CACTiJ,MAAO,CACL/B,OAAQwE,EAAKpI,GACbwF,SAAUA,EACVtL,aCHF+P,I,OAAqB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,IAmIjDC,GA9GI,SAAC,GAiBN,IAhBZ1D,EAgBW,EAhBXA,OACA2D,EAeW,EAfXA,MACAC,EAcW,EAdXA,gBACA3C,EAaW,EAbXA,aACA4C,EAYW,EAZXA,YACAnD,EAWW,EAXXA,gBACAC,EAUW,EAVXA,oBACAmD,EASW,EATXA,WACAb,EAQW,EARXA,oBACArC,EAOW,EAPXA,cACAE,EAMW,EANXA,UACAiD,EAKW,EALXA,YACAhD,EAIW,EAJXA,2BACArN,EAGW,EAHXA,MACAwD,EAEW,EAFXA,SACA8M,EACW,EADXA,WAEMC,EACJhD,IAAiBN,EAAsB,eAAiB,GACpDuD,EAAmBL,EAAc,cAAgB,cACjDM,EAAcnE,EAAOa,OAAS,UAAY,GAE1CuD,EAAuBnB,EACzB5B,GAAuC4B,EAAqBjD,EAAOxG,IACnE,EACE6K,GACI,OAARnN,QAAQ,IAARA,OAAA,EAAAA,EAAUC,QAAS1H,EAAc+E,MAChCuP,KAAkBpD,GAAuBmD,IAAehD,GAErDwD,EAAgBb,GAAmB5L,QAAO,SAAC0B,GAAD,OAAOA,GAAKqK,KAC1DD,GAGEY,EAAcvE,EAAOqD,MAKzB,OAJI1C,IAAwBqD,IAC1BO,GAAeH,GAIf,yBACE1T,UAAS,wBAAmB4T,EAAnB,sBAA8CL,EAA9C,YAAmEC,EAAnE,YAAuFC,EAAvF,iBAET,0BACEzT,UAAS,yCACPiQ,GAAuBC,GAAiBA,EAAgB,EACpD,eACA,gBAGN,kBAAC,GACK,CACFZ,SACAU,kBACAO,eACAL,gBACAD,sBACAE,OAAQb,EAAOa,OACfC,YACAC,6BACAC,4BAA6BtN,EAC7BwN,eAAgBlB,EAAOa,QAA2B,IAAjBb,EAAOqD,SAI9C,yBAAK3S,UAAU,QACb,0BAAMA,UAAU,QAAQsP,EAAOf,MAC/B,yBAAKvO,UAAU,qBACb,kBAAC,KAAD,CAASA,UAAU,SACnB,8BAAO6T,GACN5D,GAAuBC,GACtB,0BACElQ,UAAS,eACPkQ,EAAgB,EAAI,iBAAmB,iBAF3C,IAKIA,EAAgB,EAAI,IAAM,GAC3BA,EANH,MAUJ,yBAAKlQ,UAAU,sIACXiQ,KAAyByD,GACzB,yBAAK1T,UAAU,qBACb,0BAAMA,UAAU,QACd,kBAAC,KAAD,OAEF,8BAAO0T,IAGVC,IAAW,OAAInN,QAAJ,IAAIA,OAAJ,EAAIA,EAAUC,QAAzB,OAAiCzD,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAOA,QACvC,yBAAKhD,UAAU,qBACb,0BAAMA,UAAU,QACd,kBAAC,KAAD,OAEF,kBAAC,GACK,CACFgD,MAAK,OAAEA,QAAF,IAAEA,OAAF,EAAEA,EAAOA,MACdC,aAAcuD,EAASC,KACvBvD,aAAcsD,EAAStD,oBC/H1B,SAAS4Q,GAAT,GAAwD,IAAzCC,EAAwC,EAAxCA,kBAAmBC,EAAqB,EAArBA,WACzCC,EAAQ,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAmBzC,cAAcrF,QAAO,SAAC6E,EAAKoD,GAI7D,OAHAA,EAAGrD,KAAKsD,SAAQ,SAACpD,GACfD,GAAOC,EAAIC,UAENF,IACN,GAEGsD,EAAcJ,EAChB,yBACA,0BAEJ,OACE,yBACEhU,UAAS,6DAAwDoU,IAEjE,yBAAKpU,UAAU,cACb,0BAAMA,UAAU,QACd,kBAAC,KAAD,OAEF,8BAAOiU,IAET,0BAAMjU,UAAU,sBAAhB,WC3BN,IAAMqU,GAAS,CACb3F,MAAO,CACL4F,SAAU,QACVC,UAAW,oBACXC,UAAW,QACXC,WAAY,OAEdC,YAAa,CACXJ,SAAU,SAEZK,QAAS,CACPL,SAAU,UAQC,SAASM,GAAT,GAA8C,IAA7Bb,EAA4B,EAA5BA,kBACxB7M,EAAQ6M,EAAkBvN,SAASU,MACnC2N,EAAgBd,EAAkB3B,OACpClL,EAAM/C,OACNoH,KAAKqH,IAAImB,EAAkBzC,cAAcnN,OAAS,EAAG+C,EAAM/C,QAC/D,OAAI0Q,EAAgB,EACX,MAEL,OAAC3N,QAAD,IAACA,OAAD,EAACA,EAAO/C,QAIV,yBAAKnE,UAAU,iBACb,0BAAM8K,MAAOuJ,GAAO3F,OAApB,OACOmG,EAAgB,GAAK,IAD5B,KACmCA,EADnC,IACmD3N,EAAM/C,OADzD,MAGA,4BACG4P,EAAkBvN,SAASU,MACzB4N,MAAM,EAAGD,GACTvO,KAAI,SAACyO,EAAMlM,GAAP,OACH,wBACEJ,IAAKsM,EACLjK,MACE+J,IAAkBhM,EAAI,GAAMqJ,GAAgB6B,GAExCM,GAAOM,QADPN,GAAOK,aAIZK,QAnBJ,KCrBX,IAAMV,GAAS,CACb7N,SAAU,CACR8N,SAAU,SAEZ3N,OAAQ,CACN2N,SAAU,UAIC,SAASU,GAAT,GAA+D,IAA3C9D,EAA0C,EAA1CA,KAAM6C,EAAoC,EAApCA,kBACjCkB,EACJlB,EAAkBvN,SAASC,OAAS1H,EAAcmF,iBAClD6P,EAAkBzC,cAAcnN,QAAU,IACzC4P,EAAkB3B,OACf8C,EAAiBhE,EAAKC,eAAehN,OAAS+M,EAAKzL,UAAUtB,OACnE,OACE,6BACE,uBAAGnE,UAAU,OAAO8K,OAASmK,GAAW,CAAEX,SAAU,UAAc,IAAlE,aACapD,EAAKC,eAAehN,OADjC,IAC0C+Q,EAD1C,MAGA,uBAAGpK,MAAQmK,GAAWZ,GAAO7N,UAAa,IACvCuN,EAAkBvN,SAASA,UAE9B,kBAACoO,GACK,CACFb,sBAGH,CAAChV,EAAcoE,UAAWpE,EAAc4E,MAAM0H,SAC7C0I,EAAkBvN,SAASC,OAE3ByL,GAAgB6B,IACd,oCACE,uBAAGjJ,MAAOuJ,GAAO1N,QAAjB,UACU,IACR,2BACE,kBAAC5D,GAAD,CACEC,MAAO+Q,EAAkBvN,SAASG,OAClC1D,aAAc8Q,EAAkBvN,SAASC,SAI9CsN,EAAkBvN,SAASM,aAC1B,2BAAIiN,EAAkBvN,SAASM,e,6FCvBvCqO,I,OAAsB,WAAsB,IAArBC,EAAoB,uDAAN,EACzC,OAAIA,EAAM,IACD,EAELA,EAAM,IACD,EAELA,EAAM,EACD,EAEF,IAGT,SAASC,GAAT,GAA4E,IAAlDC,EAAiD,EAAjDA,aAAiD,EACzC1Q,mBAAc,MAD2B,mBAClE2Q,EADkE,KACxDC,EADwD,KASzE,OAPAC,aAAa,CACXC,MADW,SACL3N,GACJyN,EAAYzN,EAAE4N,QACdL,EAAa,CAAEtR,SAAU+D,EAAE4N,OAAOC,IAAK3R,UAAW8D,EAAE4N,OAAOE,SAIxDN,GAAY,kBAACO,GAAA,EAAD,CAAQP,SAAUA,IAGvC,SAASQ,GAAT,GAMI,IALF9H,EAKC,EALDA,SACA+H,EAIC,EAJDA,QAKM1P,EAAM2P,eACNC,EAASC,wBAAa,IAW5B,OAVO,OAAPH,QAAO,IAAPA,KAAS7B,SAAQ,SAACpP,GAChBmR,EAAOE,OAAO,CAACrR,EAAKwQ,SAASvR,SAAUe,EAAKwQ,SAAStR,eAEvDiS,EAAOG,WACL/P,EAAIgQ,YAAYJ,EAAQ,CAEtBK,QAAS,CAAC,GAAI,IACdC,QAASR,EAAQ7R,OAAS,EAAI,GAAK,IAGhC,kBAACsS,GAAA,EAAD,KAAexI,GAGTP,WAAMgJ,MACnB,YAAwD,IAAD,IAApDV,eAAoD,MAA1C,GAA0C,EAAtCW,EAAsC,EAAtCA,cAAe3W,EAAuB,EAAvBA,UACxB4W,EAAeZ,EAAQtD,MAAK,SAACmE,GAAD,OAAOA,EAAEC,YACrCC,IACFH,GACFZ,EACG7O,QAAO,SAAC0P,GAAD,OAAQA,EAAEC,UAAYD,EAAEG,oBAC/B1Q,KAAI,SAACuQ,GAAD,YAAQ,CACXI,KAAM,CACJ,IAAIC,UAAOL,EAAEtB,SAASvR,SAAU6S,EAAEtB,SAAStR,WAC3C,IAAIiT,UACFN,EAAarB,SAASvR,SACtB4S,EAAarB,SAAStR,YAG1BkT,MAAK,UAAEN,EAAEG,wBAAJ,aAAE,EAAoBI,QACzBjC,GAAoB0B,EAAEG,uBAI9B,OACE,kBAACK,GAAA,EAAD,CACEC,OAAQ,CAAC,EAAG,GACZC,KAAM,EACNC,UAAW,CACT,EAAE,IAAK,KACP,CAAC,GAAI,MAEPC,mBAAoB,EACpBC,iBAAiB,EACjB1X,UAAWA,GAEX,kBAAC2X,GAAA,EAAD,CACEC,YAAY,uOACZC,IAAI,yEAELlB,GAAiB,kBAACtB,GAAD,CAAgBC,aAAcqB,IAC/CI,GACCA,EAAczQ,KAAI,gBAAG2Q,EAAH,EAAGA,KAAME,EAAT,EAASA,MAAT,OAChB,kBAACW,GAAA,EAAD,CACErP,IAAKwO,EAAKpT,WACVkU,UAAWd,EACXlM,MAAM,UACNiN,OAAQ,GAEPb,GACC,kBAAC,KAAD,CACEnX,UAAU,iBACViY,UAAU,SACVC,WAAS,GAERf,EALH,WAUPnB,EAAQ7R,QACP,kBAAC4R,GAAD,CAAiBC,QAASA,GACvBA,EAAQ1P,KAAI,gBAAGiP,EAAH,EAAGA,SAAU4B,EAAb,EAAaA,MAAb,OACX,kBAACrB,GAAA,EAAD,CACEP,SAAU,CAACA,EAASvR,SAAUuR,EAAStR,WACvCwE,IAAK8M,EAASvR,UAEbmT,GACC,kBAAC,KAAD,CAASc,UAAU,SAASE,OAAQ,EAAE,GAAI,IAAKD,WAAS,GACrDf,YAUnB,SAACiB,EAAWC,GAAZ,OAA0BC,aAAOF,EAAUpC,QAASqC,EAAUrC,YCvIjD,SAASuC,GAAT,GAMJ,IALTxE,EAKQ,EALRA,kBACAV,EAIQ,EAJRA,YACA/E,EAGQ,EAHRA,SACAW,EAEQ,EAFRA,QACAjP,EACQ,EADRA,UAEMiD,EAAe8Q,EAAkBvN,SAASC,KAChD,IAAKsN,GAAqB9Q,IAAiBlE,EAAc+E,IACvD,OAAO,KAGT,IAAM0U,EAAczE,EAAkBtC,QAAQiB,MAC5C,SAAC+F,GAAD,OAAOA,EAAEnK,WAAaA,KAGpBoK,GAAsC,OAAXF,QAAW,IAAXA,OAAA,EAAAA,EAAaxV,MAAMe,KAC9C,CACE,CACEwR,SAAUiD,EAAYxV,MAAMe,IAC5BoT,MAAO,MACPH,iBAAkBwB,EAAYG,aAGlC,GAsCJ,OAnCEtF,GACCU,EAAkB3B,QAAU2B,EAAkBX,aAE/CsF,EAAW/S,KAAX,MAAA+S,EAAU,YACL3E,EAAkBtC,QAAQxF,QAC3B,SAAC4F,EAAD,GAAgD,IAAxC7O,EAAuC,EAAvCA,MAAiB4V,EAAsB,EAAhCtK,SAAeqK,EAAiB,EAAjBA,WAC5B,GACE3V,EAAMe,KACNuK,IAAasK,IACZvF,IAAgBrB,GAAgB+B,EAAmB6E,IACpD,CAAC,IAAD,EACMzB,GAAQ,UAAAlI,EAAQyD,MAAK,SAACmG,GAAD,OAAOA,EAAE/P,KAAO8P,YAA7B,eAAmCrK,OAAQ,GACzDsD,EAAIlM,KAAK,CACP4P,SAAUvS,EAAMe,IAChBoT,QACAH,iBAAkB2B,IAGtB,OAAO9G,IAET,MAKJK,GAAgB6B,IAChBA,EAAkBvN,SAASG,OAAO5C,KAElC2U,EAAW/S,KAAK,CACd4P,SAAUxB,EAAkBvN,SAASG,OAAO5C,IAC5CoT,MAAO,iBACPL,UAAU,IAIP,kBAACgC,GAAD,CAAK9Y,UAAWA,EAAWgW,QAAS0C,I,OCpE9B,SAASK,GAAT,GAIJ,IAAD,EAHRhF,EAGQ,EAHRA,kBACAiF,EAEQ,EAFRA,YACAhW,EACQ,EADRA,MAEA,GAAI+Q,EAAkBvN,SAASC,OAAS1H,EAAcmF,gBACpD,OAAO,KAET,GAAwD,KAApD,UAAA6P,EAAkBvN,SAAStD,oBAA3B,eAAyCiB,QAC3C,MAAM,IAAIC,MAAM,qDAElB,IAAMlB,EAAe6Q,EAAkBvN,SAAStD,aAAaoD,KAAI,SAACnG,GAAD,YAAU,CACzE0H,MAAO1H,EACP8Y,SAAQ,UAAClF,EAAkBvN,SAAS0S,0BAA5B,aAAC,EAA+C7N,SAASlL,QAG7DgZ,EAAejH,GAAgB6B,GAC/BpN,EAASoN,EAAkBvN,SAASG,OAAOtD,UAEjD,OACE,yBAAKrD,UAAU,qBACZkD,EAAaoD,KAAI,SAACnG,EAAK0I,GACtB,IAAIuQ,EACF,gGAkBF,OAjBKJ,IACHI,GAAmB,eAEjBjZ,EAAI8Y,QACFD,GACFI,GAAmB,sCAEjBA,GADEpW,IAAU6F,EACO,0BAEA,kBAMvBuQ,GAAmB,iBAGnB,4BACE3Q,IAAG,UAAKtI,EAAI0H,MAAT,YAAkBgB,GACrB7I,UAAWoZ,EACXnQ,QAAS,kBAAM+P,GAAeA,EAAYnQ,IAC1CG,UAAW7I,EAAI8Y,QAAWE,GAAgBtQ,IAAMlC,GAE/CxG,EAAI0H,W,WC6FFwR,GA/HI,SAAC,GAMN,IAAD,IALXnI,EAKW,EALXA,KACA6C,EAIW,EAJXA,kBACAxB,EAGW,EAHXA,oBACAjE,EAEW,EAFXA,SACA+E,EACW,EADXA,YAEMiG,GAAiC,OAAjBvF,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBvN,SAASC,QAAS1H,EAAc+E,IACnEyV,GACa,OAAjBxF,QAAiB,IAAjBA,OAAA,EAAAA,EAAmBvN,SAASC,QAAS1H,EAAcmF,gBAC/CmM,EACJ0D,GACA7C,EAAKjC,SACLsC,GAA+BwC,EAAmB7C,EAAKjC,SACnDuK,ECtC6B,SAACtI,GACpC,GAAIA,EAAKkB,OACP,OAAOlB,EAAKjC,QACThD,QACC,SAACwN,EAASnK,EAAQzG,GAChB,OAAU,IAANA,EAAgB4Q,EAChBA,EAAQ,GAAG9G,MAAQrD,EAAOqD,MACrB,CAACrD,GAENmK,EAAQ,GAAG9G,QAAUrD,EAAOqD,MACxB,GAAN,mBAAW8G,GAAX,CAAoBnK,IAEfmK,IAET,CAACvI,EAAKjC,QAAQ,KAEf3I,KAAI,SAACuS,GAAD,OAAOA,EAAE/P,MDsBO4Q,CAAsBxI,IAAS,GAExD,OACE,yBAAKlR,UAAU,8BACZsZ,GACC,kBAACtE,GACK,CACF9D,OACA6C,sBAIN,yBAAK/T,UAAU,iCACb,yBACEA,UAAS,sBACPsZ,EAAgB,4BAA8B,oBADvC,yIAIT,yBAAKtZ,UAAU,0CACZkR,EAAKjC,QAAQ3I,KAAI,SAACgJ,EAAQ2D,GAAW,IAAD,EAC3B/C,IACN,UAAA6D,EAAkB4F,eAAlB,eAA2BjH,MACzB,gBAAGpE,EAAH,EAAGA,SAAH,OAAkBgB,EAAOxG,KAAOwF,OAC7B,IAHC4B,cAIFE,KACJ2D,IACA/B,GAAgB+B,EAAmBzE,EAAOxG,KAEtC9F,EAAQ+Q,EAAkBtC,QAAQiB,MACtC,SAAC+F,GAAD,OAAOA,EAAEnK,WAAagB,EAAOxG,MAE/B,OACE,kBAAC8Q,GAAD,eACEnR,IAAK6G,EAAOxG,IACR,CACFwG,SACA2D,QACAC,gBAAiBhC,EAAKjC,QAAQ9K,OAC9BoO,sBACArC,gBACAiD,YAAa7D,EAAOxG,KAAOwF,EAC3BiC,aACEjB,EAAOxG,MAAP,OAAcyJ,QAAd,IAAcA,OAAd,EAAcA,EAAqBC,cAAc1J,IACnDmH,uBAAsB,OAAC8D,QAAD,IAACA,OAAD,EAACA,EAAmB3B,QAC1CgB,cAAa,OAACW,QAAD,IAACA,OAAD,EAACA,EAAmBX,YACjChD,YACAiD,cACAhD,6BACArN,QACAwD,SAAUuN,EAAkBvN,SAC5BwJ,gBAAiBwJ,EAAiBnO,SAASiE,EAAOxG,IAClDwK,WAAYpC,EAAKkB,cAM3B,yBAAKpS,UAAU,kEACXsZ,GACA,6BACE,kBAACxF,GAAD,CACEC,kBAAmBA,EACnBC,WZtFgB,KYsFJ9C,EAAKjC,QAAQ9K,SAE3B,kBAAC6Q,GACK,CACF9D,OACA6C,uBAKPuF,GACC,yBAAKtZ,UAAU,gCACb,kBAACuY,GACK,CACFxE,oBACAV,cACA/E,WACAW,QAASiC,EAAKjC,QACdjP,UAAW,QAGf,kBAAC8T,GAAD,CACEC,kBAAmBA,EACnBC,WZ7GgB,KY6GJ9C,EAAKjC,QAAQ9K,UAI9BoV,GACC,kBAAC,GACK,CACFxF,oBACA7Q,cACmB,OAAjB6Q,QAAiB,IAAjBA,GAAA,UAAAA,EAAmBvN,SAAStD,oBAA5B,eAA0CoD,KAAI,SAACnG,GAAD,YAAU,CACtD0H,MAAO1H,EACP8Y,SAAQ,UAAClF,EAAkBvN,SAAS0S,0BAA5B,aAAC,EAA+C7N,SACtDlL,UAEG,GACT6C,MAAK,OAAE+Q,QAAF,IAAEA,GAAF,UAAEA,EAAmBtC,QAAQiB,MAChC,SAAC+F,GAAD,OAAOA,EAAEnK,WAAaA,YADnB,aAAE,EAEJtL,MAAMK,iBEtIZ,SAASwW,GAAT,GAA+C,IAAxBrL,EAAuB,EAAvBA,aAAuB,EACjC5J,mBAA0B,IADO,mBACpD5B,EADoD,KAC7C8W,EAD6C,KAG3D,OACE,yBAAK9Z,UAAU,iBACb,yBAAKA,UAAU,0BACb,2BACE6H,MAAO7E,EACP8E,SAAU,SAACC,GACT,IAAMF,EAAQvE,WAAWyE,EAAE9B,OAAO4B,OACjBiS,EAAH,IAAVjS,EAAsB,EACZA,GAASE,EAAE9B,OAAO4B,QAElCgH,QAAS,SAAC9G,GACQ,KAAZA,EAAE+G,QACJN,EAAaxL,GACb8W,EAAS,MAGbrT,KAAK,SACLzG,UAAU,uCACVgI,YAAY,cACZC,aAAW,cACX8G,mBAAiB,eACjB5G,WAAS,IAEX,4BACE1B,KAAK,SACLzG,UAAU,kIACVgJ,SAA2B,kBAAVhG,IAAwBA,GAAmB,IAAVA,EAClDiG,QAAS,WACPuF,EAAaxL,GACb8W,EAAS,MANb,UAWA,uBAAG9Z,UAAU,qBACX,kBAAC,GACK,CACFgD,MAAO,CACLK,UACmB,kBAAVL,EAAqBA,EAAQM,WAAWN,GAAS,KAE5DC,aAAclE,EAAcoE,eC9C3B,mBAA8B,IAA3BqL,EAA0B,EAA1BA,aAA0B,EAChB5J,qBADgB,mBACnC5B,EADmC,KAC5B8W,EAD4B,KAGpCC,EAAS,SAACC,GACd,GAAIA,EAAa,CACf,IAAMnS,EAAQwE,SAAS2N,EAAYC,WAAW,IAAK,KAC/CpS,IACF2G,EAAa3G,GACbiS,OAASlU,MAKf,OACE,yBAAK5F,UAAU,0BACb,2BACE6H,MAAO7E,EACP8E,SAAU,SAACC,GACT+R,EAAS/R,EAAE9B,OAAO4B,QAEpBgH,QAAS,SAAC9G,GACQ,KAAZA,EAAE+G,OACJiL,EAAO/W,IAGXyD,KAAK,OACLzG,UAAU,uCACVgI,YAAY,cACZC,aAAW,cACX8G,mBAAiB,eACjB5G,WAAS,IAEX,4BACE1B,KAAK,SACLzG,UAAU,kIACVgJ,UAAWhG,EACXiG,QAAS,WACP8Q,EAAO/W,KALX,YC9BS,eAA8B,IAA3BwL,EAA0B,EAA1BA,aAA0B,EAChB5J,qBADgB,mBACnC5B,EADmC,KAC5B8W,EAD4B,KAG1C,OACE,oCACE,kBAAChB,GAAD,CACEnC,cAAe,SAACkC,GACdiB,EAASjB,MAGb,4BACE7Y,UAAU,kIACViJ,QAAS,WACHjG,IACFwL,EAAaxL,GACb8W,OAASlU,KAGboD,WAAU,OAAChG,QAAD,IAACA,OAAD,EAACA,EAAOgB,YAAahB,EAAMiB,WARvC,YCLS,SAASiW,GAAT,GAIJ,IAHTnG,EAGQ,EAHRA,kBACAvF,EAEQ,EAFRA,aACAtL,EACQ,EADRA,aACQ,EACkB0B,qBADlB,mBACD5B,EADC,KACM8W,EADN,KAER,GAA6B,KAAb,OAAZ5W,QAAY,IAAZA,OAAA,EAAAA,EAAciB,QAChB,MAAM,IAAIC,MAAM,qDAGlB,OACE,oCACE,kBAAC,GAAD,CACE2P,kBAAmBA,EACnBiF,YAAac,EACb9W,MAAOA,IAET,4BACEhD,UAAU,kIACViJ,QAAS,YACHjG,GAAmB,IAAVA,KACXwL,EAAaxL,GACb8W,OAASlU,KAGboD,UAAWhG,GAAmB,IAAVA,GARtB,WCJS,SAASmX,GAAT,GAQI,IAPjB9I,EAOgB,EAPhBA,qBACA/B,EAMgB,EANhBA,OACAwD,EAKgB,EALhBA,iBACA5B,EAIgB,EAJhBA,KACAkJ,EAGgB,EAHhBA,iBACAC,EAEgB,EAFhBA,oBACAC,EACgB,EADhBA,2CAEA,IAAKhL,GAAUA,EAAOa,OACpB,OAAO,KAGT,IAAMoK,EAA0B,SAACvX,IAC1BA,GAAmB,IAAVA,GAAiC,kBAAVA,IACnC6P,GACEC,EACA5B,EACA,CACE7N,UAAWL,GAEbsM,EAAOxG,IAETuR,GAAoB,KAIlBG,EAAuB,SAACC,GAI5B5H,GAASC,EAAkB5B,EAHL,CACpBnN,IAAK0W,GAEiCnL,EAAOxG,IAC/CuR,GAAoB,IA2BtB,OACE,kBAAC,GAAD,CACE/Q,QAAS,WACP+Q,GAAoB,IAEtB1L,OAAQ,SACRrK,MACG8V,GAAmD,IAA/BlJ,EAAKC,eAAehN,UACxCmW,EAEH1L,QAAQ,aAER,oCACE,uBAAG5O,UAAU,aAAaqR,EAAqB7K,SAASA,UACxD,uBAAGxG,UAAU,gBAAb,eAtCW,WAAO,IAAD,EACrB,OAAQqR,EAAqB7K,SAASC,MACpC,KAAK1H,EAAcoE,UACjB,OAAO,kBAAC0W,GAAD,CAAarL,aAAc+L,IACpC,KAAKxb,EAAc4E,KACjB,OAAO,kBAAC+W,GAAD,CAAWlM,aAAc+L,IAClC,KAAKxb,EAAc+E,IACjB,OAAO,kBAAC6W,GAAD,CAAUnM,aAAcgM,IACjC,KAAKzb,EAAcmF,gBACjB,IAAMhB,EAAY,UAAGmO,EAAqB7K,SAAStD,oBAAjC,aAAG,EAA4CoD,KAC/D,SAACnG,GAAD,MAAU,CAAE0H,MAAO1H,EAAK8Y,QAAQ,MAElC,OACE,kBAACiB,GAAD,CACEnG,kBAAmB1C,EACnBnO,aAAcA,EACdsL,aAAc+L,IAGpB,QACE,MAAM,IAAInW,MAAM,yBAmBfwW,KC5FM,SAASC,GAAT,GAIQ,IAHrBC,EAGoB,EAHpBA,KACAnE,EAEoB,EAFpBA,cACAnJ,EACoB,EADpBA,WAEA,OACE,4BACExN,UAAU,sKACViJ,QAAS0N,EACT3N,SAAUwE,GAETsN,GCJQ,SAASC,GAAT,GAQJ,IAAD,EAPRxI,EAOQ,EAPRA,oBACArB,EAMQ,EANRA,KACA8J,EAKQ,EALRA,YACA1I,EAIQ,EAJRA,SACAhE,EAGQ,EAHRA,SACA2M,EAEQ,EAFRA,gBACAC,EACQ,EADRA,mBAEMC,EAAezJ,GAAsBa,EAAqBjE,GAC1D8M,EAAc,UAAGlK,EAAKjC,QAAQyD,MAAK,qBAAG5J,KAAgBwF,YAAxC,aAAG,EAAgDqE,MAF/D,EAGoB/N,mBAASuW,GAH7B,mBAGDnK,EAHC,KAGOqK,EAHP,KAKF7M,EAAe,WACnBwM,EAAYhK,EAAQsB,EAAUpB,EAAM5C,GACpC4M,GAAmB,IAGrB,OACE,kBAAC,GAAD,CACExM,MAAM,QACNC,OAAQ,SACRrK,KAAM2W,EACN3R,QAAS,WACP4R,GAAmB,IAErBtM,QAAQ,YACR5O,UAAU,UAEV,oCACE,iDACA,yBAAKA,UAAU,0BACb,2BACE6H,MAAOmJ,EACPlJ,SAAU,SAACC,GACTsT,EAAU9P,KAAKC,MAAMlI,WAAWyE,EAAE9B,OAAO4B,UAE3CgH,QAAS,SAAC9G,GACQ,KAAZA,EAAE+G,OACJN,KAGJ/H,KAAK,SACL6U,QAAQ,QACR1I,IAAKuI,EACLrJ,IAAKsJ,EACLpb,UAAU,uCACVgI,YAAY,kBACZC,aAAW,kBACX8G,mBAAiB,eACjB5G,WAAS,IAEX,4BACEa,WACIoS,IACDpK,EAASmK,GAAgBnK,EAASoK,GAErCpb,UAAU,kIACViJ,QAASuF,GANX,WAWF,yBAAKxO,UAAU,QACZob,GACC,oCACG,CAAC,EAAG,GAAI,GAAI,IACVjU,QAAO,SAAC6J,GAAD,OAAYA,EAASoK,KAC5B9U,KAAI,SAAC0K,GAAD,OACH,0BACEvI,IAAKuI,EACLlG,MAAO,CAAEI,OAAQ,WACjBjC,QAAS,kBAAMoS,EAAUrK,IACzBhR,UAAU,uEAETgR,MAGP,0BACElG,MAAO,CAAEI,OAAQ,WACjBjC,QAAS,kBAAMoS,EAAUD,IACzBpb,UAAU,uEAHZ,cCnEC,SAASub,GAAT,GAOS,IANtBrK,EAMqB,EANrBA,KACA6C,EAKqB,EALrBA,kBACAxB,EAIqB,EAJrBA,oBACAjE,EAGqB,EAHrBA,SACAgE,EAEqB,EAFrBA,SACAkJ,EACqB,EADrBA,gBACqB,EACyB5W,oBAAS,GADlC,mBACdqW,EADc,KACGC,EADH,KAErB,IAAKnH,IAAsBxB,EACzB,OAAO,KAGT,IAAMjD,EAAS4B,EAAKjC,QAAQyD,MAAK,SAACmG,GAAD,OAAOA,EAAE/P,KAAOwF,KAE3C6M,EAAezJ,GAAsBa,EAAqBjE,GAEhE,OACE,yBAAKtO,UAAU,sCACb,kBAAC6a,GAAD,CACEC,KAAMK,EAAe,EAAf,mBAA+BA,GAAiB,QACtDxE,cAAe,YlBNH,SAClBrE,EACApB,EACA5C,GACI,IAAD,IACG+C,EAAuBJ,GAAwBC,GAC/CqB,EAAsBnB,GAAuBC,GACnD,GACGA,IACkB,OAAnBkB,QAAmB,IAAnBA,OAAA,EAAAA,EAAqBC,cAAc1J,MAAOwF,EAF5C,CAOA,IAAM6M,EAAezJ,GAAsBa,EAAqBjE,GAC1DmE,EAAa,oBACjBvB,EAAKjC,QAAQyD,MAAK,qBAAG5J,KAAgBwF,YADpB,aACjB,EAAgDqE,aAD/B,QACwC,EAE3DL,EAAS,CACP9M,UAAW,CACTiJ,MAAO,CACL/B,OAAQwE,EAAKpI,GACbwF,SAAUA,EACV0C,OAAQzF,KAAKqH,IAAIuI,EAAc1I,QkBhB7BgJ,CAAKnJ,EAAUpB,EAAM5C,IAEvBd,YAAagO,IAEf,kBAACX,GAAD,CACEC,KAAK,QACLnE,cAAe,WACbuE,GAAmB,IAErB1N,YACS,OAAN8B,QAAM,IAANA,OAAA,EAAAA,EAAQqD,QAASwI,IAAY,OAAI7L,QAAJ,IAAIA,OAAJ,EAAIA,EAAQqD,SAAW6I,IAGzD,kBAACX,GAAD,CACEC,KAAK,OACLnE,cAAe,YlByCH,SAClBrE,EACApB,EACA5C,GAEA,IAAM+C,EAAuBJ,GAAwBC,GAC/CqB,EAAsBnB,GAAuBC,GAEhDA,IACkB,OAAnBkB,QAAmB,IAAnBA,OAAA,EAAAA,EAAqBC,cAAc1J,MAAOwF,GAK5CgE,EAAS,CACP9M,UAAW,CACTiJ,MAAO,CACL/B,OAAQwE,EAAKpI,GACbwF,SAAUA,EACV0C,QAAS,MkB3DP0K,CAAKpJ,EAAUpB,EAAM5C,IAEvBd,YAAagO,IAEf,kBAACT,GACK,CACF7J,OACAoB,WACAhE,WACAiE,sBACAyI,YAAa3I,GACb4I,kBACAC,wBC/CV,ICeIS,GDyHWC,GAxIA,SAAC,GAQF,IAAD,MAPX1K,EAOW,EAPXA,KACA6C,EAMW,EANXA,kBACAzE,EAKW,EALXA,OACAgD,EAIW,EAJXA,SACAgI,EAGW,EAHXA,2CACAD,EAEW,EAFXA,oBACA9H,EACW,EADXA,oBAEMiJ,GACe,OAAnBjJ,QAAmB,IAAnBA,OAAA,EAAAA,EAAqBC,cAAc1J,MAAOwG,EAAOxG,IACjDyI,GAA+BwC,EAAmB7C,EAAKjC,SAEnD4M,EAAkB9H,EAAkBtC,QAAQiB,MAChD,SAAC1P,GAAD,OAAWA,EAAMsL,WAAagB,EAAOxG,MAGnCgT,EAAc,oBAAG5K,EAAKjC,QAAQyD,MAAK,SAACmG,GAAD,OAAOA,EAAE/P,KAAOwG,EAAOxG,aAA5C,aAAG,EAA8C6J,aAAjD,QAA0D,EACtEe,EACHnB,GACC5B,GAAuC4B,EAAqBjD,EAAOxG,KACrE,EACEiL,EAAkB3B,QAAU9C,EAAOxG,IAAMyJ,IAC3CuJ,GAAkBpI,GAGpB,IAAMzQ,EAAe8Q,EAAkBvN,SAASC,KAlBrC,IAqBQ,OAAjBsN,QAAiB,IAAjBA,GAAA,UAAAA,EAAmB4F,eAAnB,eAA4BjH,MAC1B,gBAAGpE,EAAH,EAAGA,SAAH,OAAkBgB,EAAOxG,KAAOwF,OAC7B,IAHC4B,qBApBG,MAoBa,EApBb,EAyBLG,EACJ0D,GACA7C,EAAKjC,SACLsC,GAA+BwC,EAAmB7C,EAAKjC,SAEzD,OACE,4BAAQjP,UAAU,kHAChB,yBAAKA,UAAU,kFACb,yBAAKA,UAAU,qFACb,0BACEA,UAAS,+GACP+T,EAAkB3B,QAAUlC,EAAgB,EACxC,eACA,cAHG,YAKP6D,EAAkBvN,SAASC,OAAS1H,EAAc+E,IAC9C,SACA,KAGN,kBAAC,GACK,CACFwL,SACAW,oBAAqB8D,EAAkB3B,OACvC7B,cACGwD,EAAkB3B,QACnB9C,EAAOxG,MAAP,OAAcyJ,QAAd,IAAcA,OAAd,EAAcA,EAAqBC,cAAc1J,IACnDsH,aACE2D,IACA/B,GAAgB+B,EAAmBzE,EAAOxG,KAE5CoH,gBACAG,6BACAC,4BAA6BuL,KAIlC5Y,IAAiBlE,EAAc+E,KAC9B,oCACE,uBAAG9D,UAAU,iBAAb,eACA,0BAAMA,UAAU,qCACb6b,GACC,kBAAC,GAAD,CACE7Y,MAAO6Y,EAAgB7Y,MACvBC,aAAcA,EACdC,aAAc6Q,EAAkBvN,SAAStD,kBAOrD,yBACElD,UAAS,4BACP+T,EAAkB3B,OAAS,WAAa,gBAG1C,yBAAKpS,UAAU,mDACb,uBAAGA,UAAU,WAAb,mBACA,yBAAKA,UAAU,mCACb,kBAAC,KAAD,CAASA,UAAU,SACnB,8BAAO8b,GACY,IAAlB5L,GACC,0BACElQ,UAAS,eACPkQ,EAAgB,EAAI,iBAAmB,iBAF3C,IAKIA,EAAgB,EAAI,IAAM,GAC3BA,EANH,QAWJoK,GACApJ,EAAKC,eAAehN,OAAS,GAC3B,4BACEnE,UAAU,2LACViJ,QAAS,WACPoR,GAAoB,KAHxB,uBASHC,GAA8ChL,EAAOxG,IACpD,kBAACyS,GACK,CACFrK,OACA6C,oBACAxB,sBACAD,WACAhE,SAAUgB,EAAOxG,GACjB0S,wB,qBE3ID,eAA+D,IAA5D9O,EAA2D,EAA3DA,OAAQ4B,EAAmD,EAAnDA,SAAUyN,EAAyC,EAAzCA,eAAgBC,EAAyB,EAAzBA,YAAyB,EACpDzW,YACrB5F,EACA,CACEkG,QAASC,EACTJ,YAAa,WACPgH,K9BZ6B,SAACA,GACxCC,aAAasP,WAAb,UAA2B1P,GAA3B,YAA4CG,I8BYpCwP,CAA0BxP,GAC1BsP,OAAYpW,OAPbuW,EADoE,oBAc3E,IAAKzP,IAAW4B,EACd,OAAO,KAOT,OACE,kBAAC8N,GAAD,CACE7O,UANkB,WACpB4O,EAAa,CAAE3W,UAAW,CAAE8I,WAAU5B,aAMpCW,YACE,oDAEG0O,GACC,mFAINzO,aAAa,aACbF,YAAa,kBAAC,KAAD,MACbK,aAAa,oCCnDJ,OAA0B,8CCA1B,OAA0B,uCHyCnC4O,I,OAAU,SAACC,GACftR,OAAOmE,UAAUkN,SAAWrR,OAAOmE,UAAUkN,QAAQC,KA2NxCC,OAvNf,WAA0B,IAAD,EACS3X,wBAA6BgB,GADtC,mBAChB0I,EADgB,KACN0N,EADM,OAECpX,wBAA2BgB,GAF5B,mBAEhBsL,EAFgB,KAEVsL,EAFU,KAGjBnL,EAAuBJ,GAAwBC,GAC/CqB,EAAsBnB,GAAuBC,GAJ5B,EAKyBzM,oBAAS,GALlC,mBAKhBwV,EALgB,KAKEC,EALF,OASnBzV,oBAAS,GATU,mBAOrB6X,EAPqB,KAQrBC,EARqB,KAUfhQ,EAAWb,cAAXa,OAVe,EAWK9H,qBAXL,mBAWhB+X,EAXgB,KAWRC,EAXQ,OAaIhY,mBAAS,IAAIiY,MAAMC,KAAvCC,EAbgB,sBAcHnY,mBAAS,IAAIiY,MAAMG,KAAhCC,EAdgB,oBAgBjBzS,EAAe,SAAC5K,GACpBkG,EAAYlG,GACZgd,EAAUhd,IAlBW,EAqBHkM,YAA6BzM,EAAgB,CAC/D0M,YAAa,oBACblG,QAAS2E,EACT9E,YAAa,YAAe,IAAZwL,EAAW,EAAXA,KACdsL,EAAQtL,MAJLgM,EArBgB,sBA6ByB3X,YAE7ChG,EAAe,CAChBsG,QAAS2E,IAhCY,mBA6BhB6D,EA7BgB,KA6BM8O,EA7BN,KA6BApY,KA7BA,EAmCHQ,YAEjB/F,EAAY,CAAEqG,QAAS2E,IAFnBuD,EAnCgB,sBAuCJxI,YAEhB9F,EAAW,CAAEoG,QAAS2E,IAFlB8H,EAvCgB,sBA2CJ/M,YAEhB7F,EAAW,CAAEmG,QAAS2E,IAFlBqI,EA3CgB,oBA+CRuK,EAAsBC,YAElC/d,EAAyB,CAC1BkG,UAAW,CACTkH,SACA4Q,KACEtQ,GAA0BN,IAAWD,GAAwBC,IAEjE6Q,mBAAoB,YAA2B,IAAD,IAAvBC,EAAuB,EAAvBA,iBACrBC,cAAc9B,IACd,IAAMzK,EAAI,UAAGsM,EAAiBzY,YAApB,aAAG,EAAuB2Y,YACpClB,EAAQtL,GACR,IAAMyM,EAAM1M,GAAwBC,GAC9B0M,EAAMxM,GAAuBuM,GAC7B1O,EAAO,UAAGuO,EAAiBzY,YAApB,aAAG,EAAuB2Y,YAAYzO,QAC7C4O,EACJF,GAAO1O,GAAWsC,GAA+BoM,EAAK1O,GACpD4O,GACFnB,GAAoC,KAGpC,OAACxL,QAAD,IAACA,OAAD,EAACA,EAAMkB,UACJ,OAAHwL,QAAG,IAAHA,OAAA,EAAAA,EAAKpL,cAAc1J,MAAOwF,GAC1BuP,IAEAd,EAAiBe,OACjBzB,GAAQ,KACRV,GAAgBoC,aAAY,WAC1Bd,EAAUa,OACVzB,GAAQ,OACP,UA9BDvc,MA+DR,GA5BAkM,qBAAU,WACJoR,GACF5S,EAAa4S,KAEd,CAACA,IAEJpR,qBAAU,WACRkR,EAAU,CACR1X,UAAW,CAAEkH,cAEd,CAACwQ,EAAWxQ,IAEfV,qBAAU,WACR,GAAIU,EAAQ,CAAC,IAAD,EACJsR,E7BvI0B,SAACtR,GAAD,OACpCC,aAAaM,QAAb,UAAwBV,GAAxB,YAAyCG,I6BsIduR,CAAuBvR,GACxCwR,EAAW,OAAGf,QAAH,IAAGA,GAAH,UAAGA,EAAegB,iBAAlB,aAAG,EAA0BrV,GAE1CkV,GACFhC,EAAYgC,GAGVE,K7BlJ0B,SAACxR,EAAgB4B,GACnD3B,aAAaI,QAAb,UAAwBR,GAAxB,YAAyCG,GAAU4B,G6BkJ7C8P,CAAqB1R,EAAQwR,GAC7BlC,EAAYkC,OAGf,CAACxR,EAAQyQ,KAEPjM,EACH,OAAO,0CAGT,GAAIyL,EACF,OAAO,kFAGT,IAAMrN,EAAS4B,EAAKjC,QAAQyD,MAAK,SAACmG,GAAD,OAAOA,EAAE/P,KAAOwF,KAI3CgM,MAHiC,OAAGjJ,QAAH,IAAGA,OAAH,EAAGA,EAAsBI,QAAQiB,MACtE,SAAC1P,GAAD,OAAWA,EAAMsL,WAAaA,MAG1ByN,KAAmB7K,EAAKC,eAAehN,OACvCkP,GAAc0I,MAAoBzM,GAAUA,EAAOa,QACnDkO,GrBtJgC,SAACnN,GAAD,oBACtCA,QADsC,IACtCA,OADsC,EACtCA,EAAMC,gBAAmB,OAAJD,QAAI,IAAJA,GAAA,UAAAA,EAAMC,sBAAN,eAAsBhN,SAAU+M,EAAKkB,OAAS,EAAI,IqBqJzCkM,CAAyBpN,GASjD6C,KAPFsK,KACDnN,EAAKkB,SACFkI,KAA+CjH,IAChDA,MACGhC,IACDoL,IACAlL,GAA+BF,EAAsBH,EAAKjC,UAE7DoP,GACAhN,EAEJ,OACE,yBACErR,UAAS,8CACPqT,KAAgB0I,GACZ,eACA,gCAGN,uBAAG5V,KAAK,IAAInG,UAAU,8BAAtB,mBAGA,yBAAKA,UAAU,6BACX+b,IACA,kBAAC,GAAD,CACE9M,QAASiC,EAAKjC,QACdC,SAAUlE,OAAOjB,SAAS5D,KAC1B4H,UAAWA,EACXrB,OAAQwE,EAAKpI,GACbuF,aAAcA,EACdC,SAAUA,IAGbyN,IAAkBhI,IACjB,kBAAC,GACK,CACF7C,OACA6C,qBACAxB,sBACAjE,WACA+E,iBAILA,KAAW,OAAIU,SAAJ,IAAIA,QAAJ,EAAIA,GAAmB3B,UAAWlB,EAAKkB,QACjD,4BACEpS,UAAU,uIACViJ,QAAS,WACPyT,GAAoC,KAHxC,uBAUHrL,GAAwB/C,GACvB,kBAAC6L,GACK,CACFjJ,OACA4B,iBAAkBD,EAClBxB,uBACA/B,SACA8K,mBACAC,sBACAC,iDAIJpJ,EAAKkB,QAAU9C,IAAW+D,IAAeU,IACzC,kBAAC,GACK,CACF7C,OACA6C,qBACAzB,WACAhD,SACAvB,YACAuM,8CACAD,sBACA9H,wBAKN,kBAACgM,GAAoB,CAAE7R,SAAQ4B,WAAUyN,kBAAgBC,kB,OIzP/D,SAASwC,KACP,OAAO,8CAqBMC,OAlBf,WACE,OACE,yBAAKze,UAAU,4CACb,yBACE8I,GAAG,MACH9I,UAAU,kGAEV,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO0e,KAAK,IAAIC,UAAW/S,GAAOgT,OAAK,IACvC,kBAAC,IAAD,CAAOF,KAAK,WAAWC,UAAWE,GAAMD,OAAK,IAC7C,kBAAC,IAAD,CAAOF,KAAK,sBAAsBC,UAAW/S,GAAOgT,OAAK,IACzD,kBAAC,IAAD,CAAOD,UAAWH,SCVRpX,QACW,cAA7B4D,OAAOjB,SAAS+U,UAEe,UAA7B9T,OAAOjB,SAAS+U,UAEhB9T,OAAOjB,SAAS+U,SAASC,MACvB,2DCjBC,IAAMC,GACXC,oCCeIC,I,OAAW,IAAIC,IAAS,CAC5BC,IAAI,OAAD,OAASJ,GAAT,aAICK,GAAS,IAAIC,IAAc,CAC/BF,IAAI,KAAD,OAAOJ,GAAP,UACHO,QAAS,CACPC,WAAW,KAITC,GAAOC,aAEX,YAAgB,IAAbC,EAAY,EAAZA,MAAY,EACeC,YAC1BD,GADME,EADK,EACLA,KAAMC,EADD,EACCA,UAGd,MAAgB,wBAATD,GAAgD,iBAAdC,IAE3CT,GACAH,IAGIa,GAAS,IAAIC,IAAa,CAC9BP,QACAQ,MAAO,IAAIC,MAGbC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAgBN,OAAQA,IACtB,kBAAC,IAAD,KACE,kBAAC,GAAD,SAINO,SAASC,eAAe,SFqFpB,kBAAmBpR,WACrBA,UAAUqR,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAA/gB,GACLD,QAAQC,MAAMA,EAAMC,c","file":"static/js/main.9c97ae2f.chunk.js","sourcesContent":["import { gql } from \"apollo-boost\";\nimport { Game, Player } from \"../interfaces\";\n\nexport const CREATE_GAME_QUERY = gql`\n  mutation createGame($setNames: [String!]!) {\n    createGame(setNames: $setNames) {\n      id\n    }\n  }\n`;\n\nexport const UPLOAD_QUESTION_SET = gql`\n  mutation uploadQuestions(\n    $questions: [QuestionInput!]!\n    $setName: String!\n    $isPrivate: Boolean!\n    $language: String!\n  ) {\n    uploadQuestions(\n      questions: $questions\n      setName: $setName\n      isPrivate: $isPrivate\n      language: $language\n    )\n  }\n`;\n\nexport const GET_SETS_QUERY = gql`\n  query sets($setName: String) {\n    sets(setName: $setName) {\n      setName\n      numberOfQuestions\n      language\n    }\n  }\n`;\n\nexport const GET_GAME_BY_ID = gql`\n  query findGame($gameId: ID!) {\n    game(gameId: $gameId) {\n      id\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n`;\n\nexport const SUBSCRIBE_TO_GAME_BY_ID = gql`\n  subscription GameUpdated($gameId: ID!, $hash: String!) {\n    gameUpdated(gameId: $gameId, hash: $hash) {\n      id\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n`;\n\nexport const CREATE_PLAYER = gql`\n  mutation addPlayer($input: PlayerInput!) {\n    addPlayer(input: $input) {\n      id\n      money\n      name\n    }\n  }\n`;\n\nexport const START_GAME = gql`\n  mutation startGame($gameId: ID!) {\n    startGame(gameId: $gameId)\n  }\n`;\n\nexport const PLACE_BET = gql`\n  mutation placeBet($input: BetInput!) {\n    placeBet(input: $input)\n  }\n`;\n\nexport const ADD_GUESS = gql`\n  mutation addGuess($input: GuessInput!) {\n    addGuess(input: $input)\n  }\n`;\n\nexport interface RemovePlayerVariables {\n  gameId: Game[\"id\"];\n  playerId: Player[\"id\"];\n}\nexport const REMOVE_PLAYER = gql`\n  mutation removePlayer($gameId: ID!, $playerId: ID!) {\n    removePlayer(gameId: $gameId, playerId: $playerId)\n  }\n`;\n","export enum QuestionTypes {\n  GEO = \"GEO\",\n  NUMERICAL = \"NUMERICAL\",\n  MULTIPLE_CHOICE = \"MULTIPLE_CHOICE\",\n  DATE = \"DATE\",\n}\n\nexport enum BettingStates {\n  CHECKED = \"CHECKED\",\n  CALLED = \"CALLED\",\n  RAISED = \"RAISED\",\n}\n\nexport interface GeoCoordinate {\n  latitude: number;\n  longitude: number;\n}\n\nexport interface Player {\n  id: string;\n  money: number;\n  name: string;\n  isDead: boolean;\n  bettingState?: BettingStates;\n}\n\nexport interface Answer {\n  numerical?: number;\n  geo?: GeoCoordinate;\n}\n\nexport interface Question {\n  id: string;\n  type: QuestionTypes;\n  question: string;\n  answer: Answer;\n  alternatives?: [string, string, string, string];\n  hiddenAlternatives?: string[];\n  hints: string[];\n  explanation?: string;\n}\n\nexport interface Guess {\n  playerId: Player[\"id\"];\n  guess: Answer;\n  difference?: number;\n}\n\ninterface Bet {\n  playerId: Player[\"id\"];\n  amount: number;\n}\n\nexport interface BettingRound {\n  bets: Bet[];\n  currentPlayer: Player;\n}\n\ninterface QuestionRoundResult {\n  playerId: Player[\"id\"];\n  changeInMoney: number;\n}\n\nexport interface QuestionRound {\n  question: Question;\n  guesses: Guess[];\n  bettingRounds: BettingRound[];\n  foldedPlayerIds: Player[\"id\"][];\n  results?: QuestionRoundResult[];\n  isOver: boolean;\n  isShowdown: boolean;\n}\n\nexport interface Game {\n  id: string;\n  players: Player[];\n  questionRounds: QuestionRound[];\n  dealerId: Player[\"id\"];\n  questions: Omit<Question, \"question\" | \"answer\" | \"hints\">[];\n  isOver: boolean;\n}\n\nexport interface BetInput {\n  gameId: Game[\"id\"];\n  playerId: Player[\"id\"];\n  amount: number;\n}\n\nexport interface GuessInput {\n  gameId: Game[\"id\"];\n  playerId: Player[\"id\"];\n  guess: Answer;\n}\n\nexport interface Set {\n  setName: string;\n  numberOfQuestions: number;\n  language: string;\n}\n","export default (err: Error) => {\n  console.error(err.message);\n};\n","export default __webpack_public_path__ + \"static/media/certainty_poker_bg.24a8fc3a.png\";","import React from \"react\";\n\nimport Image from \"../../../assets/certainty_poker_bg.png\";\n\nexport default () => {\n  return (\n    <div className=\"image-container\">\n      <img src={Image} alt=\"background\" />\n    </div>\n  );\n};\n","const countryListAlpha2 = {\n  GB: \"English\",\n  FR: \"French\",\n  ES: \"Spainish\",\n  CN: \"Chinese\",\n  DE: \"German\",\n  ZA: \"Africaans\",\n  AL: \"Albanian\",\n  DZ: \"Algerian\",\n  SA: \"Arab\",\n  AM: \"Armenian\",\n  BD: \"Bangladeshi\",\n  BG: \"Bulgarian\",\n  KH: \"Cambodian\",\n  HR: \"Croatian\",\n  CZ: \"Czech\",\n  DK: \"Danish\",\n  NL: \"Dutch\",\n  EE: \"Estonian\",\n  FI: \"Finnish\",\n  GR: \"Greek\",\n  IL: \"Hebrew\",\n  HU: \"Hungarian\",\n  IN: \"Indian\",\n  IT: \"Italian\",\n  JP: \"Japanese\",\n  KR: \"Korean\",\n  LV: \"Latvian\",\n  LT: \"Lithuanian\",\n  MY: \"Malaysian\",\n  MN: \"Mongolian\",\n  NO: \"Norwegian\",\n  PL: \"Polish\",\n  BR: \"Portuguese\",\n  RO: \"Romanian\",\n  RU: \"Russian\",\n  RS: \"Serbian\",\n  SK: \"Slovakian\",\n  SI: \"Slovenian\",\n  SE: \"Swedish\",\n  TH: \"Thai\",\n  TR: \"Turkish\",\n  VN: \"Vietnamese\",\n};\n\nexport default countryListAlpha2;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Answer, Question, QuestionTypes } from \"../../../interfaces\";\n\ninterface Props {\n  guess: Answer;\n  questionType: QuestionTypes;\n  alternatives?: Question[\"alternatives\"];\n}\n\nexport default function Guess({ guess, questionType, alternatives }: Props) {\n  if (!guess) return null;\n  switch (questionType) {\n    case QuestionTypes.NUMERICAL:\n      const number =\n        typeof guess.numerical === \"number\"\n          ? guess.numerical\n          : parseFloat(guess.numerical || \"\");\n      if (isNaN(number)) {\n        return null;\n      }\n      return <span>{new Intl.NumberFormat().format(number)}</span>;\n    case QuestionTypes.DATE:\n      if (!guess.numerical) {\n        return null;\n      }\n      return (\n        <span>\n          {moment(guess.numerical.toString(), \"YYYYMMDD\").format(\n            \"MMM DD, YYYY\"\n          )}\n        </span>\n      );\n    case QuestionTypes.GEO:\n      return <span>{`[${guess.geo?.latitude}, ${guess.geo?.longitude}]`}</span>;\n    case QuestionTypes.MULTIPLE_CHOICE:\n      if (alternatives?.length !== 4) {\n        throw new Error(\"missing alternatives for multiple choice question\");\n      }\n      return <span>{alternatives[guess.numerical ?? -1]}</span>;\n    default:\n      throw new Error(\"Invalid question type\");\n  }\n}\n","import React, { useState } from \"react\";\nimport Modal from \"@material-ui/core/Modal\";\nimport { Backdrop } from \"@material-ui/core\";\nimport { CSVReader } from \"react-papaparse\";\nimport { useMutation } from \"react-apollo\";\nimport countryCodeToFlagEmoji from \"country-code-to-flag-emoji\";\nimport { UPLOAD_QUESTION_SET } from \"../../../api/queries\";\nimport { QueryLazyOptions } from \"@apollo/react-hooks\";\nimport { useHistory } from \"react-router-dom\";\nimport { Question, QuestionTypes } from \"../../../interfaces\";\nimport errorLogger from \"../../../api/errorHandler\";\nimport countryCodes from \"../../../assets/countryCodes\";\nimport processCsvData from \"./processCsvData\";\nimport Guess from \"../../Game/Guess\";\n\nexport interface CSVDataRow {\n  question: string;\n  type: QuestionTypes;\n  answer?: number | string;\n  latitude?: number;\n  longitude?: number;\n  hint1?: string;\n  hint2?: string;\n  explanation?: string;\n  multiple_choice_alternative1?: string;\n  multiple_choice_alternative2?: string;\n  multiple_choice_alternative3?: string;\n}\n\ninterface Props {\n  open: boolean;\n  handleClose: () => void;\n  fetchSets: (\n    options?: QueryLazyOptions<Record<string, any>> | undefined\n  ) => void;\n  setSelectedSets: React.Dispatch<React.SetStateAction<string[]>>;\n}\n\nfunction UploadModal({ open, handleClose, fetchSets, setSelectedSets }: Props) {\n  const history = useHistory();\n  const [showCSVInput, setShowCSVInput] = useState(true);\n  const [data, setData] = useState<Omit<Question, \"id\">[]>();\n  const [setName, setSetName] = useState(\"\");\n  const [isPrivate, setIsPrivate] = useState<0 | 1>(0);\n  const [language, setLanguage] = useState<string>();\n\n  const [uploadQuestions, { error }] = useMutation(UPLOAD_QUESTION_SET, {\n    variables: {\n      setName,\n      questions: data,\n      isPrivate: !!isPrivate,\n      language,\n    },\n    onCompleted: () => {\n      if (isPrivate) {\n        history.push(`/questions/${setName}`);\n      } else {\n        fetchSets();\n      }\n      setSelectedSets([setName]);\n      handleClose();\n      setSetName(\"\");\n      setData(undefined);\n      setShowCSVInput(true);\n    },\n    onError: errorLogger,\n  });\n\n  const handleOnDrop = (rows: { data: CSVDataRow }[]) => {\n    setShowCSVInput(false);\n    setData(processCsvData(rows));\n  };\n\n  const handleOnError = (err: any, file: any, inputElem: any, reason: any) => {\n    console.error(err);\n  };\n\n  const content = showCSVInput ? (\n    <>\n      <p className=\"mb-3\">\n        An example of the file format can be found{\" \"}\n        <a\n          className=\"text-blue-700 hover:text-blue-900\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://docs.google.com/spreadsheets/d/1_cUrvCc3R2qTL_ME-A9wc9HmyH-zoAQkRnBs80dOPb8/edit?usp=sharing\"\n        >\n          here\n        </a>\n        .\n      </p>\n      <CSVReader\n        onDrop={handleOnDrop}\n        onError={handleOnError}\n        config={{ header: true }}\n        addRemoveButton\n        removeButtonColor=\"#659cef\"\n      >\n        <span>Drop CSV file here or click to upload.</span>\n      </CSVReader>\n    </>\n  ) : (\n    <>\n      <div className=\"flex\">\n        <input\n          value={setName}\n          onChange={(e) => {\n            setSetName(e.target.value);\n          }}\n          type=\"text\"\n          className=\"rounded-md bg-white border border-gray-400 px-4 py-2 mr-4\"\n          placeholder=\"Name for the question set\"\n          aria-label=\"Name for the question set\"\n          required\n          autoFocus\n        />\n        <select\n          className=\"rounded-md bg-white border border-gray-400 px-4 py-2\"\n          required\n          value={language}\n          onChange={(e) => {\n            setLanguage(e.target.value);\n          }}\n        >\n          <option selected>Language...</option>\n          {Object.keys(countryCodes).map((code) => (\n            <option key={code} value={code}>\n              {countryCodeToFlagEmoji(code)}{\" \"}\n              {countryCodes[code as keyof typeof countryCodes]}\n            </option>\n          ))}\n        </select>\n      </div>\n      <h3 className=\"text-2xl mb-3 mt-5\">Review your upload:</h3>\n      <hr />\n      {(data || []).map((q) => (\n        <div key={q.question} className=\"small\">\n          <p className=\"my-3\">\n            Question: <b>{q.question}</b>\n          </p>\n\n          {q.type !== QuestionTypes.MULTIPLE_CHOICE && (\n            <p className=\"my-3\">\n              Answer:{\" \"}\n              <b>\n                <Guess\n                  guess={q.answer}\n                  questionType={q.type}\n                  alternatives={q.alternatives}\n                />\n              </b>\n            </p>\n          )}\n          {!!q.hints?.length && (\n            <p className=\"my-3\">\n              Hints:{\" \"}\n              {q.hints.map((h: string) => (\n                <>\n                  <br />\n                  <span key={h}>\n                    <b>{h}</b>\n                  </span>\n                </>\n              ))}\n            </p>\n          )}\n          {!!q.alternatives?.length && (\n            <p className=\"my-3\">\n              Alternatives:{\" \"}\n              {q.alternatives.map((alt, i) => (\n                <>\n                  <br />\n                  <span key={alt}>\n                    <b className={i === 0 ? \"text-green-500\" : \"\"}>{alt}</b>\n                  </span>\n                </>\n              ))}\n            </p>\n          )}\n          {q.explanation && (\n            <p className=\"my-3\">\n              Explanation: <b>{q.explanation}</b>\n            </p>\n          )}\n          <hr className=\"my-3\" />\n        </div>\n      ))}\n      <div className=\"flex\">\n        <input\n          type=\"checkbox\"\n          className=\"mt-2\"\n          id=\"isPrivateCheckbox\"\n          value={isPrivate}\n          onChange={() => {\n            setIsPrivate(isPrivate ? 0 : 1);\n          }}\n        />\n        <label className=\"ml-2\" htmlFor=\"isPrivateCheckbox\">\n          Questions are private\n          <br />\n          <span>\n            If checked, this set of questions will not appear in the list on the\n            start screen.\n          </span>\n        </label>\n      </div>\n      <div className=\"flex mt-3\">\n        <button\n          className=\"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n          disabled={!setName || !language}\n          onClick={() => {\n            uploadQuestions();\n          }}\n        >\n          Submit\n        </button>\n        <button\n          className=\"border-2 boder-gray-800 rounded-lg font-bold hover:text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-gray-800 ml-3\"\n          onClick={() => {\n            setShowCSVInput(true);\n          }}\n        >\n          Upload new file\n        </button>\n      </div>\n    </>\n  );\n\n  return (\n    <Modal\n      disablePortal\n      disableEnforceFocus\n      disableAutoFocus\n      open={open}\n      className=\"flex justify-center items-center p-5\"\n      onClose={handleClose}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n    >\n      <div className=\"flex py-6 px-6 md:px-8 my-2 md:my-6 mx-2 md:mx-6 lg:mx-10 max-h-full bg-white rounded-md focus:outline-none\">\n        <div className=\"overflow-y-auto flex-shrink-0 max-w-full flex flex-col\">\n          <h3 className=\"text-2xl mb-2\">\n            Upload a CSV file with custom questions\n          </h3>\n          {content}\n          {error && <div className=\"alert alert-danger\">{error.message}</div>}\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default UploadModal;\n","import { Answer, Question, QuestionTypes } from \"../../../interfaces\";\nimport { CSVDataRow } from \".\";\n\nexport default (rows: { data: CSVDataRow }[]): Omit<Question, \"id\">[] => {\n  return rows.map((row) => {\n    const {\n      question,\n      type,\n      answer: csvAnswer,\n      latitude,\n      longitude,\n      hint1,\n      hint2,\n      explanation,\n      multiple_choice_alternative1,\n      multiple_choice_alternative2,\n      multiple_choice_alternative3,\n    } = row.data;\n    const hints = [hint1, hint2].filter(Boolean) as string[];\n    const answer: Answer = {};\n    let alternatives: Question[\"alternatives\"];\n    switch (type) {\n      case QuestionTypes.NUMERICAL:\n        answer.numerical = csvAnswer as number;\n        break;\n      case QuestionTypes.DATE:\n        answer.numerical = csvAnswer as number;\n        break;\n      case QuestionTypes.GEO:\n        answer.geo = {\n          latitude: latitude as number,\n          longitude: longitude as number,\n        };\n        break;\n      case QuestionTypes.MULTIPLE_CHOICE:\n        answer.numerical = 0;\n        alternatives = [\n          csvAnswer as string,\n          multiple_choice_alternative1 as string,\n          multiple_choice_alternative2 as string,\n          multiple_choice_alternative3 as string,\n        ];\n        break;\n      default:\n        throw new Error(\"invalid question type\");\n    }\n    return {\n      question,\n      type,\n      answer,\n      hints,\n      explanation,\n      alternatives,\n    };\n  });\n};\n","import React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { QueryLazyOptions, useMutation } from \"@apollo/react-hooks\";\nimport { useLocation } from \"react-router-dom\";\nimport countryCodeToFlagEmoji from \"country-code-to-flag-emoji\";\nimport { Game, Set } from \"../../../interfaces\";\nimport { CREATE_GAME_QUERY } from \"../../../api/queries\";\nimport errorHandler from \"../../../api/errorHandler\";\nimport UploadModal from \"../UploadModal\";\n\nimport \"./styles.css\";\n\ninterface Props {\n  sets?: Set[];\n  setName?: string;\n  languages: string[];\n  fetchSets: (\n    options?: QueryLazyOptions<Record<string, any>> | undefined\n  ) => void;\n}\n\nexport default function ActionableHalf({\n  sets = [],\n  setName,\n  languages,\n  fetchSets,\n}: Props) {\n  const history = useHistory();\n  const location = useLocation();\n  const [selectedSets, setSelectedSets] = useState<string[]>(\n    setName ? [setName] : []\n  );\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\n  const [shownLanguage, setShownLanguage] = useState(\"GB\");\n  const [createGame, { loading }] = useMutation<{\n    createGame: Game;\n  }>(CREATE_GAME_QUERY, {\n    variables: {\n      setNames: selectedSets,\n    },\n    onCompleted: ({ createGame }) => {\n      history.push(`/${createGame.id}`);\n    },\n    onError: errorHandler,\n  });\n\n  const handleCreateGame = async () => {\n    if (selectedSets.length) {\n      createGame();\n    }\n  };\n\n  return (\n    <div className=\"actionable-container px-4 py-2\">\n      <a href=\"/\" className=\"mr-auto text-3xl font-bold\">\n        Certainty Poker\n      </a>\n      {setName ? (\n        <p>\n          You can only start a game with these questions from this link{\" \"}\n          <Link\n            to={location.pathname}\n            style={{ color: \"#dfae06\" }}\n          >{`${window.location.host}${location.pathname}`}</Link>\n          .\n          <br />\n          Make sure to <b>save this link</b> if you want to start a game with\n          the uploaded questions later.\n          <br />\n          The questions will be available for 90 days.\n        </p>\n      ) : (\n        <>\n          <h1 className=\"py-5\">\n            You think you know things?\n            <br />\n            Let's make it interesting then!\n          </h1>\n          <p>\n            Certainty Poker is a social (distance) trivia game that doesn't just\n            test if you know things but also how certain you are about what you\n            think you know.\n          </p>\n          <p>\n            Start by selecting a set of trivia questions, create the game and\n            share the link to join with your friends!\n            <br />\n            You don't like our questions? Upload your own{\" \"}\n            <button\n              className=\"text-blue-700 hover:text-blue-900 p-0\"\n              onClick={() => {\n                setIsUploadModalOpen(true);\n              }}\n            >\n              here ⤴\n            </button>\n            .\n          </p>\n        </>\n      )}\n      <div className=\"flex my-3\">\n        {languages.map((language) => (\n          <span\n            key={language}\n            className={`text-4xl mx-1 ${\n              language === shownLanguage ? \"\" : \"text-black-50\"\n            }`}\n            onClick={() => {\n              setShownLanguage(language);\n            }}\n            style={{\n              cursor: language === shownLanguage ? \"default\" : \"pointer\",\n            }}\n          >\n            {countryCodeToFlagEmoji(language)}\n          </span>\n        ))}\n      </div>\n      <div className=\"set-container my-4\">\n        {sets\n          .filter((s) => s.language === shownLanguage)\n          .map((set) => (\n            <span\n              key={set.setName}\n              className={`flex justify-center items-center rounded-md text-center px-4 py-3 border border-gray-800 hover:bg-gray-800 hover:text-white cursor-pointer ${\n                selectedSets?.includes(set.setName)\n                  ? \"bg-gray-800 text-white\"\n                  : \"\"\n              } ${setName ? \"mr-auto\" : \"\"}`}\n              style={{\n                gridColumn: `span ${Math.round(\n                  Math.pow(set.setName.length, 0.35)\n                )}`,\n              }}\n              onClick={(e) => {\n                if (setName) {\n                  return;\n                }\n                if (e.metaKey) {\n                  if (selectedSets?.includes(set.setName)) {\n                    setSelectedSets(\n                      selectedSets.filter((setName) => set.setName !== setName)\n                    );\n                  } else {\n                    setSelectedSets([set.setName, ...selectedSets]);\n                  }\n                } else {\n                  setSelectedSets([set.setName]);\n                }\n              }}\n            >\n              {set.setName} ({set.numberOfQuestions})\n            </span>\n          ))}\n      </div>\n      <button\n        className=\"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mx-auto\"\n        onClick={handleCreateGame}\n        disabled={!selectedSets.length}\n      >\n        {loading ? \"Loading...\" : \"Create Game\"}\n      </button>\n      <p className=\"mt-4\">\n        Don't know the rules? Find them{\" \"}\n        <a\n          className=\"text-blue-700 hover:text-blue-900 p-0\"\n          href=\"https://docs.google.com/document/d/13pwz8yzrPdY1DcQqXvhejJAxXdWdPrvxR6GUxg5PJPs/edit?usp=sharing\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          here\n        </a>\n        .\n      </p>\n      <p className=\"text-smaller\">\n        TL;DR:\n        <br />\n        Answer trivia different types of questions. Then bet some poker chips on\n        how sure you are your answer is right. If you are unsure, you'd better\n        fold or put on your best poker face. You're a 100%? Then risk it and go\n        All In. If you are closest to the correct answer, you win whatever is in\n        the pot. Unless you've folded, of course.\n      </p>\n\n      <UploadModal\n        open={isUploadModalOpen}\n        handleClose={() => {\n          setIsUploadModalOpen(false);\n        }}\n        fetchSets={fetchSets}\n        setSelectedSets={setSelectedSets}\n      />\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useLazyQuery } from \"@apollo/react-hooks\";\nimport { Set } from \"../../interfaces\";\nimport { GET_SETS_QUERY } from \"../../api/queries\";\nimport errorHandler from \"../../api/errorHandler\";\nimport PictureHalf from \"./PictureHalf\";\nimport ActionableHalf from \"./ActionableHalf\";\n\nimport \"./styles.css\";\n\nfunction Lobby() {\n  const { setName } = useParams<{ setName: string }>();\n  const [fetchSets, { data: sets }] = useLazyQuery<{\n    sets: Set[];\n  }>(GET_SETS_QUERY, {\n    fetchPolicy: \"no-cache\",\n    onError: errorHandler,\n    variables: { setName },\n  });\n\n  useEffect(() => {\n    fetchSets();\n  }, [fetchSets, setName]);\n\n  const languages =\n    sets?.sets\n      .reduce<string[]>((uniqueLanguages, s) => {\n        if (!uniqueLanguages.includes(s.language)) {\n          uniqueLanguages.push(s.language);\n        }\n        return uniqueLanguages;\n      }, [])\n      .sort((a, b) => {\n        if (a === \"GB\") {\n          return -1;\n        }\n        return parseInt(a) - parseInt(b);\n      }) || [];\n\n  return (\n    <div className=\"grid-container\">\n      <ActionableHalf\n        {...{ sets: sets?.sets, languages, setName, fetchSets }}\n      />\n      <PictureHalf />\n    </div>\n  );\n}\n\nexport default Lobby;\n","const PLAYER_ID_KEY = \"player_id\";\nconst FINGERPRINT_KEY = \"fingerprint\";\n\nexport const setPlayerIdToStorage = (gameId: string, playerId: string) => {\n  localStorage.setItem(`${PLAYER_ID_KEY}_${gameId}`, playerId);\n};\n\nexport const getPlayerIdFromStorage = (gameId: string) =>\n  localStorage.getItem(`${PLAYER_ID_KEY}_${gameId}`);\n\nexport const deletePlayerIdFromStorage = (gameId: string) =>\n  localStorage.removeItem(`${PLAYER_ID_KEY}_${gameId}`);\n\nexport const setFingerprintToStorage = (gameId: string) => {\n  // clear stoage when joining a new game\n  localStorage.clear();\n\n  const value = Math.random().toString(36).substring(2);\n  localStorage.setItem(`${FINGERPRINT_KEY}_${gameId}`, value);\n  return value;\n};\n\nexport const getFingerprintFromStorage = (gameId: string) =>\n  localStorage.getItem(`${FINGERPRINT_KEY}_${gameId}`);\n","import React from \"react\";\n\ninterface Props {\n  playerName?: string;\n}\n\nfunction PlayerSpot({ playerName }: Props) {\n  return (\n    <div className=\"rounded-xl border-2 px-3 h-16 w-36 flex items-center justify-center shadow\">\n      <span className=\"overflow-hidden text-overflow-ellipsis\">\n        {playerName}\n      </span>\n    </div>\n  );\n}\n\nexport default PlayerSpot;\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\ninterface Props {\n  buttonLabel: string | React.ReactNode;\n  dialogTitle: string | React.ReactNode;\n  confirmLabel: string;\n  onConfirm: () => void;\n  isDisabled?: boolean;\n  btnClassName?: string;\n}\n\nexport default ({\n  buttonLabel,\n  dialogTitle,\n  confirmLabel,\n  onConfirm,\n  isDisabled,\n  btnClassName,\n}: Props) => {\n  const [open, setOpen] = React.useState(false);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleConfirm = () => {\n    onConfirm();\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <button\n        className={\n          btnClassName ||\n          \"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n        }\n        onClick={handleClickOpen}\n        disabled={isDisabled}\n      >\n        {buttonLabel}\n      </button>\n      <Dialog open={open} onClose={handleClose}>\n        <div className=\"px-4 py-2\">\n          <DialogTitle>{dialogTitle}</DialogTitle>\n          <DialogActions>\n            <button className=\"btn btn-outline-dark\" onClick={handleClose}>\n              Cancel\n            </button>\n            <button\n              className=\"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n              onClick={handleConfirm}\n            >\n              {confirmLabel}\n            </button>\n          </DialogActions>\n        </div>\n      </Dialog>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Game } from \"../../../../interfaces\";\nimport ConformDialogButton from \"../../../shared/ConfirmDialogButton\";\n\nexport type StartGame = ({\n  variables: { gameId },\n}: {\n  variables: { gameId: Game[\"id\"] };\n}) => void;\n\ninterface Props {\n  gameId: Game[\"id\"];\n  startGame: StartGame;\n  isDisabled: boolean;\n}\n\nexport default ({ startGame, gameId, isDisabled }: Props) => {\n  const onConfirm = () => {\n    startGame({ variables: { gameId } });\n  };\n  return (\n    <ConformDialogButton\n      onConfirm={onConfirm}\n      dialogTitle=\"Are you sure you want to start the game? Once it's started no more players can join.\"\n      confirmLabel=\"Start Game\"\n      buttonLabel=\"Start Game\"\n      isDisabled={isDisabled}\n    />\n  );\n};\n","import React, { ReactNode } from \"react\";\nimport Drawer, { DrawerProps } from \"@material-ui/core/Drawer\";\n\nimport \"./styles.css\";\n\ninterface Props extends DrawerProps {\n  children: ReactNode;\n  onClose?: () => void;\n}\n\nexport default function DrawerComp({\n  children,\n  onClose,\n  ...drawerProps\n}: Props) {\n  return (\n    <Drawer\n      {...{\n        ...drawerProps,\n      }}\n    >\n      <div className=\"flex items-center flex-col bg-gray-200 py-4 min-h-52\">\n        {onClose && (\n          <span\n            id=\"drawer-close\"\n            className=\"ml-auto mr-3 -mb-4 -mt-2\"\n            onClick={onClose}\n          >\n            ╳\n          </span>\n        )}\n\n        <div className=\"container px-5 pb-5 flex flex-col md:max-w-screen-md\">\n          {children}\n        </div>\n      </div>\n    </Drawer>\n  );\n}\n","import React, { useState } from \"react\";\nimport Drawer from \"../../Drawer\";\nimport { Game, Player } from \"../../../interfaces\";\n\nexport type CreatePlayer = ({\n  variables: {\n    input: { gameId, playerName },\n  },\n}: {\n  variables: { input: { gameId: Game[\"id\"]; playerName: Player[\"name\"] } };\n}) => void;\n\ninterface Props {\n  createPlayer: CreatePlayer;\n  gameId: Game[\"id\"];\n  playerId?: Player[\"id\"];\n}\n\nexport default function NameInputDrawer({\n  createPlayer,\n  gameId,\n  playerId,\n}: Props) {\n  const [name, setName] = useState(\"\");\n\n  const handleSubmit = () => {\n    if (!playerId) {\n      createPlayer({ variables: { input: { gameId, playerName: name } } });\n    }\n  };\n\n  return (\n    <Drawer\n      title=\"Your name\"\n      anchor={\"bottom\"}\n      open={!playerId}\n      variant=\"temporary\"\n    >\n      <>\n        <p className=\"font-bold\">Enter your name</p>\n        <p className=\"mt-4 text-sm\">Username</p>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <input\n            value={name}\n            onChange={(e) => {\n              setName(e.target.value);\n            }}\n            onKeyUp={(e) => {\n              if (e.which === 13) {\n                handleSubmit();\n              }\n            }}\n            type=\"text\"\n            className=\"bg-white border border-gray-400 px-4\"\n            placeholder=\"Your name\"\n            aria-label=\"Your answer\"\n            aria-describedby=\"basic-addon2\"\n            autoFocus\n          />\n          <button\n            type=\"submit\"\n            disabled={!name.length}\n            className=\"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n            onClick={handleSubmit}\n          >\n            Submit\n          </button>\n        </div>\n      </>\n    </Drawer>\n  );\n}\n","import React from \"react\";\nimport { FiCopy } from \"react-icons/fi\";\nimport PlayerSpot from \"./PlayerSpot\";\nimport { Game, Player } from \"../../../interfaces\";\nimport StartGameButton, { StartGame } from \"./StartGameButton\";\nimport NameInputDrawer, { CreatePlayer } from \"../NameInputDrawer\";\n\ninterface Props {\n  players: Player[];\n  gameLink: string;\n  startGame: StartGame;\n  gameId: Game[\"id\"];\n  createPlayer: CreatePlayer;\n  playerId?: Player[\"id\"];\n}\n\nexport const maxNumberOfPlayers = 12;\n\nfunction PreGameLobby({\n  players,\n  gameLink,\n  startGame,\n  gameId,\n  createPlayer,\n  playerId,\n}: Props) {\n  return (\n    <>\n      <div className=\"flex flex-col items-center font-semibold mt-4 px-5 mx-auto md:max-w-screen-md\">\n        <h5>Share this link with friends who want to join the game</h5>\n        <div className=\"flex items-center justify-between w-full break-all px-4 md:px-10 py-4 mt-4 bg-gray-200 rounded-md\">\n          <span className=\"w-3/4\">{gameLink}</span>\n          <button\n            className=\"text-blue-500 hover:text-blue-600 p-2 ripple focus:outline-none text-2xl\"\n            onClick={async () => {\n              await navigator.clipboard.writeText(window.location.href);\n            }}\n          >\n            <FiCopy />\n          </button>\n        </div>\n        <p className=\"mt-20 self-start\">Players</p>\n        <p className=\"text-xs font-normal self-start w-full pb-2 border-b-2 border-grey-200\">\n          {maxNumberOfPlayers - players.length} Open spot\n          {maxNumberOfPlayers - players.length === 1 ? \"\" : \"s\"}\n        </p>\n        <hr />\n        <div className=\"mt-8 grid gap-8 w-full sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4\">\n          {players.map((player) => (\n            <PlayerSpot key={player.id} playerName={player?.name} />\n          ))}\n        </div>\n        {playerId && (\n          <div className=\"mt-16 self-start\">\n            <StartGameButton\n              startGame={startGame}\n              gameId={gameId}\n              isDisabled={players.length <= 1}\n            />\n          </div>\n        )}\n      </div>\n      <NameInputDrawer {...{ gameId, createPlayer, playerId }} />\n    </>\n  );\n}\n\nexport default PreGameLobby;\n","import React from \"react\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { AiOutlineQuestion } from \"react-icons/ai\";\nimport { GiLaurelsTrophy, GiPartyPopper } from \"react-icons/gi\";\nimport {\n  FaBell,\n  FaRegLightbulb,\n  FaSadCry,\n  FaSkullCrossbones,\n} from \"react-icons/fa\";\nimport { FiArrowUp, FiMinus } from \"react-icons/fi\";\nimport { CgMore } from \"react-icons/cg\";\nimport { GrClose, GrMoney } from \"react-icons/gr\";\nimport { BettingStates, Player } from \"../../../../interfaces\";\n\nconst StatusWithTooltip = ({\n  tooltipTitle,\n  children,\n}: {\n  tooltipTitle: string;\n  children: React.ReactNode;\n}) => (\n  <Tooltip title={tooltipTitle}>\n    <span>{children}</span>\n  </Tooltip>\n);\n\nconst actionIcons = {\n  [BettingStates.RAISED]: (\n    <StatusWithTooltip tooltipTitle=\"Raised\">\n      <FiArrowUp />\n    </StatusWithTooltip>\n  ),\n  [BettingStates.CALLED]: (\n    <StatusWithTooltip tooltipTitle=\"Called\">\n      <FiMinus />\n    </StatusWithTooltip>\n  ),\n  [BettingStates.CHECKED]: (\n    <StatusWithTooltip tooltipTitle=\"Checked\">\n      <FiMinus />\n    </StatusWithTooltip>\n  ),\n};\n\ninterface Props {\n  player: Player;\n  isQuestionRoundOver: boolean;\n  isWinningPlayer?: boolean;\n  changeInMoney?: number;\n  hasFolded: boolean;\n  isDead?: boolean;\n  isTurnPlayer: boolean;\n  playerHasPlacedTheirGuess?: boolean;\n  allPlayersPlacedTheirGuess?: boolean;\n  playerIsAllIn?: boolean;\n}\n\nfunction Status({\n  player,\n  isWinningPlayer,\n  isQuestionRoundOver,\n  changeInMoney,\n  isDead,\n  hasFolded,\n  allPlayersPlacedTheirGuess,\n  playerHasPlacedTheirGuess,\n  isTurnPlayer,\n  playerIsAllIn,\n}: Props) {\n  if (isDead) {\n    return (\n      <StatusWithTooltip tooltipTitle=\"Out\">\n        <FaSkullCrossbones />\n      </StatusWithTooltip>\n    );\n  }\n  if (hasFolded) {\n    return (\n      <StatusWithTooltip tooltipTitle=\"Folded\">\n        <GrClose />\n      </StatusWithTooltip>\n    );\n  }\n  if (playerIsAllIn) {\n    return (\n      <StatusWithTooltip tooltipTitle=\"All in\">\n        <GrMoney />\n      </StatusWithTooltip>\n    );\n  }\n  if (isWinningPlayer && isQuestionRoundOver) {\n    return <GiLaurelsTrophy />;\n  }\n  if (isQuestionRoundOver && changeInMoney && changeInMoney > 0) {\n    return <GiPartyPopper />;\n  }\n  if (isQuestionRoundOver && changeInMoney && changeInMoney < 0) {\n    return <FaSadCry />;\n  }\n  if (!allPlayersPlacedTheirGuess) {\n    if (playerHasPlacedTheirGuess) {\n      return (\n        <StatusWithTooltip tooltipTitle=\"Already submitted guess\">\n          <FaRegLightbulb />\n        </StatusWithTooltip>\n      );\n    } else {\n      return (\n        <StatusWithTooltip tooltipTitle=\"Not yet submitted guess\">\n          <AiOutlineQuestion />\n        </StatusWithTooltip>\n      );\n    }\n  }\n  if (isTurnPlayer) {\n    return (\n      <StatusWithTooltip tooltipTitle=\"Player's turn\">\n        <FaBell className=\"text-red-600\" />\n      </StatusWithTooltip>\n    );\n  }\n  const playerAction = player.bettingState;\n  if (playerAction && actionIcons[playerAction]) {\n    return actionIcons[playerAction];\n  }\n  return (\n    <StatusWithTooltip tooltipTitle=\"Waiting for turn\">\n      <CgMore />\n    </StatusWithTooltip>\n  );\n}\n\nexport default Status;\n","import {\n  QuestionRound,\n  Player,\n  Game,\n  BettingRound,\n  QuestionTypes,\n} from \"../../../interfaces\";\n\nexport const calculateBettingRoundSpendingForPlayer = (\n  bettingRound: BettingRound,\n  playerId: Player[\"id\"]\n) => {\n  return bettingRound.bets.reduce(\n    (sum, bet) => sum + (bet.playerId === playerId ? bet.amount : 0),\n    0\n  );\n};\n\nexport const getCurrentQuestionRound = (game?: Game) =>\n  game?.questionRounds[game?.questionRounds?.length - 1];\n\nexport const getPreviousQuestionRound = (game?: Game) =>\n  game?.questionRounds[game?.questionRounds?.length - (game.isOver ? 1 : 2)];\n\nexport const getCurrentBettingRound = (currentQuestionRound?: QuestionRound) =>\n  currentQuestionRound?.bettingRounds[\n    currentQuestionRound?.bettingRounds?.length - 1\n  ];\n\nexport const haveAllPlayersPlacedTheirGuess = (\n  currentQuestionRound: QuestionRound,\n  players: Player[]\n) => {\n  const remainingPlayers = players.filter((player) => !player.isDead);\n  return currentQuestionRound.guesses.length >= remainingPlayers.length;\n};\n\nexport const calculateAmountToCall = (\n  bettingRound: BettingRound,\n  playerId: Player[\"id\"]\n): number => {\n  if (!bettingRound.bets.length) return 0;\n  const amountSpentAlreadyInBettingRound = calculateBettingRoundSpendingForPlayer(\n    bettingRound,\n    playerId\n  );\n\n  const amountSpentInBettingRoundPerPlayer = bettingRound.bets.reduce(\n    (acc, bet) => {\n      acc[bet.playerId] = (acc[bet.playerId] || 0) + bet.amount;\n      return acc;\n    },\n    {} as { [key: string]: number }\n  );\n\n  return (\n    Math.max(...Object.values(amountSpentInBettingRoundPerPlayer)) -\n    amountSpentAlreadyInBettingRound\n  );\n};\n\nexport const hasPlayerFolded = (\n  currentQuestionRound: QuestionRound,\n  playerId: Player[\"id\"]\n) => currentQuestionRound?.foldedPlayerIds.includes(playerId);\n\nexport const getRevealAnswer = (questionRound: QuestionRound) => {\n  if (questionRound.isOver) {\n    return true;\n  }\n  if (questionRound.question.type === QuestionTypes.MULTIPLE_CHOICE) {\n    return questionRound.bettingRounds.length >= 4;\n  }\n  return (\n    questionRound.question.hints.length + 1 < questionRound.bettingRounds.length\n  );\n};\n","import { Player, Game, BetInput } from \"../../../interfaces\";\nimport { getCurrentQuestionRound, getCurrentBettingRound } from \".\";\nimport { calculateAmountToCall } from \"./helpers\";\n\nexport type PlaceBet = ({\n  variables: { input },\n}: {\n  variables: { input: BetInput };\n}) => void;\n\nexport const check = (\n  placeBet: PlaceBet,\n  game: Game,\n  playerId: Player[\"id\"]\n) => {\n  const currentQuestionRound = getCurrentQuestionRound(game);\n  const currentBettingRound = getCurrentBettingRound(currentQuestionRound);\n  if (\n    !currentQuestionRound ||\n    currentBettingRound?.currentPlayer.id !== playerId\n  ) {\n    return;\n  }\n\n  const amountToCall = calculateAmountToCall(currentBettingRound, playerId);\n  if (amountToCall > 0) {\n    // cannot check\n    return;\n  }\n\n  placeBet({\n    variables: {\n      input: {\n        gameId: game.id,\n        playerId: playerId,\n        amount: 0,\n      },\n    },\n  });\n};\n\nexport const call = (\n  placeBet: PlaceBet,\n  game: Game,\n  playerId: Player[\"id\"]\n) => {\n  const currentQuestionRound = getCurrentQuestionRound(game);\n  const currentBettingRound = getCurrentBettingRound(currentQuestionRound);\n  if (\n    !currentQuestionRound ||\n    currentBettingRound?.currentPlayer.id !== playerId\n  ) {\n    return;\n  }\n\n  const amountToCall = calculateAmountToCall(currentBettingRound, playerId);\n  const moneyOfPlayer =\n    game.players.find(({ id }) => id === playerId)?.money ?? 0;\n\n  placeBet({\n    variables: {\n      input: {\n        gameId: game.id,\n        playerId: playerId,\n        amount: Math.min(amountToCall, moneyOfPlayer),\n      },\n    },\n  });\n};\n\nexport const raise = (\n  amount: number,\n  placeBet: PlaceBet,\n  game: Game,\n  playerId: Player[\"id\"]\n) => {\n  const currentQuestionRound = getCurrentQuestionRound(game);\n  const currentBettingRound = getCurrentBettingRound(currentQuestionRound);\n  if (\n    !currentQuestionRound ||\n    currentBettingRound?.currentPlayer.id !== playerId\n  ) {\n    return;\n  }\n\n  const amountToCall = calculateAmountToCall(currentBettingRound, playerId);\n  if (amountToCall > amount) {\n    throw new Error(\"Amount to call is greater than raised amount.\");\n  }\n\n  const moneyOfPlayer =\n    game.players.find(({ id }) => id === playerId)?.money ?? 0;\n\n  placeBet({\n    variables: {\n      input: {\n        gameId: game.id,\n        playerId: playerId,\n        amount: Math.min(amount, moneyOfPlayer),\n      },\n    },\n  });\n};\n\nexport const fold = (\n  placeBet: PlaceBet,\n  game: Game,\n  playerId: Player[\"id\"]\n) => {\n  const currentQuestionRound = getCurrentQuestionRound(game);\n  const currentBettingRound = getCurrentBettingRound(currentQuestionRound);\n  if (\n    !currentQuestionRound ||\n    currentBettingRound?.currentPlayer.id !== playerId\n  ) {\n    return;\n  }\n\n  placeBet({\n    variables: {\n      input: {\n        gameId: game.id,\n        playerId: playerId,\n        amount: -1,\n      },\n    },\n  });\n};\n","import { Player, Game, GuessInput, Answer } from \"../../../interfaces\";\n\nexport type AddGuess = ({\n  variables: { input },\n}: {\n  variables: { input: GuessInput };\n}) => void;\n\nexport const addGuess = (\n  addGuessMutation: AddGuess,\n  game: Game,\n  guess: Answer,\n  playerId: Player[\"id\"]\n) => {\n  addGuessMutation({\n    variables: {\n      input: {\n        gameId: game.id,\n        playerId: playerId,\n        guess,\n      },\n    },\n  });\n};\n","import React from \"react\";\nimport { FaRegLightbulb } from \"react-icons/fa\";\nimport { GrMoney } from \"react-icons/gr\";\nimport Status from \"./Status\";\nimport {\n  BettingRound,\n  Guess,\n  Player,\n  Question,\n  QuestionTypes,\n} from \"../../../../interfaces\";\nimport { calculateBettingRoundSpendingForPlayer } from \"../../helpers\";\nimport FormattedGuess from \"../../Guess\";\n\nimport \"./styles.css\";\n\nconst playerSeatingOrder = [1, 9, 5, 2, 11, 4, 8, 10, 6, 3, 12, 7];\n\ninterface Props {\n  player: Player;\n  numberOfPlayers: number;\n  currentBettingRound?: BettingRound;\n  changeInMoney?: number;\n  index: number;\n  isTurnPlayer: boolean;\n  isGameOver: boolean;\n  isAppPlayer: boolean;\n  isWinningPlayer?: boolean;\n  isQuestionRoundOver: boolean;\n  isShowdown: boolean;\n  hasFolded: boolean;\n  isSpectator: boolean;\n  allPlayersPlacedTheirGuess?: boolean;\n  guess?: Guess;\n  question?: Question;\n}\n\nconst PlayerComp = ({\n  player,\n  index,\n  numberOfPlayers,\n  isTurnPlayer,\n  isAppPlayer,\n  isWinningPlayer,\n  isQuestionRoundOver,\n  isShowdown,\n  currentBettingRound,\n  changeInMoney,\n  hasFolded,\n  isSpectator,\n  allPlayersPlacedTheirGuess,\n  guess,\n  question,\n  isGameOver,\n}: Props) => {\n  const isTurnPlayerClass =\n    isTurnPlayer && !isQuestionRoundOver ? \"isTurnPlayer\" : \"\";\n  const isAppPlayerClass = isAppPlayer ? \"bg-blue-200\" : \"bg-gray-200\";\n  const isDeadClass = player.isDead ? \"is-dead\" : \"\";\n\n  const bettingRoundSpending = currentBettingRound\n    ? calculateBettingRoundSpendingForPlayer(currentBettingRound, player.id)\n    : 0;\n  const revealGuess =\n    question?.type !== QuestionTypes.GEO &&\n    (isSpectator || (!!isQuestionRoundOver && isShowdown && !hasFolded));\n\n  const positionIndex = playerSeatingOrder.filter((i) => i <= numberOfPlayers)[\n    index\n  ];\n\n  let playerMoney = player.money;\n  if (isQuestionRoundOver && !isGameOver) {\n    playerMoney += bettingRoundSpending;\n  }\n\n  return (\n    <div\n      className={`player player-${positionIndex} shadow-md ${isTurnPlayerClass} ${isAppPlayerClass} ${isDeadClass} md:absolute`}\n    >\n      <span\n        className={`status text-gray-900 shadow-lg ${\n          isQuestionRoundOver && changeInMoney && changeInMoney > 0\n            ? \"bg-green-500\"\n            : \"bg-gray-400\"\n        }`}\n      >\n        <Status\n          {...{\n            player,\n            isWinningPlayer,\n            isTurnPlayer,\n            changeInMoney,\n            isQuestionRoundOver,\n            isDead: player.isDead,\n            hasFolded,\n            allPlayersPlacedTheirGuess,\n            playerHasPlacedTheirGuess: !!guess,\n            playerIsAllIn: !player.isDead && player.money === 0,\n          }}\n        />\n      </span>\n      <div className=\"info\">\n        <span className=\"name\">{player.name}</span>\n        <div className=\"flex items-center\">\n          <GrMoney className=\"mr-1\" />\n          <span>{playerMoney}</span>\n          {isQuestionRoundOver && changeInMoney && (\n            <span\n              className={`ml-1 ${\n                changeInMoney > 0 ? \"text-green-500\" : \"text-red-500\"\n              }`}\n            >\n              ({changeInMoney > 0 ? \"+\" : \"\"}\n              {changeInMoney})\n            </span>\n          )}\n        </div>\n        <div className=\"inner-info grid absolute text-sm left-48 md:left-auto sm:-right-3 md:right-0 md:text-lg md:grid-flow-auto text-gray-800 md:w-full\">\n          {!isQuestionRoundOver && !!bettingRoundSpending && (\n            <div className=\"flex items-center\">\n              <span className=\"mx-1\">\n                <GrMoney />\n              </span>\n              <span>{bettingRoundSpending}</span>\n            </div>\n          )}\n          {revealGuess && question?.type && guess?.guess && (\n            <div className=\"flex items-center\">\n              <span className=\"mx-1\">\n                <FaRegLightbulb />\n              </span>\n              <FormattedGuess\n                {...{\n                  guess: guess?.guess,\n                  questionType: question.type,\n                  alternatives: question.alternatives,\n                }}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PlayerComp;\n","import React from \"react\";\nimport { GrMoney } from \"react-icons/gr\";\nimport { QuestionRound } from \"../../../../interfaces\";\n\ninterface Props {\n  usedQuestionRound: QuestionRound;\n  isGameFull: boolean;\n}\n\nexport default function Pot({ usedQuestionRound, isGameFull }: Props) {\n  const totalPot = usedQuestionRound?.bettingRounds.reduce((sum, br) => {\n    br.bets.forEach((bet) => {\n      sum += bet.amount;\n    });\n    return sum;\n  }, 0);\n\n  const positioning = isGameFull\n    ? \"md:-right-5 md:-top-10\"\n    : \"md:left-24 md:bottom-20\";\n\n  return (\n    <div\n      className={`text-2xl md:text-3xl self-start z-1003 md:absolute ${positioning}`}\n    >\n      <div className=\"flex -mb-3\">\n        <span className=\"mx-1\">\n          <GrMoney />\n        </span>\n        <span>{totalPot}</span>\n      </div>\n      <span className=\"text-xs md:text-sm\">In Pot</span>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { QuestionRound } from \"../../../../interfaces\";\nimport { getRevealAnswer } from \"../../helpers\";\n\nconst styles = {\n  title: {\n    fontSize: \"0.7em\",\n    borderTop: \"1px solid #ebebeb\",\n    marginTop: \"0.3em\",\n    paddingTop: \"1em\",\n  },\n  currentHint: {\n    fontSize: \"1.4em\",\n  },\n  oldHint: {\n    fontSize: \"0.7em\",\n  },\n};\n\ninterface Props {\n  usedQuestionRound: QuestionRound;\n}\n\nexport default function Hints({ usedQuestionRound }: Props) {\n  const hints = usedQuestionRound.question.hints;\n  const numberOfHints = usedQuestionRound.isOver\n    ? hints.length\n    : Math.min(usedQuestionRound.bettingRounds.length - 1, hints.length);\n  if (numberOfHints < 1) {\n    return null;\n  }\n  if (!hints?.length) {\n    return null;\n  }\n  return (\n    <div className=\"flex flex-col\">\n      <span style={styles.title}>\n        Hint{numberOfHints > 1 && \"s\"} ({numberOfHints}/{hints.length}):\n      </span>\n      <ol>\n        {usedQuestionRound.question.hints\n          .slice(0, numberOfHints)\n          .map((hint, i) => (\n            <li\n              key={hint}\n              style={\n                numberOfHints === i + 1 && !getRevealAnswer(usedQuestionRound)\n                  ? styles.currentHint\n                  : styles.oldHint\n              }\n            >\n              {hint}\n            </li>\n          ))}\n      </ol>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Game, QuestionRound, QuestionTypes } from \"../../../interfaces\";\nimport Guess from \"../Guess\";\nimport { getRevealAnswer } from \"../helpers\";\nimport Hints from \"./Hints\";\n\ninterface QuestionProps {\n  game: Game;\n  usedQuestionRound: QuestionRound;\n}\n\nconst styles = {\n  question: {\n    fontSize: \"1.6em\",\n  },\n  answer: {\n    fontSize: \"1.6em\",\n  },\n};\n\nexport default function Question({ game, usedQuestionRound }: QuestionProps) {\n  const noHints =\n    usedQuestionRound.question.type !== QuestionTypes.MULTIPLE_CHOICE &&\n    usedQuestionRound.bettingRounds.length <= 1 &&\n    !usedQuestionRound.isOver;\n  const totalQuestions = game.questionRounds.length + game.questions.length;\n  return (\n    <div>\n      <p className=\"mb-0\" style={(!noHints && { fontSize: \"0.7em\" }) || {}}>\n        Question ({game.questionRounds.length}/{totalQuestions}):\n      </p>\n      <p style={(noHints && styles.question) || {}}>\n        {usedQuestionRound.question.question}\n      </p>\n      <Hints\n        {...{\n          usedQuestionRound,\n        }}\n      />\n      {[QuestionTypes.NUMERICAL, QuestionTypes.DATE].includes(\n        usedQuestionRound.question.type\n      ) &&\n        getRevealAnswer(usedQuestionRound) && (\n          <>\n            <p style={styles.answer}>\n              Answer:{\" \"}\n              <b>\n                <Guess\n                  guess={usedQuestionRound.question.answer}\n                  questionType={usedQuestionRound.question.type}\n                />\n              </b>\n            </p>\n            {usedQuestionRound.question.explanation && (\n              <p>{usedQuestionRound.question.explanation}</p>\n            )}\n          </>\n        )}\n    </div>\n  );\n}\n","import React, { ReactNode, useState } from \"react\";\nimport { LatLng, latLngBounds } from \"leaflet\";\nimport {\n  FeatureGroup,\n  MapContainer,\n  Marker,\n  Polyline,\n  TileLayer,\n  Tooltip,\n  useMap,\n  useMapEvents,\n} from \"react-leaflet\";\nimport { equals } from \"ramda\";\nimport { GeoCoordinate } from \"../../../interfaces\";\n\nimport \"./styles.css\";\n\ntype HandleOnClick = (p: GeoCoordinate) => void;\nexport interface MarkerType {\n  label?: string;\n  position: GeoCoordinate;\n  isAnswer?: boolean;\n  distanceToAnswer?: number;\n}\n\ninterface Props {\n  markers?: MarkerType[];\n  handleOnClick?: HandleOnClick;\n  className?: string;\n}\n\nconst getNumberOfDecimals = (val: number = 0) => {\n  if (val > 1000) {\n    return 0;\n  }\n  if (val > 100) {\n    return 1;\n  }\n  if (val > 1) {\n    return 2;\n  }\n  return 4;\n};\n\nfunction LocationMarker({ handleUpdate }: { handleUpdate: HandleOnClick }) {\n  const [position, setPosition] = useState<any>(null);\n  useMapEvents({\n    click(e) {\n      setPosition(e.latlng);\n      handleUpdate({ latitude: e.latlng.lat, longitude: e.latlng.lng });\n    },\n  });\n\n  return position && <Marker position={position} />;\n}\n\nfunction MarkerContainer({\n  children,\n  markers,\n}: {\n  children: ReactNode;\n  markers: MarkerType[];\n}) {\n  const map = useMap();\n  const bounds = latLngBounds([]);\n  markers?.forEach((data) => {\n    bounds.extend([data.position.latitude, data.position.longitude]);\n  });\n  bounds.isValid() &&\n    map.flyToBounds(bounds, {\n      // todo: make padding dependend on zoom level\n      padding: [10, 10],\n      maxZoom: markers.length > 1 ? 15 : 5,\n    });\n\n  return <FeatureGroup>{children}</FeatureGroup>;\n}\n\nexport default React.memo(\n  ({ markers = [], handleOnClick, className }: Props) => {\n    const answerMarker = markers.find((m) => m.isAnswer);\n    const distanceLines =\n      !!answerMarker &&\n      markers\n        .filter((m) => !m.isAnswer && m.distanceToAnswer)\n        .map((m) => ({\n          line: [\n            new LatLng(m.position.latitude, m.position.longitude),\n            new LatLng(\n              answerMarker.position.latitude,\n              answerMarker.position.longitude\n            ),\n          ],\n          label: m.distanceToAnswer?.toFixed(\n            getNumberOfDecimals(m.distanceToAnswer)\n          ),\n        }));\n\n    return (\n      <MapContainer\n        center={[0, 0]}\n        zoom={1}\n        maxBounds={[\n          [-90, -180],\n          [90, 180],\n        ]}\n        maxBoundsViscosity={1}\n        scrollWheelZoom={true}\n        className={className}\n      >\n        <TileLayer\n          attribution='Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.svg\"\n        />\n        {handleOnClick && <LocationMarker handleUpdate={handleOnClick} />}\n        {distanceLines &&\n          distanceLines.map(({ line, label }) => (\n            <Polyline\n              key={line.toString()}\n              positions={line}\n              color=\"#393d4e\"\n              weight={2}\n            >\n              {label && (\n                <Tooltip\n                  className=\"distance-label\"\n                  direction=\"center\"\n                  permanent\n                >\n                  {label} km\n                </Tooltip>\n              )}\n            </Polyline>\n          ))}\n        {markers.length && (\n          <MarkerContainer markers={markers}>\n            {markers.map(({ position, label }) => (\n              <Marker\n                position={[position.latitude, position.longitude]}\n                key={position.latitude}\n              >\n                {label && (\n                  <Tooltip direction=\"bottom\" offset={[-15, 20]} permanent>\n                    {label}\n                  </Tooltip>\n                )}\n              </Marker>\n            ))}\n          </MarkerContainer>\n        )}\n      </MapContainer>\n    );\n  },\n  (prevProps, nextProps) => equals(prevProps.markers, nextProps.markers)\n);\n","import React from \"react\";\nimport {\n  Game,\n  Player,\n  QuestionRound,\n  QuestionTypes,\n} from \"../../../interfaces\";\nimport { getRevealAnswer, hasPlayerFolded } from \"../helpers\";\nimport Map, { MarkerType } from \"../Map\";\n\ninterface Props {\n  playerId?: Player[\"id\"];\n  players: Game[\"players\"];\n  usedQuestionRound: QuestionRound;\n  isSpectator: Boolean;\n  className?: string;\n}\n\nexport default function GuessMap({\n  usedQuestionRound,\n  isSpectator,\n  playerId,\n  players,\n  className,\n}: Props) {\n  const questionType = usedQuestionRound.question.type;\n  if (!usedQuestionRound || questionType !== QuestionTypes.GEO) {\n    return null;\n  }\n\n  const playerGuess = usedQuestionRound.guesses.find(\n    (g) => g.playerId === playerId\n  );\n\n  let mapMarkers: MarkerType[] = playerGuess?.guess.geo\n    ? [\n        {\n          position: playerGuess.guess.geo,\n          label: \"You\",\n          distanceToAnswer: playerGuess.difference,\n        },\n      ]\n    : [];\n\n  if (\n    isSpectator ||\n    (usedQuestionRound.isOver && usedQuestionRound.isShowdown)\n  ) {\n    mapMarkers.push(\n      ...usedQuestionRound.guesses.reduce<MarkerType[]>(\n        (acc, { guess, playerId: pId, difference }) => {\n          if (\n            guess.geo &&\n            playerId !== pId &&\n            (isSpectator || !hasPlayerFolded(usedQuestionRound, pId))\n          ) {\n            const label = players.find((p) => p.id === pId)?.name || \"\";\n            acc.push({\n              position: guess.geo,\n              label,\n              distanceToAnswer: difference,\n            });\n          }\n          return acc;\n        },\n        []\n      )\n    );\n  }\n  if (\n    getRevealAnswer(usedQuestionRound) &&\n    usedQuestionRound.question.answer.geo\n  ) {\n    mapMarkers.push({\n      position: usedQuestionRound.question.answer.geo,\n      label: \"Correct Answer\",\n      isAnswer: true,\n    });\n  }\n\n  return <Map className={className} markers={mapMarkers} />;\n}\n","import React from \"react\";\nimport { QuestionRound, QuestionTypes } from \"../../../interfaces\";\nimport { getRevealAnswer } from \"../helpers\";\n\nimport \"./index.css\";\n\ninterface Props {\n  usedQuestionRound: QuestionRound;\n  handleClick?: (i: number) => void;\n  guess?: number;\n}\n\nexport default function MultipleChoiceOptions({\n  usedQuestionRound,\n  handleClick,\n  guess,\n}: Props) {\n  if (usedQuestionRound.question.type !== QuestionTypes.MULTIPLE_CHOICE) {\n    return null;\n  }\n  if (usedQuestionRound.question.alternatives?.length !== 4) {\n    throw new Error(\"missing alternatives for multiple choice question\");\n  }\n  const alternatives = usedQuestionRound.question.alternatives.map((alt) => ({\n    value: alt,\n    active: !usedQuestionRound.question.hiddenAlternatives?.includes(alt),\n  }));\n\n  const revealAnswer = getRevealAnswer(usedQuestionRound);\n  const answer = usedQuestionRound.question.answer.numerical;\n\n  return (\n    <div className=\"mc-container my-2\">\n      {alternatives.map((alt, i) => {\n        let optionClassName =\n          \"text-center border-2 border-blue-600 rounded-lg shadow px-4 py-3 font-bold focus:outline-none\";\n        if (!handleClick) {\n          optionClassName += \" no-pointer\";\n        }\n        if (alt.active) {\n          if (handleClick) {\n            optionClassName += \" hover:bg-blue-600 hover:text-white\";\n            if (guess === i) {\n              optionClassName += \" text-white bg-blue-600\";\n            } else {\n              optionClassName += \" text-blue-600\";\n            }\n          } else {\n            optionClassName += \" text-blue-600\";\n          }\n        } else {\n          optionClassName += \" text-blue-600\";\n        }\n        return (\n          <button\n            key={`${alt.value}_${i}`}\n            className={optionClassName}\n            onClick={() => handleClick && handleClick(i)}\n            disabled={!alt.active || (revealAnswer && i !== answer)}\n          >\n            {alt.value}\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n","import React from \"react\";\nimport PlayerComp from \"./Player\";\nimport Pot from \"./Pot\";\nimport Question from \"../Question\";\nimport {\n  BettingRound,\n  Game,\n  Player,\n  QuestionRound,\n  QuestionTypes,\n} from \"../../../interfaces\";\nimport { hasPlayerFolded, haveAllPlayersPlacedTheirGuess } from \"../helpers\";\nimport GuessMap from \"../GuessMap\";\nimport MultipleChoiceOptions from \"../MultipleChoiceOptions\";\n\nimport \"./styles.css\";\nimport { getWinningPlayerArray } from \"./helpers\";\nimport { maxNumberOfPlayers } from \"../PreGameLobby\";\ninterface Props {\n  game: Game;\n  usedQuestionRound: QuestionRound;\n  currentBettingRound?: BettingRound;\n  playerId?: Player[\"id\"];\n  isSpectator: boolean;\n}\n\nconst PokerTable = ({\n  game,\n  usedQuestionRound,\n  currentBettingRound,\n  playerId,\n  isSpectator,\n}: Props) => {\n  const isGeoQuestion = usedQuestionRound?.question.type === QuestionTypes.GEO;\n  const isMultipleChoiceQuestion =\n    usedQuestionRound?.question.type === QuestionTypes.MULTIPLE_CHOICE;\n  const allPlayersPlacedTheirGuess =\n    usedQuestionRound &&\n    game.players &&\n    haveAllPlayersPlacedTheirGuess(usedQuestionRound, game.players);\n  const winningPlayerIds = getWinningPlayerArray(game) || [];\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      {isGeoQuestion && (\n        <Question\n          {...{\n            game,\n            usedQuestionRound,\n          }}\n        />\n      )}\n      <div className=\"relative w-full md:w-4/5 my-6\">\n        <div\n          className={`poker-table ${\n            isGeoQuestion ? \"md:p-0 md:overflow-hidden\" : \"md:px-48 md:py-24\"\n          } rounded-full flex md:justify-center flex-col-reverse md:flex-col md:items-center md:w-full md:border-8 md:border-white md:shadow-xl`}\n        >\n          <div className=\"grid gap-y-6 mt-7 px-5 md:mt-0 md:px-0\">\n            {game.players.map((player, index) => {\n              const { changeInMoney } =\n                usedQuestionRound.results?.find(\n                  ({ playerId }) => player.id === playerId\n                ) || {};\n              const hasFolded = !!(\n                usedQuestionRound &&\n                hasPlayerFolded(usedQuestionRound, player.id)\n              );\n              const guess = usedQuestionRound.guesses.find(\n                (g) => g.playerId === player.id\n              );\n              return (\n                <PlayerComp\n                  key={player.id}\n                  {...{\n                    player,\n                    index,\n                    numberOfPlayers: game.players.length,\n                    currentBettingRound,\n                    changeInMoney,\n                    isAppPlayer: player.id === playerId,\n                    isTurnPlayer:\n                      player.id === currentBettingRound?.currentPlayer.id,\n                    isQuestionRoundOver: !!usedQuestionRound?.isOver,\n                    isShowdown: !!usedQuestionRound?.isShowdown,\n                    hasFolded,\n                    isSpectator,\n                    allPlayersPlacedTheirGuess,\n                    guess,\n                    question: usedQuestionRound.question,\n                    isWinningPlayer: winningPlayerIds.includes(player.id),\n                    isGameOver: game.isOver,\n                  }}\n                />\n              );\n            })}\n          </div>\n          <div className=\"flex flex-col gap-2 justify-center items-center w-full h-full\">\n            {!isGeoQuestion && (\n              <div>\n                <Pot\n                  usedQuestionRound={usedQuestionRound}\n                  isGameFull={game.players.length === maxNumberOfPlayers}\n                />\n                <Question\n                  {...{\n                    game,\n                    usedQuestionRound,\n                  }}\n                />\n              </div>\n            )}\n            {isGeoQuestion && (\n              <div className=\"flex flex-col-reverse w-full\">\n                <GuessMap\n                  {...{\n                    usedQuestionRound,\n                    isSpectator,\n                    playerId,\n                    players: game.players,\n                    className: \"map\",\n                  }}\n                />\n                <Pot\n                  usedQuestionRound={usedQuestionRound}\n                  isGameFull={game.players.length === maxNumberOfPlayers}\n                />\n              </div>\n            )}\n            {isMultipleChoiceQuestion && (\n              <MultipleChoiceOptions\n                {...{\n                  usedQuestionRound,\n                  alternatives:\n                    usedQuestionRound?.question.alternatives?.map((alt) => ({\n                      value: alt,\n                      active: !usedQuestionRound.question.hiddenAlternatives?.includes(\n                        alt\n                      ),\n                    })) || [],\n                  guess: usedQuestionRound?.guesses.find(\n                    (g) => g.playerId === playerId\n                  )?.guess.numerical,\n                }}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PokerTable;\n","import { Game } from \"../../../interfaces\";\n\nexport const getWinningPlayerArray = (game: Game) => {\n  if (game.isOver) {\n    return game.players\n      .reduce(\n        (winners, player, i) => {\n          if (i === 0) return winners;\n          if (winners[0].money < player.money) {\n            return [player];\n          }\n          if (winners[0].money === player.money) {\n            return [...winners, player];\n          }\n          return winners;\n        },\n        [game.players[0]]\n      )\n      .map((p) => p.id);\n  }\n};\n","import React, { useState } from \"react\";\nimport { QuestionTypes } from \"../../../../interfaces\";\nimport FormattedGuess from \"../../Guess\";\n\ninterface Props {\n  handleSubmit: (guess: number | string) => void;\n}\n\nexport default function NumberInput({ handleSubmit }: Props) {\n  const [guess, setGuess] = useState<number | string>(\"\");\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"grid grid-cols-2 gap-4\">\n        <input\n          value={guess}\n          onChange={(e) => {\n            const value = parseFloat(e.target.value);\n            if (value === 0) setGuess(0);\n            else setGuess(value || e.target.value);\n          }}\n          onKeyUp={(e) => {\n            if (e.which === 13) {\n              handleSubmit(guess);\n              setGuess(\"\");\n            }\n          }}\n          type=\"number\"\n          className=\"bg-white border border-gray-400 px-4\"\n          placeholder=\"Your answer\"\n          aria-label=\"Your answer\"\n          aria-describedby=\"basic-addon2\"\n          autoFocus\n        />\n        <button\n          type=\"submit\"\n          className=\"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n          disabled={typeof guess === \"string\" || (!guess && guess !== 0)}\n          onClick={() => {\n            handleSubmit(guess);\n            setGuess(\"\");\n          }}\n        >\n          Submit\n        </button>\n        <p className=\"-mt-2 text-sm h-2\">\n          <FormattedGuess\n            {...{\n              guess: {\n                numerical:\n                  typeof guess === \"number\" ? guess : parseFloat(guess || \"\"),\n              },\n              questionType: QuestionTypes.NUMERICAL,\n            }}\n          />\n        </p>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\ninterface Props {\n  handleSubmit: (guess: number) => void;\n}\n\nexport default ({ handleSubmit }: Props) => {\n  const [guess, setGuess] = useState<string>();\n\n  const submit = (stringValue?: string) => {\n    if (stringValue) {\n      const value = parseInt(stringValue.replaceAll(\"-\", \"\"));\n      if (value) {\n        handleSubmit(value);\n        setGuess(undefined);\n      }\n    }\n  };\n\n  return (\n    <div className=\"grid grid-cols-2 gap-4\">\n      <input\n        value={guess}\n        onChange={(e) => {\n          setGuess(e.target.value);\n        }}\n        onKeyUp={(e) => {\n          if (e.which === 13) {\n            submit(guess);\n          }\n        }}\n        type=\"date\"\n        className=\"bg-white border border-gray-400 px-4\"\n        placeholder=\"Your answer\"\n        aria-label=\"Your answer\"\n        aria-describedby=\"basic-addon2\"\n        autoFocus\n      />\n      <button\n        type=\"submit\"\n        className=\"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n        disabled={!guess}\n        onClick={() => {\n          submit(guess);\n        }}\n      >\n        Submit\n      </button>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { GeoCoordinate } from \"../../../../interfaces\";\nimport Map from \"../../../Game/Map\";\n\ninterface Props {\n  handleSubmit: (guess: GeoCoordinate) => void;\n}\n\nexport default ({ handleSubmit }: Props) => {\n  const [guess, setGuess] = useState<GeoCoordinate>();\n\n  return (\n    <>\n      <Map\n        handleOnClick={(p: GeoCoordinate) => {\n          setGuess(p);\n        }}\n      />\n      <button\n        className=\"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n        onClick={() => {\n          if (guess) {\n            handleSubmit(guess);\n            setGuess(undefined);\n          }\n        }}\n        disabled={!guess?.latitude || !guess.longitude}\n      >\n        Submit\n      </button>\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport { QuestionRound } from \"../../../../interfaces\";\nimport MultipleChoiceOptions from \"../../MultipleChoiceOptions\";\n\ninterface Props {\n  usedQuestionRound: QuestionRound;\n  alternatives?: {\n    value: string;\n    active: boolean;\n  }[];\n  handleSubmit: (guess: number) => void;\n}\n\nexport default function MultipleChoiceInput({\n  usedQuestionRound,\n  handleSubmit,\n  alternatives,\n}: Props) {\n  const [guess, setGuess] = useState<number>();\n  if (alternatives?.length !== 4) {\n    throw new Error(\"missing alternatives for multiple choice question\");\n  }\n\n  return (\n    <>\n      <MultipleChoiceOptions\n        usedQuestionRound={usedQuestionRound}\n        handleClick={setGuess}\n        guess={guess}\n      />\n      <button\n        className=\"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n        onClick={() => {\n          if (guess || guess === 0) {\n            handleSubmit(guess);\n            setGuess(undefined);\n          }\n        }}\n        disabled={!guess && guess !== 0}\n      >\n        Submit\n      </button>\n    </>\n  );\n}\n","import React from \"react\";\nimport Drawer from \"../../Drawer\";\nimport NumberInput from \"./NumberInput\";\nimport DateInput from \"./DateInput\";\nimport MapInput from \"./MapInput\";\nimport MultipleChoiceInput from \"./MultipleChoiceInput\";\nimport {\n  Answer,\n  Game,\n  GeoCoordinate,\n  Player,\n  QuestionRound,\n  QuestionTypes,\n} from \"../../../interfaces\";\nimport { AddGuess, addGuess } from \"../helpers\";\n\ninterface QuestionProps {\n  game: Game;\n  currentQuestionRound: QuestionRound;\n  player?: Player;\n  addGuessMutation: AddGuess;\n  showAnswerDrawer: boolean;\n  setShowAnswerDrawer: React.Dispatch<React.SetStateAction<boolean>>;\n  hasPlayerPlacedGuessInCurrentQuestionRound: boolean;\n}\n\nexport default function AnswerDrawer({\n  currentQuestionRound,\n  player,\n  addGuessMutation,\n  game,\n  showAnswerDrawer,\n  setShowAnswerDrawer,\n  hasPlayerPlacedGuessInCurrentQuestionRound,\n}: QuestionProps) {\n  if (!player || player.isDead) {\n    return null;\n  }\n\n  const handleNumberInputSubmit = (guess: number | string) => {\n    if ((guess || guess === 0) && typeof guess === \"number\") {\n      addGuess(\n        addGuessMutation,\n        game,\n        {\n          numerical: guess,\n        },\n        player.id\n      );\n      setShowAnswerDrawer(false);\n    }\n  };\n\n  const handleMapInputSubmit = (geoCoordinate: GeoCoordinate) => {\n    const guess: Answer = {\n      geo: geoCoordinate,\n    };\n    addGuess(addGuessMutation, game, guess, player.id);\n    setShowAnswerDrawer(false);\n  };\n\n  const getInput = () => {\n    switch (currentQuestionRound.question.type) {\n      case QuestionTypes.NUMERICAL:\n        return <NumberInput handleSubmit={handleNumberInputSubmit} />;\n      case QuestionTypes.DATE:\n        return <DateInput handleSubmit={handleNumberInputSubmit} />;\n      case QuestionTypes.GEO:\n        return <MapInput handleSubmit={handleMapInputSubmit} />;\n      case QuestionTypes.MULTIPLE_CHOICE:\n        const alternatives = currentQuestionRound.question.alternatives?.map(\n          (alt) => ({ value: alt, active: true })\n        );\n        return (\n          <MultipleChoiceInput\n            usedQuestionRound={currentQuestionRound}\n            alternatives={alternatives}\n            handleSubmit={handleNumberInputSubmit}\n          />\n        );\n      default:\n        throw new Error(\"Unknow Question Type\");\n    }\n  };\n\n  return (\n    <Drawer\n      onClose={() => {\n        setShowAnswerDrawer(false);\n      }}\n      anchor={\"bottom\"}\n      open={\n        (showAnswerDrawer || game.questionRounds.length === 1) &&\n        !hasPlayerPlacedGuessInCurrentQuestionRound\n      }\n      variant=\"temporary\"\n    >\n      <>\n        <p className=\"font-bold\">{currentQuestionRound.question.question}</p>\n        <p className=\"mt-4 text-sm\">Your answer</p>\n        {getInput()}\n      </>\n    </Drawer>\n  );\n}\n","import React from \"react\";\n\ninterface ActionButtonProps {\n  text: string;\n  handleOnClick: () => void;\n  isDisabled?: boolean;\n}\n\nexport default function ActionButton({\n  text,\n  handleOnClick,\n  isDisabled,\n}: ActionButtonProps) {\n  return (\n    <button\n      className=\"bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-3 md:px-4 md:py-3 transition duration-300 ease-in-out hover:bg-blue-600 w-full text-xs md:text-base\"\n      onClick={handleOnClick}\n      disabled={isDisabled}\n    >\n      {text}\n    </button>\n  );\n}\n","import React, { useState } from \"react\";\nimport Drawer from \"../../../../Drawer\";\nimport { BettingRound, Game, Player } from \"../../../../../interfaces\";\nimport { calculateAmountToCall, PlaceBet, raise } from \"../../../helpers\";\n\ninterface Props {\n  currentBettingRound: BettingRound;\n  game: Game;\n  handleRaise: typeof raise;\n  placeBet: PlaceBet;\n  playerId: Player[\"id\"];\n  showRaiseDrawer: boolean;\n  setShowRaiseDrawer: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport default function RaiseInputDrawer({\n  currentBettingRound,\n  game,\n  handleRaise,\n  placeBet,\n  playerId,\n  showRaiseDrawer,\n  setShowRaiseDrawer,\n}: Props) {\n  const amountToCall = calculateAmountToCall(currentBettingRound, playerId);\n  const moneyRemaining = game.players.find(({ id }) => id === playerId)?.money;\n  const [amount, setAmount] = useState(amountToCall);\n\n  const handleSubmit = () => {\n    handleRaise(amount, placeBet, game, playerId);\n    setShowRaiseDrawer(false);\n  };\n\n  return (\n    <Drawer\n      title=\"Raise\"\n      anchor={\"bottom\"}\n      open={showRaiseDrawer}\n      onClose={() => {\n        setShowRaiseDrawer(false);\n      }}\n      variant=\"temporary\"\n      className=\"drawer\"\n    >\n      <>\n        <p>Raise by how much?</p>\n        <div className=\"grid grid-cols-2 gap-4\">\n          <input\n            value={amount}\n            onChange={(e) => {\n              setAmount(Math.round(parseFloat(e.target.value)));\n            }}\n            onKeyUp={(e) => {\n              if (e.which === 13) {\n                handleSubmit();\n              }\n            }}\n            type=\"number\"\n            pattern=\"[0-9]\"\n            min={amountToCall}\n            max={moneyRemaining}\n            className=\"bg-white border border-gray-400 px-4\"\n            placeholder=\"Amount to raise\"\n            aria-label=\"Amount to raise\"\n            aria-describedby=\"basic-addon2\"\n            autoFocus\n          />\n          <button\n            disabled={\n              !!moneyRemaining &&\n              (amount < amountToCall || amount > moneyRemaining)\n            }\n            className=\"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600\"\n            onClick={handleSubmit}\n          >\n            Submit\n          </button>\n        </div>\n        <div className=\"flex\">\n          {moneyRemaining && (\n            <>\n              {[5, 10, 20, 50]\n                .filter((amount) => amount < moneyRemaining)\n                .map((amount) => (\n                  <span\n                    key={amount}\n                    style={{ cursor: \"pointer\" }}\n                    onClick={() => setAmount(amount)}\n                    className=\"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600\"\n                  >\n                    {amount}\n                  </span>\n                ))}\n              <span\n                style={{ cursor: \"pointer\" }}\n                onClick={() => setAmount(moneyRemaining)}\n                className=\"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600\"\n              >\n                All in\n              </span>\n            </>\n          )}\n        </div>\n      </>\n    </Drawer>\n  );\n}\n","import React, { useState } from \"react\";\nimport {\n  QuestionRound,\n  Player,\n  Game,\n  BettingRound,\n} from \"../../../../interfaces\";\nimport {\n  PlaceBet,\n  call,\n  raise,\n  fold,\n  calculateAmountToCall,\n} from \"../../helpers\";\nimport ActionButton from \"./Button\";\nimport RaiseInputDrawer from \"./RaiseInputDrawer\";\n\nexport interface ActionButtonsProps {\n  game: Game;\n  usedQuestionRound: QuestionRound;\n  currentBettingRound?: BettingRound;\n  playerId: Player[\"id\"];\n  placeBet: PlaceBet;\n  isAppPlayerTurn: boolean;\n}\n\nexport default function ActionButtons({\n  game,\n  usedQuestionRound,\n  currentBettingRound,\n  playerId,\n  placeBet,\n  isAppPlayerTurn,\n}: ActionButtonsProps) {\n  const [showRaiseDrawer, setShowRaiseDrawer] = useState(false);\n  if (!usedQuestionRound || !currentBettingRound) {\n    return null;\n  }\n\n  const player = game.players.find((p) => p.id === playerId);\n\n  const amountToCall = calculateAmountToCall(currentBettingRound, playerId);\n\n  return (\n    <div className=\"grid md:grid-cols-3 gap-3 md:gap-4\">\n      <ActionButton\n        text={amountToCall > 0 ? `Call for ${amountToCall}` : \"Check\"}\n        handleOnClick={() => {\n          call(placeBet, game, playerId);\n        }}\n        isDisabled={!isAppPlayerTurn}\n      />\n      <ActionButton\n        text=\"Raise\"\n        handleOnClick={() => {\n          setShowRaiseDrawer(true);\n        }}\n        isDisabled={\n          (player?.money && amountToCall >= player?.money) || !isAppPlayerTurn\n        }\n      />\n      <ActionButton\n        text=\"Fold\"\n        handleOnClick={() => {\n          fold(placeBet, game, playerId);\n        }}\n        isDisabled={!isAppPlayerTurn}\n      />\n      <RaiseInputDrawer\n        {...{\n          game,\n          placeBet,\n          playerId,\n          currentBettingRound,\n          handleRaise: raise,\n          showRaiseDrawer,\n          setShowRaiseDrawer,\n        }}\n      />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { GrMoney } from \"react-icons/gr\";\nimport {\n  QuestionRound,\n  BettingRound,\n  Player,\n  QuestionTypes,\n} from \"../../../interfaces\";\nimport ActionButtons, { ActionButtonsProps } from \"./ActionButtons\";\nimport {\n  calculateBettingRoundSpendingForPlayer,\n  hasPlayerFolded,\n  haveAllPlayersPlacedTheirGuess,\n} from \"../helpers\";\nimport FormattedGuess from \"../Guess\";\nimport Status from \"../PokerTable/Player/Status\";\n\ninterface Props\n  extends Omit<\n    ActionButtonsProps,\n    \"currentQuestionRound\" | \"playerId\" | \"isAppPlayerTurn\"\n  > {\n  player: Player;\n  usedQuestionRound: QuestionRound;\n  hasPlayerPlacedGuessInCurrentQuestionRound: boolean;\n  setShowAnswerDrawer: React.Dispatch<React.SetStateAction<boolean>>;\n  currentBettingRound?: BettingRound;\n}\n\nconst Footer = ({\n  game,\n  usedQuestionRound,\n  player,\n  placeBet,\n  hasPlayerPlacedGuessInCurrentQuestionRound,\n  setShowAnswerDrawer,\n  currentBettingRound,\n}: Props) => {\n  const isAppPlayerTurn =\n    currentBettingRound?.currentPlayer.id === player.id &&\n    haveAllPlayersPlacedTheirGuess(usedQuestionRound, game.players);\n\n  const appPlayerAnswer = usedQuestionRound.guesses.find(\n    (guess) => guess.playerId === player.id\n  );\n\n  let appPlayerMoney = game.players.find((p) => p.id === player.id)?.money ?? 0;\n  const bettingRoundSpending =\n    (currentBettingRound &&\n      calculateBettingRoundSpendingForPlayer(currentBettingRound, player.id)) ||\n    0;\n  if (usedQuestionRound.isOver && player.id && currentBettingRound) {\n    appPlayerMoney += bettingRoundSpending;\n  }\n\n  const questionType = usedQuestionRound.question.type;\n\n  const { changeInMoney = 0 } =\n    usedQuestionRound?.results?.find(\n      ({ playerId }) => player.id === playerId\n    ) || {};\n\n  const allPlayersPlacedTheirGuess =\n    usedQuestionRound &&\n    game.players &&\n    haveAllPlayersPlacedTheirGuess(usedQuestionRound, game.players);\n\n  return (\n    <footer className=\"fixed shadow-top-md bottom-0 left-0 w-full h-44 bg-gray-200 px-4 flex flex-col items-center justify-end z-1003\">\n      <div className=\"w-full flex flex-col items-end md:items-center justify-center max-w-xl my-auto\">\n        <div className=\"absolute left-4 md:left-10 top-0 flex flex-col items-center max-w-2xs text-center\">\n          <span\n            className={`absolute shadow-top-md top-0 h-20 w-20 -mt-10 rounded-full flex items-center justify-center text-4xl ${\n              usedQuestionRound.isOver && changeInMoney > 0\n                ? \"bg-green-500\"\n                : \"bg-gray-400\"\n            } ${\n              usedQuestionRound.question.type === QuestionTypes.GEO\n                ? \"left-0\"\n                : \"\"\n            }`}\n          >\n            <Status\n              {...{\n                player,\n                isQuestionRoundOver: usedQuestionRound.isOver,\n                isTurnPlayer:\n                  !usedQuestionRound.isOver &&\n                  player.id === currentBettingRound?.currentPlayer.id,\n                hasFolded: !!(\n                  usedQuestionRound &&\n                  hasPlayerFolded(usedQuestionRound, player.id)\n                ),\n                changeInMoney,\n                allPlayersPlacedTheirGuess,\n                playerHasPlacedTheirGuess: !!appPlayerAnswer,\n              }}\n            />\n          </span>\n          {questionType !== QuestionTypes.GEO && (\n            <>\n              <p className=\"text-xs mt-12\">Your Answer</p>\n              <span className=\"text-2xl overflow-hidden max-h-24\">\n                {appPlayerAnswer && (\n                  <FormattedGuess\n                    guess={appPlayerAnswer.guess}\n                    questionType={questionType}\n                    alternatives={usedQuestionRound.question.alternatives}\n                  />\n                )}\n              </span>\n            </>\n          )}\n        </div>\n        <div\n          className={`flex items-center ${\n            usedQuestionRound.isOver ? \"flex-col\" : \"md:flex-col\"\n          }`}\n        >\n          <div className=\"flex flex-col items-center mr-3 sm:mr-5 md:mr-0\">\n            <p className=\"text-xs\">Available money</p>\n            <div className=\"flex items-center mb-6 text-2xl\">\n              <GrMoney className=\"mx-1\" />\n              <span>{appPlayerMoney}</span>\n              {changeInMoney !== 0 && (\n                <span\n                  className={`ml-2 ${\n                    changeInMoney > 0 ? \"text-green-500\" : \"text-red-500\"\n                  }`}\n                >\n                  ({changeInMoney > 0 ? \"+\" : \"\"}\n                  {changeInMoney})\n                </span>\n              )}\n            </div>\n          </div>\n          {!hasPlayerPlacedGuessInCurrentQuestionRound &&\n            game.questionRounds.length > 1 && (\n              <button\n                className=\"new-question-button bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-2 md:px-4 md:py-3 text-xs md:text-base transition duration-300 ease-in-out hover:bg-blue-600 mx-auto\"\n                onClick={() => {\n                  setShowAnswerDrawer(true);\n                }}\n              >\n                Answer New Question\n              </button>\n            )}\n          {hasPlayerPlacedGuessInCurrentQuestionRound && player.id && (\n            <ActionButtons\n              {...{\n                game,\n                usedQuestionRound,\n                currentBettingRound,\n                placeBet,\n                playerId: player.id,\n                isAppPlayerTurn,\n              }}\n            />\n          )}\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport {\n  useLazyQuery,\n  useMutation,\n  useSubscription,\n} from \"@apollo/react-hooks\";\nimport {\n  GET_GAME_BY_ID,\n  CREATE_PLAYER,\n  START_GAME,\n  PLACE_BET,\n  ADD_GUESS,\n  SUBSCRIBE_TO_GAME_BY_ID,\n} from \"../../api/queries\";\nimport { Game, Player } from \"../../interfaces\";\nimport {\n  getFingerprintFromStorage,\n  getPlayerIdFromStorage,\n  setFingerprintToStorage,\n  setPlayerIdToStorage,\n} from \"../../storage\";\nimport PreGameLobby from \"./PreGameLobby\";\nimport PokerTable from \"./PokerTable\";\nimport AnswerDrawer from \"./AnswerDrawer\";\nimport Footer from \"./Footer\";\nimport LeaveGameButton from \"./LeaveGameButton\";\nimport {\n  getCurrentQuestionRound,\n  getCurrentBettingRound,\n  getPreviousQuestionRound,\n  haveAllPlayersPlacedTheirGuess,\n} from \"./helpers\";\nimport errorLogger from \"../../api/errorHandler\";\n// @ts-ignore\nimport notificationSound from \"../../assets/turn-notification.mp3\";\n// @ts-ignore\nimport alertSound from \"../../assets/turn-alert.wav\";\n\nimport \"./styles.css\";\n\nconst vibrate = (t: number) => {\n  window.navigator.vibrate && window.navigator.vibrate(t);\n};\nlet soundInterval: NodeJS.Timeout;\n\nfunction GameComponent() {\n  const [playerId, setPlayerId] = useState<string | undefined>(undefined);\n  const [game, setGame] = useState<Game | undefined>(undefined);\n  const currentQuestionRound = getCurrentQuestionRound(game);\n  const currentBettingRound = getCurrentBettingRound(currentQuestionRound);\n  const [showAnswerDrawer, setShowAnswerDrawer] = useState(false);\n  const [\n    showNewQuestionRoundForSpectator,\n    setShowNewQuestionRoundForSpectator,\n  ] = useState(false);\n  const { gameId } = useParams<{ gameId: string }>();\n  const [gqlErr, setGqlErr] = useState<Error>();\n\n  const [playNotification] = useState(new Audio(notificationSound));\n  const [playAlert] = useState(new Audio(alertSound));\n\n  const errorHandler = (err: Error) => {\n    errorLogger(err);\n    setGqlErr(err);\n  };\n\n  const [fetchGame] = useLazyQuery<{ game: Game }>(GET_GAME_BY_ID, {\n    fetchPolicy: \"cache-and-network\",\n    onError: errorHandler,\n    onCompleted: ({ game }) => {\n      setGame(game);\n    },\n  });\n\n  const [createPlayer, { data: newPlayerData }] = useMutation<{\n    addPlayer: Player;\n  }>(CREATE_PLAYER, {\n    onError: errorHandler,\n  });\n\n  const [startGame] = useMutation<{\n    startGame: Game;\n  }>(START_GAME, { onError: errorHandler });\n\n  const [placeBet] = useMutation<{\n    placeBet: Game;\n  }>(PLACE_BET, { onError: errorHandler });\n\n  const [addGuess] = useMutation<{\n    addGuess: Game;\n  }>(ADD_GUESS, { onError: errorHandler });\n\n  const { error: subscriptionError } = useSubscription<{\n    gameUpdated: Game;\n  }>(SUBSCRIBE_TO_GAME_BY_ID, {\n    variables: {\n      gameId,\n      hash:\n        getFingerprintFromStorage(gameId) || setFingerprintToStorage(gameId),\n    },\n    onSubscriptionData: ({ subscriptionData }) => {\n      clearInterval(soundInterval);\n      const game = subscriptionData.data?.gameUpdated;\n      setGame(game);\n      const cqr = getCurrentQuestionRound(game);\n      const cbr = getCurrentBettingRound(cqr);\n      const players = subscriptionData.data?.gameUpdated.players;\n      const allPlayersPlacedTheirBet =\n        cqr && players && haveAllPlayersPlacedTheirGuess(cqr, players);\n      if (allPlayersPlacedTheirBet) {\n        setShowNewQuestionRoundForSpectator(false);\n      }\n      if (\n        !game?.isOver &&\n        cbr?.currentPlayer.id === playerId &&\n        allPlayersPlacedTheirBet\n      ) {\n        playNotification.play();\n        vibrate(200);\n        soundInterval = setInterval(() => {\n          playAlert.play();\n          vibrate(200);\n        }, 15000);\n      }\n    },\n  });\n\n  useEffect(() => {\n    if (subscriptionError) {\n      errorHandler(subscriptionError);\n    }\n  }, [subscriptionError]);\n\n  useEffect(() => {\n    fetchGame({\n      variables: { gameId },\n    });\n  }, [fetchGame, gameId]);\n\n  useEffect(() => {\n    if (gameId) {\n      const storedPlayerId = getPlayerIdFromStorage(gameId);\n      const newPlayerId = newPlayerData?.addPlayer?.id;\n\n      if (storedPlayerId) {\n        setPlayerId(storedPlayerId);\n      }\n\n      if (newPlayerId) {\n        setPlayerIdToStorage(gameId, newPlayerId);\n        setPlayerId(newPlayerId);\n      }\n    }\n  }, [gameId, newPlayerData]);\n\n  if (!game) {\n    return <h3>Loading...</h3>;\n  }\n\n  if (gqlErr) {\n    return <p>A technical error occurred. Try to refresh the page</p>;\n  }\n\n  const player = game.players.find((p) => p.id === playerId);\n  const playerGuessInCurrentQuestionRound = currentQuestionRound?.guesses.find(\n    (guess) => guess.playerId === playerId\n  );\n  const hasPlayerPlacedGuessInCurrentQuestionRound = !!playerGuessInCurrentQuestionRound;\n  const gameHasStarted = !!game.questionRounds.length;\n  const isSpectator = gameHasStarted && (!player || player.isDead);\n  const previousQuestionRound = getPreviousQuestionRound(game);\n  const showPreviousQuestionRoundResults =\n    !!previousQuestionRound &&\n    (game.isOver ||\n      (!hasPlayerPlacedGuessInCurrentQuestionRound && !isSpectator) ||\n      (isSpectator &&\n        !!currentQuestionRound &&\n        !showNewQuestionRoundForSpectator &&\n        !haveAllPlayersPlacedTheirGuess(currentQuestionRound, game.players)));\n  const usedQuestionRound = showPreviousQuestionRoundResults\n    ? previousQuestionRound\n    : currentQuestionRound;\n\n  return (\n    <div\n      className={`p-2 flex flex-col md:justify-center ${\n        isSpectator || !gameHasStarted\n          ? \"min-h-screen\"\n          : \"min-h-screen-minus-52 mb-52\"\n      }`}\n    >\n      <a href=\"/\" className=\"mr-auto text-3xl font-bold\">\n        Certainty Poker\n      </a>\n      <div className=\"flex flex-col md:my-auto\">\n        {!gameHasStarted && (\n          <PreGameLobby\n            players={game.players}\n            gameLink={window.location.href}\n            startGame={startGame}\n            gameId={game.id}\n            createPlayer={createPlayer}\n            playerId={playerId}\n          />\n        )}\n        {gameHasStarted && usedQuestionRound && (\n          <PokerTable\n            {...{\n              game,\n              usedQuestionRound,\n              currentBettingRound,\n              playerId,\n              isSpectator,\n            }}\n          />\n        )}\n        {isSpectator && usedQuestionRound?.isOver && !game.isOver && (\n          <button\n            className=\"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mx-auto mt-5\"\n            onClick={() => {\n              setShowNewQuestionRoundForSpectator(true);\n            }}\n          >\n            Show Next Question\n          </button>\n        )}\n      </div>\n      {currentQuestionRound && playerId && (\n        <AnswerDrawer\n          {...{\n            game,\n            addGuessMutation: addGuess,\n            currentQuestionRound,\n            player,\n            showAnswerDrawer,\n            setShowAnswerDrawer,\n            hasPlayerPlacedGuessInCurrentQuestionRound,\n          }}\n        />\n      )}\n      {!game.isOver && player && !isSpectator && usedQuestionRound && (\n        <Footer\n          {...{\n            game,\n            usedQuestionRound,\n            placeBet,\n            player,\n            startGame,\n            hasPlayerPlacedGuessInCurrentQuestionRound,\n            setShowAnswerDrawer,\n            currentBettingRound,\n          }}\n        />\n      )}\n\n      <LeaveGameButton {...{ gameId, playerId, gameHasStarted, setPlayerId }} />\n    </div>\n  );\n}\n\nexport default GameComponent;\n","import React from \"react\";\nimport ExitToAppOutlinedIcon from \"@material-ui/icons/ExitToAppOutlined\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { Game, Player } from \"../../../interfaces\";\nimport { REMOVE_PLAYER, RemovePlayerVariables } from \"../../../api/queries\";\nimport errorLogger from \"../../../api/errorHandler\";\nimport { deletePlayerIdFromStorage } from \"../../../storage\";\nimport ConfirmDialogButton from \"../../shared/ConfirmDialogButton\";\n\ninterface Props {\n  gameId?: Game[\"id\"];\n  playerId?: Player[\"id\"];\n  gameHasStarted: Boolean;\n  setPlayerId: React.Dispatch<React.SetStateAction<string | undefined>>;\n}\n\nexport default ({ gameId, playerId, gameHasStarted, setPlayerId }: Props) => {\n  const [removePlayer] = useMutation<any, RemovePlayerVariables>(\n    REMOVE_PLAYER,\n    {\n      onError: errorLogger,\n      onCompleted: () => {\n        if (gameId) {\n          deletePlayerIdFromStorage(gameId);\n          setPlayerId(undefined);\n        }\n      },\n    }\n  );\n\n  if (!gameId || !playerId) {\n    return null;\n  }\n\n  const handleConfirm = () => {\n    removePlayer({ variables: { playerId, gameId } });\n  };\n\n  return (\n    <ConfirmDialogButton\n      onConfirm={handleConfirm}\n      dialogTitle={\n        <>\n          Are you sure?\n          {gameHasStarted && (\n            <p>If you leave the game, you cannot join again later.</p>\n          )}\n        </>\n      }\n      confirmLabel=\"Leave Game\"\n      buttonLabel={<ExitToAppOutlinedIcon />}\n      btnClassName=\"leave-game btn btn-link btn-lg\"\n    />\n  );\n};\n","export default __webpack_public_path__ + \"static/media/turn-notification.e2e956ce.mp3\";","export default __webpack_public_path__ + \"static/media/turn-alert.11acdad1.wav\";","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Lobby from \"../Lobby\";\nimport Game from \"../Game\";\n\nimport \"./styles.css\";\n\nfunction PageNotFound() {\n  return <p>Page not found.</p>;\n}\n\nfunction App() {\n  return (\n    <div className=\"bg-gray-50 dark:bg-gray-700 min-h-screen\">\n      <div\n        id=\"app\"\n        className=\"mx-auto max-w-full sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl\"\n      >\n        <Switch>\n          <Route path=\"/\" component={Lobby} exact />\n          <Route path=\"/:gameId\" component={Game} exact />\n          <Route path=\"/questions/:setName\" component={Lobby} exact />\n          <Route component={PageNotFound} />\n        </Switch>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","// env level constants\nexport const SERVER_URL =\n  process.env.REACT_APP_SERVER_URL || \"://localhost:8080\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport ApolloClient from \"apollo-client\";\nimport { ApolloProvider } from \"react-apollo\";\nimport { WebSocketLink } from \"apollo-link-ws\";\nimport { HttpLink } from \"apollo-link-http\";\nimport { split } from \"apollo-link\";\nimport { getMainDefinition } from \"apollo-utilities\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { OperationDefinitionNode } from \"graphql\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { SERVER_URL } from \"./config\";\n\nimport \"./index.css\";\n\nconst httpLink = new HttpLink({\n  uri: `http${SERVER_URL}/query`,\n});\n\n// Create a WebSocket link:\nconst wsLink = new WebSocketLink({\n  uri: `ws${SERVER_URL}/query`,\n  options: {\n    reconnect: true,\n  },\n});\n\nconst link = split(\n  // split based on operation type\n  ({ query }) => {\n    const { kind, operation } = getMainDefinition(\n      query\n    ) as OperationDefinitionNode;\n    return kind === \"OperationDefinition\" && operation === \"subscription\";\n  },\n  wsLink,\n  httpLink\n);\n\nconst client = new ApolloClient({\n  link,\n  cache: new InMemoryCache(),\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ApolloProvider client={client}>\n      <Router>\n        <App />\n      </Router>\n    </ApolloProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}