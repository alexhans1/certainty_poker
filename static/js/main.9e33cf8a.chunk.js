(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e,t){},138:function(e,t){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(13),i=n.n(l),o=n(41),s=n(46),u=n(21),c=n(118),d=n(120),m=n(26),p=n(4),f=n(119),b=n(45),v=n(6),g=n(30),h=n(37),E=n(210),y=n.n(E);function x(){var e=Object(h.a)(["\n  mutation removePlayer($gameId: ID!, $playerId: ID!) {\n    removePlayer(gameId: $gameId, playerId: $playerId)\n  }\n"]);return x=function(){return e},e}function w(){var e=Object(h.a)(["\n  mutation addGuess($input: GuessInput!) {\n    addGuess(input: $input)\n  }\n"]);return w=function(){return e},e}function N(){var e=Object(h.a)(["\n  mutation placeBet($input: BetInput!) {\n    placeBet(input: $input)\n  }\n"]);return N=function(){return e},e}function O(){var e=Object(h.a)(["\n  mutation startGame($gameId: ID!) {\n    startGame(gameId: $gameId)\n  }\n"]);return O=function(){return e},e}function I(){var e=Object(h.a)(["\n  mutation addPlayer($input: PlayerInput!) {\n    addPlayer(input: $input) {\n      id\n      money\n      name\n    }\n  }\n"]);return I=function(){return e},e}function j(){var e=Object(h.a)(["\n  subscription GameUpdated($gameId: ID!, $hash: String!) {\n    gameUpdated(gameId: $gameId, hash: $hash) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return j=function(){return e},e}function C(){var e=Object(h.a)(["\n  query findGame($gameId: ID!) {\n    game(gameId: $gameId) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return C=function(){return e},e}function k(){var e=Object(h.a)(["\n  query sets($setName: String) {\n    sets(setName: $setName) {\n      setName\n      numberOfQuestions\n      language\n    }\n  }\n"]);return k=function(){return e},e}function S(){var e=Object(h.a)(["\n  mutation uploadQuestions(\n    $questions: [QuestionInput!]!\n    $setName: String!\n    $isPrivate: Boolean!\n    $language: String!\n  ) {\n    uploadQuestions(\n      questions: $questions\n      setName: $setName\n      isPrivate: $isPrivate\n      language: $language\n    )\n  }\n"]);return S=function(){return e},e}function R(){var e=Object(h.a)(["\n  mutation createGame($setNames: [String!]!) {\n    createGame(setNames: $setNames) {\n      id\n    }\n  }\n"]);return R=function(){return e},e}var P,q,A=y()(R()),T=y()(S()),D=y()(k()),L=y()(C()),G=y()(j()),M=y()(I()),F=y()(O()),Q=y()(N()),B=y()(w()),U=y()(x()),H=function(e){console.error(e.message)},$=n.p+"static/media/certainty_poker_bg.24a8fc3a.png",_=function(){return r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:$,alt:"background"}))},Y=n(43),K=n(55),z=n.n(K),W=n(74),V=n(76),J=n(182),Z=n(180),X=n(105);!function(e){e.GEO="GEO",e.NUMERICAL="NUMERICAL",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE",e.DATE="DATE"}(P||(P={})),function(e){e.CHECKED="CHECKED",e.CALLED="CALLED",e.RAISED="RAISED"}(q||(q={}));var ee={GB:"English",FR:"French",ES:"Spainish",CN:"Chinese",DE:"German",ZA:"Africaans",AL:"Albanian",DZ:"Algerian",SA:"Arab",AM:"Armenian",BD:"Bangladeshi",BG:"Bulgarian",KH:"Cambodian",HR:"Croatian",CZ:"Czech",DK:"Danish",NL:"Dutch",EE:"Estonian",FI:"Finnish",GR:"Greek",IL:"Hebrew",HU:"Hungarian",IN:"Indian",IT:"Italian",JP:"Japanese",KR:"Korean",LV:"Latvian",LT:"Lithuanian",MY:"Malaysian",MN:"Mongolian",NO:"Norwegian",PL:"Polish",BR:"Portuguese",RO:"Romanian",RU:"Russian",RS:"Serbian",SK:"Slovakian",SI:"Slovenian",SE:"Swedish",TH:"Thai",TR:"Turkish",VN:"Vietnamese"};var te=n(107),ne=n.n(te);function ae(e){var t,n,a,l=e.guess,i=e.questionType,o=e.alternatives;if(!l)return null;switch(i){case P.NUMERICAL:var s="number"===typeof l.numerical?l.numerical:parseFloat(l.numerical||"");return isNaN(s)?null:r.a.createElement("span",null,(new Intl.NumberFormat).format(s));case P.DATE:return l.numerical?r.a.createElement("span",null,ne()(l.numerical.toString(),"YYYYMMDD").format("MMM DD, YYYY")):null;case P.GEO:return r.a.createElement("span",null,"[".concat(null===(t=l.geo)||void 0===t?void 0:t.latitude,", ").concat(null===(n=l.geo)||void 0===n?void 0:n.longitude,"]"));case P.MULTIPLE_CHOICE:if(4!==(null===o||void 0===o?void 0:o.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement("span",null,o[null!==(a=l.numerical)&&void 0!==a?a:-1]);default:throw new Error("Invalid question type")}}var re=function(e){var t=e.open,n=e.handleClose,l=e.fetchSets,i=e.setSelectedSets,o=Object(b.f)(),s=Object(a.useState)(!0),u=Object(v.a)(s,2),c=u[0],d=u[1],m=Object(a.useState)(),p=Object(v.a)(m,2),f=p[0],h=p[1],E=Object(a.useState)(""),y=Object(v.a)(E,2),x=y[0],w=y[1],N=Object(a.useState)(0),O=Object(v.a)(N,2),I=O[0],j=O[1],C=Object(a.useState)(),k=Object(v.a)(C,2),S=k[0],R=k[1],q=Object(g.b)(T,{variables:{setName:x,questions:f,isPrivate:!!I,language:S},onCompleted:function(){I?o.push("/questions/".concat(x)):l(),i([x]),n(),w(""),h(void 0),d(!0)},onError:H}),A=Object(v.a)(q,2),D=A[0],L=A[1].error,G=c?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-3"},"An example of the file format can be found"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900",target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/spreadsheets/d/1_cUrvCc3R2qTL_ME-A9wc9HmyH-zoAQkRnBs80dOPb8/edit?usp=sharing"},"here"),"."),r.a.createElement(X.a,{onDrop:function(e){d(!1),h(function(e){return e.map((function(e){var t,n=e.data,a=n.question,r=n.type,l=n.answer,i=n.latitude,o=n.longitude,s=n.toleranceRadius,u=n.hint1,c=n.hint2,d=n.explanation,m=n.multiple_choice_alternative1,p=n.multiple_choice_alternative2,f=n.multiple_choice_alternative3,b=[u,c].filter(Boolean),v={};switch(r){case P.NUMERICAL:case P.DATE:v.numerical=l;break;case P.GEO:v.geo={latitude:i,longitude:o,toleranceRadius:s};break;case P.MULTIPLE_CHOICE:v.numerical=0,t=[l,m,p,f];break;default:throw new Error("invalid question type")}return{question:a,type:r,answer:v,hints:b,explanation:d,alternatives:t}}))}(e))},onError:function(e,t,n,a){console.error(e)},config:{header:!0},addRemoveButton:!0,removeButtonColor:"#659cef"},r.a.createElement("span",null,"Drop CSV file here or click to upload."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("input",{value:x,onChange:function(e){w(e.target.value)},type:"text",className:"rounded-md bg-white border border-gray-400 px-4 py-2 mr-4",placeholder:"Name for the question set","aria-label":"Name for the question set",required:!0,autoFocus:!0}),r.a.createElement("select",{className:"rounded-md bg-white border border-gray-400 px-4 py-2",required:!0,value:S,onChange:function(e){R(e.target.value)}},r.a.createElement("option",{selected:!0},"Language..."),Object.keys(ee).map((function(e){return r.a.createElement("option",{key:e,value:e},Object(V.a)(e)," ",ee[e])})))),r.a.createElement("h3",{className:"text-2xl mb-3 mt-5"},"Review your upload:"),r.a.createElement("hr",null),(f||[]).map((function(e){var t,n,a;return r.a.createElement("div",{key:e.question,className:"small"},r.a.createElement("p",{className:"my-3"},"Question: ",r.a.createElement("b",null,e.question)),e.type!==P.MULTIPLE_CHOICE&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"my-3"},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(ae,{guess:e.answer,questionType:e.type,alternatives:e.alternatives}))),(null===(t=e.answer.geo)||void 0===t?void 0:t.toleranceRadius)&&r.a.createElement("p",{className:"my-3"},"Tolerance radius in km: ",r.a.createElement("b",null,e.answer.geo.toleranceRadius))),!!(null===(n=e.hints)||void 0===n?void 0:n.length)&&r.a.createElement("p",{className:"my-3"},"Hints:"," ",e.hints.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",null,e)))}))),!!(null===(a=e.alternatives)||void 0===a?void 0:a.length)&&r.a.createElement("p",{className:"my-3"},"Alternatives:"," ",e.alternatives.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",{className:0===t?"text-green-500":""},e)))}))),e.explanation&&r.a.createElement("p",{className:"my-3"},"Explanation: ",r.a.createElement("b",null,e.explanation)),r.a.createElement("hr",{className:"my-3"}))})),r.a.createElement("div",{className:"flex"},r.a.createElement("input",{type:"checkbox",className:"mt-2",id:"isPrivateCheckbox",value:I,onChange:function(){j(I?0:1)}}),r.a.createElement("label",{className:"ml-2",htmlFor:"isPrivateCheckbox"},"Questions are private",r.a.createElement("br",null),r.a.createElement("span",null,"If checked, this set of questions will not appear in the list on the start screen."))),r.a.createElement("div",{className:"flex mt-3"},r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!x||!S,onClick:function(){D()}},"Upload"),r.a.createElement("button",{className:"border-2 boder-gray-800 rounded-lg font-bold hover:text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-gray-800 ml-3",onClick:function(){d(!0)}},"Upload new file")));return r.a.createElement(J.a,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:t,className:"flex justify-center items-center p-5",onClose:n,closeAfterTransition:!0,BackdropComponent:Z.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:"flex py-6 px-6 md:px-8 my-2 md:my-6 mx-2 md:mx-6 lg:mx-10 max-h-full bg-white rounded-md focus:outline-none"},r.a.createElement("div",{className:"overflow-y-auto flex-shrink-0 max-w-full flex flex-col"},r.a.createElement("h3",{className:"text-2xl mb-2"},"Upload a CSV file with custom questions"),G,L&&r.a.createElement("div",{className:"alert alert-danger"},L.message))))};n(155);function le(e){var t=e.sets,n=void 0===t?[]:t,l=e.setName,i=e.languages,s=e.fetchSets,u=Object(b.f)(),c=Object(b.g)(),d=Object(a.useState)(l?[l]:[]),m=Object(v.a)(d,2),p=m[0],f=m[1],h=Object(a.useState)(!1),E=Object(v.a)(h,2),y=E[0],x=E[1],w=Object(a.useState)("GB"),N=Object(v.a)(w,2),O=N[0],I=N[1],j=Object(g.b)(A,{variables:{setNames:p},onCompleted:function(e){var t=e.createGame;u.push("/".concat(t.id))},onError:H}),C=Object(v.a)(j,2),k=C[0],S=C[1].loading,R=function(){var e=Object(W.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.length&&k();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"actionable-container px-4 py-2"},r.a.createElement("a",{href:"/",className:"mr-auto text-3xl font-bold"},"Certainty Poker"),l?r.a.createElement("p",null,"You can only start a game with these questions from this link"," ",r.a.createElement(o.b,{to:c.pathname,style:{color:"#dfae06"}},"".concat(window.location.host).concat(c.pathname)),".",r.a.createElement("br",null),"Make sure to ",r.a.createElement("b",null,"save this link")," if you want to start a game with the uploaded questions later.",r.a.createElement("br",null),"The questions will be available for 90 days."):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"py-5"},"You think you know things?",r.a.createElement("br",null),"Let's make it interesting then!"),r.a.createElement("p",null,"Certainty Poker is a social (distance) trivia game that doesn't just test if you know things but also how certain you are about what you think you know."),r.a.createElement("p",null,"Start by selecting a set of trivia questions, create the game and share the link to join with your friends!",r.a.createElement("br",null),"You don't like our questions? Upload your own"," ",r.a.createElement("button",{className:"text-blue-700 hover:text-blue-900 p-0",onClick:function(){x(!0)}},"here \u2934"),".")),r.a.createElement("div",{className:"flex my-3"},i.map((function(e){return r.a.createElement("span",{key:e,className:"text-4xl mx-1 ".concat(e===O?"":"text-black-50"),onClick:function(){I(e)},style:{cursor:e===O?"default":"pointer"}},Object(V.a)(e))}))),r.a.createElement("div",{className:"set-container my-4"},n.filter((function(e){return e.language===O})).map((function(e){return r.a.createElement("span",{key:e.setName,className:"flex justify-center items-center rounded-md text-center px-4 py-3 border border-gray-800 hover:bg-gray-800 hover:text-white cursor-pointer ".concat((null===p||void 0===p?void 0:p.includes(e.setName))?"bg-gray-800 text-white":""," ").concat(l?"mr-auto":""),style:{gridColumn:"span ".concat(Math.round(Math.pow(e.setName.length,.35)))},onClick:function(t){l||(t.metaKey?(null===p||void 0===p?void 0:p.includes(e.setName))?f(p.filter((function(t){return e.setName!==t}))):f([e.setName].concat(Object(Y.a)(p))):f([e.setName]))}},e.setName," (",e.numberOfQuestions,")")}))),r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mx-auto",onClick:R,disabled:!p.length},S?"Loading...":"Create Game"),r.a.createElement("p",{className:"mt-4"},"Don't know the rules? Find them"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900 p-0",href:"https://docs.google.com/document/d/13pwz8yzrPdY1DcQqXvhejJAxXdWdPrvxR6GUxg5PJPs/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer"},"here"),"."),r.a.createElement("p",{className:"text-smaller"},"TL;DR:",r.a.createElement("br",null),"Answer trivia different types of questions. Then bet some poker chips on how sure you are your answer is right. If you are unsure, you'd better fold or put on your best poker face. You're a 100%? Then risk it and go All In. If you are closest to the correct answer, you win whatever is in the pot. Unless you've folded, of course."),r.a.createElement(re,{open:y,handleClose:function(){x(!1)},fetchSets:s,setSelectedSets:f}))}n(156);var ie=function(){var e=Object(b.h)().setName,t=Object(g.a)(D,{fetchPolicy:"no-cache",onError:H,variables:{setName:e}}),n=Object(v.a)(t,2),l=n[0],i=n[1].data;Object(a.useEffect)((function(){l()}),[l,e]);var o=(null===i||void 0===i?void 0:i.sets.reduce((function(e,t){return e.includes(t.language)||e.push(t.language),e}),[]).sort((function(e,t){return"GB"===e?-1:parseInt(e)-parseInt(t)})))||[];return r.a.createElement("div",{className:"grid-container"},r.a.createElement(le,{sets:null===i||void 0===i?void 0:i.sets,languages:o,setName:e,fetchSets:l}),r.a.createElement(_,null))},oe="player_id",se="fingerprint",ue=function(e){localStorage.clear();var t=Math.random().toString(36).substring(2);return localStorage.setItem("".concat(se,"_").concat(e),t),t},ce=function(e){return localStorage.getItem("".concat(se,"_").concat(e))},de=n(58);var me=function(e){var t=e.playerName;return r.a.createElement("div",{className:"rounded-xl border-2 px-3 h-16 w-36 flex items-center justify-center shadow"},r.a.createElement("span",{className:"overflow-hidden text-overflow-ellipsis"},t))},pe=n(214),fe=n(215),be=n(224),ve=function(e){var t=e.buttonLabel,n=e.dialogTitle,a=e.confirmLabel,l=e.onConfirm,i=e.isDisabled,o=e.btnClassName,s=r.a.useState(!1),u=Object(v.a)(s,2),c=u[0],d=u[1],m=function(){d(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:o||"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){d(!0)},disabled:i},t),r.a.createElement(pe.a,{open:c,onClose:m},r.a.createElement("div",{className:"px-4 py-2"},r.a.createElement(be.a,null,n),r.a.createElement(fe.a,null,r.a.createElement("button",{className:"btn btn-outline-dark",onClick:m},"Cancel"),r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){l(),d(!1)}},a)))))},ge=function(e){var t=e.startGame,n=e.gameId,a=e.isDisabled;return r.a.createElement(ve,{onConfirm:function(){t({variables:{gameId:n}})},dialogTitle:"Are you sure you want to start the game? Once it's started no more players can join.",confirmLabel:"Start Game",buttonLabel:"Start Game",isDisabled:a})},he=n(19),Ee=n(24),ye=n(225);n(157);function xe(e){var t=e.children,n=e.onClose,a=Object(Ee.a)(e,["children","onClose"]);return r.a.createElement(ye.a,Object(he.a)({},a),r.a.createElement("div",{className:"flex items-center flex-col bg-gray-200 py-4 min-h-52"},n&&r.a.createElement("span",{id:"drawer-close",className:"ml-auto mr-3 -mb-4 -mt-2",onClick:n},"\u2573"),r.a.createElement("div",{className:"container px-5 pb-5 flex flex-col md:max-w-screen-md"},t)))}function we(e){var t=e.createPlayer,n=e.gameId,l=e.playerId,i=Object(a.useState)(""),o=Object(v.a)(i,2),s=o[0],u=o[1],c=function(){l||t({variables:{input:{gameId:n,playerName:s}}})};return r.a.createElement(xe,{title:"Your name",anchor:"bottom",open:!l,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},"Enter your name"),r.a.createElement("p",{className:"mt-4 text-sm"},"Username"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:s,onChange:function(e){u(e.target.value)},onKeyUp:function(e){13===e.which&&c()},type:"text",className:"bg-white border border-gray-400 px-4",placeholder:"Your name","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",disabled:!s.length,className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:c},"Submit"))))}var Ne,Oe=function(e){var t=e.players,n=e.gameLink,a=e.startGame,l=e.gameId,i=e.createPlayer,o=e.playerId,s=e.setNames;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col items-center font-semibold mt-4 px-5 mx-auto md:max-w-screen-md"},r.a.createElement("h5",null,"Share this link with friends who want to join the game"),r.a.createElement("div",{className:"flex items-center justify-between w-full break-all px-4 md:px-10 py-4 mt-4 bg-gray-200 rounded-md"},r.a.createElement("span",{className:"w-3/4"},n),r.a.createElement("button",{className:"text-blue-500 hover:text-blue-600 p-2 ripple focus:outline-none text-2xl",onClick:Object(W.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(window.location.href);case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(de.b,null))),r.a.createElement("h4",{className:"mt-4 self-start text-lg"},"Question Set",s.length>1?"s":"",": ",s.join(", ")),r.a.createElement("p",{className:"mt-20 self-start"},"Players"),r.a.createElement("p",{className:"text-xs font-normal self-start w-full pb-2 border-b-2 border-grey-200"},12-t.length," Open spot",12-t.length===1?"":"s"),r.a.createElement("hr",null),r.a.createElement("div",{className:"mt-8 grid gap-8 w-full sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},t.map((function(e){return r.a.createElement(me,{key:e.id,playerName:null===e||void 0===e?void 0:e.name})}))),o&&r.a.createElement("div",{className:"mt-16 self-start"},r.a.createElement(ge,{startGame:a,gameId:l,isDisabled:t.length<=1}))),r.a.createElement(we,{gameId:l,createPlayer:i,playerId:o}))},Ie=n(50),je=n(39),Ce=n(57),ke=n(223),Se=n(79),Re=n(93),Pe=n(116),qe=function(e){var t=e.tooltipTitle,n=e.children;return r.a.createElement(ke.a,{title:t},r.a.createElement("span",null,n))},Ae=(Ne={},Object(Ce.a)(Ne,q.RAISED,r.a.createElement(qe,{tooltipTitle:"Raised"},r.a.createElement(de.a,null))),Object(Ce.a)(Ne,q.CALLED,r.a.createElement(qe,{tooltipTitle:"Called"},r.a.createElement(de.c,null))),Object(Ce.a)(Ne,q.CHECKED,r.a.createElement(qe,{tooltipTitle:"Checked"},r.a.createElement(de.c,null))),Ne);var Te=function(e){var t=e.player,n=e.isWinningPlayer,a=e.isQuestionRoundOver,l=e.changeInMoney,i=e.isDead,o=e.hasFolded,s=e.allPlayersPlacedTheirGuess,u=e.playerHasPlacedTheirGuess,c=e.isTurnPlayer,d=e.playerIsAllIn;if(i)return r.a.createElement(qe,{tooltipTitle:"Out"},r.a.createElement(Ie.d,null));if(o)return r.a.createElement(qe,{tooltipTitle:"Folded"},r.a.createElement(je.a,null));if(d)return r.a.createElement(qe,{tooltipTitle:"All in"},r.a.createElement(je.b,null));if(n&&a)return r.a.createElement(Re.a,null);if(a&&l&&l>0)return r.a.createElement(Re.b,null);if(a&&l&&l<0)return r.a.createElement(Ie.c,null);if(!s)return u?r.a.createElement(qe,{tooltipTitle:"Already submitted guess"},r.a.createElement(Ie.b,null)):r.a.createElement(qe,{tooltipTitle:"Not yet submitted guess"},r.a.createElement(Se.b,null));if(c)return r.a.createElement(qe,{tooltipTitle:"Player's turn"},r.a.createElement(Ie.a,{className:"text-red-600"}));var m=t.bettingState;return m&&Ae[m]?Ae[m]:r.a.createElement(qe,{tooltipTitle:"Waiting for turn"},r.a.createElement(Pe.a,null))},De=function(e,t){return e.bets.reduce((function(e,n){return e+(n.playerId===t?n.amount:0)}),0)},Le=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-1]},Ge=function(e){var t;return null===e||void 0===e?void 0:e.bettingRounds[(null===e||void 0===e||null===(t=e.bettingRounds)||void 0===t?void 0:t.length)-1]},Me=function(e,t){var n=t.filter((function(e){return!e.isDead}));return e.guesses.length>=n.length},Fe=function(e,t){if(!e.bets.length)return 0;var n=De(e,t),a=e.bets.reduce((function(e,t){return e[t.playerId]=(e[t.playerId]||0)+t.amount,e}),{});return Math.max.apply(Math,Object(Y.a)(Object.values(a)))-n},Qe=function(e,t){return null===e||void 0===e?void 0:e.foldedPlayerIds.includes(t)},Be=function(e){return!!e.isOver||(e.question.type===P.MULTIPLE_CHOICE?e.bettingRounds.length>=4:e.question.hints.length+1<e.bettingRounds.length)},Ue=function(e,t,n,a){var r,l,i=Le(n),o=Ge(i);if(i&&(null===o||void 0===o?void 0:o.currentPlayer.id)===a){if(Fe(o,a)>e)throw new Error("Amount to call is greater than raised amount.");var s=null!==(r=null===(l=n.players.find((function(e){return e.id===a})))||void 0===l?void 0:l.money)&&void 0!==r?r:0;t({variables:{input:{gameId:n.id,playerId:a,amount:Math.min(e,s)}}})}},He=function(e,t,n,a){e({variables:{input:{gameId:t.id,playerId:a,guess:n}}})},$e=(n(158),[1,9,5,2,11,4,8,10,6,3,12,7]),_e=function(e){var t=e.player,n=e.index,a=e.numberOfPlayers,l=e.isTurnPlayer,i=e.isAppPlayer,o=e.isWinningPlayer,s=e.isQuestionRoundOver,u=e.isShowdown,c=e.currentBettingRound,d=e.changeInMoney,m=e.hasFolded,p=e.isSpectator,f=e.allPlayersPlacedTheirGuess,b=e.guess,v=e.question,g=e.isGameOver,h=l&&!s?"isTurnPlayer":"",E=i?"bg-blue-200":"bg-gray-200",y=t.isDead?"is-dead":"",x=c?De(c,t.id):0,w=(null===v||void 0===v?void 0:v.type)!==P.GEO&&(p||!!s&&u&&!m),N=$e.filter((function(e){return e<=a}))[n],O=t.money;return s&&!g&&(O+=x),r.a.createElement("div",{className:"player player-".concat(N," shadow-md ").concat(h," ").concat(E," ").concat(y," md:absolute")},r.a.createElement("span",{className:"status text-gray-900 shadow-lg ".concat(s&&d&&d>0?"bg-green-500":"bg-gray-400")},r.a.createElement(Te,{player:t,isWinningPlayer:o,isTurnPlayer:l,changeInMoney:d,isQuestionRoundOver:s,isDead:t.isDead,hasFolded:m,allPlayersPlacedTheirGuess:f,playerHasPlacedTheirGuess:!!b,playerIsAllIn:!t.isDead&&0===t.money})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"name"},t.name),r.a.createElement("div",{className:"flex items-center"},r.a.createElement(je.b,{className:"mr-1"}),r.a.createElement("span",null,O),s&&d&&r.a.createElement("span",{className:"ml-1 ".concat(d>0?"text-green-500":"text-red-500")},"(",d>0?"+":"",d,")")),r.a.createElement("div",{className:"inner-info grid absolute text-sm left-48 md:left-auto sm:-right-3 md:right-0 md:text-lg md:grid-flow-auto text-gray-800 md:w-full"},!s&&!!x&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(je.b,null)),r.a.createElement("span",null,x)),w&&(null===v||void 0===v?void 0:v.type)&&(null===b||void 0===b?void 0:b.guess)&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(Ie.b,null)),r.a.createElement(ae,{guess:null===b||void 0===b?void 0:b.guess,questionType:v.type,alternatives:v.alternatives})))))};function Ye(e){var t=e.usedQuestionRound,n=e.isGameFull,a=null===t||void 0===t?void 0:t.bettingRounds.reduce((function(e,t){return t.bets.forEach((function(t){e+=t.amount})),e}),0),l=n?"md:-right-5 md:-top-10":"md:left-24 md:bottom-20";return r.a.createElement("div",{className:"text-2xl md:text-3xl self-start z-1003 md:absolute ".concat(l)},r.a.createElement("div",{className:"flex -mb-3"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(je.b,null)),r.a.createElement("span",null,a)),r.a.createElement("span",{className:"text-xs md:text-sm"},"In Pot"))}var Ke={title:{fontSize:"0.7em",borderTop:"1px solid #ebebeb",marginTop:"0.3em",paddingTop:"1em"},currentHint:{fontSize:"1.4em"},oldHint:{fontSize:"0.7em"}};function ze(e){var t=e.usedQuestionRound,n=t.question.hints,a=t.isOver?n.length:Math.min(t.bettingRounds.length-1,n.length);return a<1?null:(null===n||void 0===n?void 0:n.length)?r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("span",{style:Ke.title},"Hint",a>1&&"s"," (",a,"/",n.length,"):"),r.a.createElement("ol",null,t.question.hints.slice(0,a).map((function(e,n){return r.a.createElement("li",{key:e,style:a!==n+1||Be(t)?Ke.oldHint:Ke.currentHint},e)})))):null}var We={question:{fontSize:"1.6em"},answer:{fontSize:"1.6em"}};function Ve(e){var t=e.game,n=e.usedQuestionRound,a=n.question.type!==P.MULTIPLE_CHOICE&&n.bettingRounds.length<=1&&!n.isOver,l=t.questionRounds.length+t.questions.length;return r.a.createElement("div",null,r.a.createElement("p",{className:"mb-0",style:!a&&{fontSize:"0.7em"}||{}},"Question (",t.questionRounds.length,"/",l,"):"),r.a.createElement("p",{style:a&&We.question||{}},n.question.question),r.a.createElement(ze,{usedQuestionRound:n}),[P.NUMERICAL,P.DATE].includes(n.question.type)&&Be(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:We.answer},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(ae,{guess:n.question.answer,questionType:n.question.type}))),n.question.explanation&&r.a.createElement("p",null,n.question.explanation)))}var Je=n(16),Ze=n(216),Xe=n(217),et=n(218),tt=n(219),nt=n(226),at=n(220),rt=n(221),lt=n(227),it=n(222),ot=(n(159),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>1e3?0:e>100?1:e>1?2:4});function st(e){var t=e.handleUpdate,n=Object(a.useState)(null),l=Object(v.a)(n,2),i=l[0],o=l[1];return Object(Ze.b)({click:function(e){o(e.latlng),t({latitude:e.latlng.lat,longitude:e.latlng.lng})}}),i&&r.a.createElement(Xe.a,{position:i})}function ut(e){var t=e.children,n=e.markers,a=Object(Ze.a)(),l=Object(Je.latLngBounds)([]);return null===n||void 0===n||n.forEach((function(e){l.extend([e.position.latitude,e.position.longitude])})),l.isValid()&&a.flyToBounds(l,{padding:[10,10],maxZoom:n.length>1?15:5}),r.a.createElement(et.a,null,t)}var ct=r.a.memo((function(e){var t=e.markers,n=void 0===t?[]:t,a=e.handleOnClick,l=e.className,i=n.find((function(e){return e.isAnswer})),o=!!i&&n.filter((function(e){return!e.isAnswer&&e.distanceToAnswer})).map((function(e){var t;return{line:[new Je.LatLng(e.position.latitude,e.position.longitude),new Je.LatLng(i.position.latitude,i.position.longitude)],label:null===(t=e.distanceToAnswer)||void 0===t?void 0:t.toFixed(ot(e.distanceToAnswer))}}));return r.a.createElement(tt.a,{center:[0,0],zoom:1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,scrollWheelZoom:!0,className:l},r.a.createElement(nt.a,{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.svg"}),a&&r.a.createElement(st,{handleUpdate:a}),o&&o.map((function(e){var t=e.line,n=e.label;return r.a.createElement(at.a,{key:t.toString(),positions:t,color:"#393d4e",weight:2},n&&r.a.createElement(rt.a,{className:"distance-label",direction:"center",permanent:!0},n," km"))})),n.length&&r.a.createElement(ut,{markers:n},n.map((function(e){var t=e.position,n=e.label,a=e.radiusInKilometres;return a?r.a.createElement(lt.a,{center:[t.latitude,t.longitude],radius:1e3*a,key:t.latitude},n&&r.a.createElement(rt.a,{direction:"center",permanent:!0},n)):r.a.createElement(Xe.a,{alt:"position marker",position:[t.latitude,t.longitude],key:t.latitude},n&&r.a.createElement(rt.a,{direction:"bottom",offset:[-15,20],permanent:!0},n))}))))}),(function(e,t){return Object(it.a)(e.markers,t.markers)}));function dt(e){var t=e.usedQuestionRound,n=e.isSpectator,a=e.playerId,l=e.players,i=e.className,o=t.question.type;if(!t||o!==P.GEO)return null;var s=t.guesses.find((function(e){return e.playerId===a})),u=(null===s||void 0===s?void 0:s.guess.geo)?[{position:s.guess.geo,label:"You",distanceToAnswer:s.difference}]:[];return(n||t.isOver&&t.isShowdown)&&u.push.apply(u,Object(Y.a)(t.guesses.reduce((function(e,r){var i=r.guess,o=r.playerId,s=r.difference;if(i.geo&&a!==o&&(n||!Qe(t,o))){var u,c=(null===(u=l.find((function(e){return e.id===o})))||void 0===u?void 0:u.name)||"";e.push({position:i.geo,label:c,distanceToAnswer:s})}return e}),[]))),Be(t)&&t.question.answer.geo&&u.push({position:t.question.answer.geo,label:r.a.createElement(Se.a,{className:"text-green-500 text-2xl"}),isAnswer:!0,radiusInKilometres:t.question.answer.geo.toleranceRadius}),r.a.createElement(ct,{className:i,markers:u})}n(160);function mt(e){var t,n=e.usedQuestionRound,a=e.handleClick,l=e.guess;if(n.question.type!==P.MULTIPLE_CHOICE)return null;if(4!==(null===(t=n.question.alternatives)||void 0===t?void 0:t.length))throw new Error("missing alternatives for multiple choice question");var i=n.question.alternatives.map((function(e){var t;return{value:e,active:!(null===(t=n.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})),o=Be(n),s=n.question.answer.numerical;return r.a.createElement("div",{className:"mc-container my-2"},i.map((function(e,t){var n="text-center border-2 border-blue-600 rounded-lg shadow px-4 py-3 font-bold focus:outline-none";return a||(n+=" no-pointer"),e.active&&a?(n+=" hover:bg-blue-600 hover:text-white",n+=l===t?" text-white bg-blue-600":" text-blue-600"):n+=" text-blue-600",r.a.createElement("button",{key:"".concat(e.value,"_").concat(t),className:n,onClick:function(){return a&&a(t)},disabled:!e.active||o&&t!==s},e.value)})))}n(161);var pt=function(e){var t,n,a=e.game,l=e.usedQuestionRound,i=e.currentBettingRound,o=e.playerId,s=e.isSpectator,u=(null===l||void 0===l?void 0:l.question.type)===P.GEO,c=(null===l||void 0===l?void 0:l.question.type)===P.MULTIPLE_CHOICE,d=l&&a.players&&Me(l,a.players),m=function(e){if(e.isOver)return e.players.reduce((function(e,t,n){return 0===n?e:e[0].money<t.money?[t]:e[0].money===t.money?[].concat(Object(Y.a)(e),[t]):e}),[e.players[0]]).map((function(e){return e.id}))}(a)||[];return r.a.createElement("div",{className:"flex flex-col items-center"},u&&r.a.createElement(Ve,{game:a,usedQuestionRound:l}),r.a.createElement("div",{className:"relative w-full md:w-4/5 my-6"},r.a.createElement("div",{className:"poker-table ".concat(u?"md:p-0 md:overflow-hidden":"md:px-48 md:py-24"," rounded-full flex md:justify-center flex-col-reverse md:flex-col md:items-center md:w-full md:border-8 md:border-white md:shadow-xl")},r.a.createElement("div",{className:"grid gap-y-6 mt-7 px-5 md:mt-0 md:px-0"},a.players.map((function(e,t){var n,u=((null===(n=l.results)||void 0===n?void 0:n.find((function(t){var n=t.playerId;return e.id===n})))||{}).changeInMoney,c=!(!l||!Qe(l,e.id)),p=l.guesses.find((function(t){return t.playerId===e.id}));return r.a.createElement(_e,Object.assign({key:e.id},{player:e,index:t,numberOfPlayers:a.players.length,currentBettingRound:i,changeInMoney:u,isAppPlayer:e.id===o,isTurnPlayer:e.id===(null===i||void 0===i?void 0:i.currentPlayer.id),isQuestionRoundOver:!!(null===l||void 0===l?void 0:l.isOver),isShowdown:!!(null===l||void 0===l?void 0:l.isShowdown),hasFolded:c,isSpectator:s,allPlayersPlacedTheirGuess:d,guess:p,question:l.question,isWinningPlayer:m.includes(e.id),isGameOver:a.isOver}))}))),r.a.createElement("div",{className:"flex flex-col gap-2 justify-center items-center w-full h-full"},!u&&r.a.createElement("div",null,r.a.createElement(Ye,{usedQuestionRound:l,isGameFull:12===a.players.length}),r.a.createElement(Ve,{game:a,usedQuestionRound:l})),u&&r.a.createElement("div",{className:"flex flex-col-reverse w-full"},r.a.createElement(dt,{usedQuestionRound:l,isSpectator:s,playerId:o,players:a.players,className:"map"}),r.a.createElement(Ye,{usedQuestionRound:l,isGameFull:12===a.players.length})),c&&r.a.createElement(mt,{usedQuestionRound:l,alternatives:(null===l||void 0===l||null===(t=l.question.alternatives)||void 0===t?void 0:t.map((function(e){var t;return{value:e,active:!(null===(t=l.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})))||[],guess:null===l||void 0===l||null===(n=l.guesses.find((function(e){return e.playerId===o})))||void 0===n?void 0:n.guess.numerical})))))};function ft(e){var t=e.handleSubmit,n=Object(a.useState)(""),l=Object(v.a)(n,2),i=l[0],o=l[1];return r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:i,onChange:function(e){var t=parseFloat(e.target.value);o(0===t?0:t||e.target.value)},onKeyUp:function(e){13===e.which&&(t(i),o(""))},type:"number",className:"bg-white border border-gray-400 px-4",placeholder:"Your answer","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:"string"===typeof i||!i&&0!==i,onClick:function(){t(i),o("")}},"Submit"),r.a.createElement("p",{className:"-mt-2 text-sm h-2"},r.a.createElement(ae,{guess:{numerical:"number"===typeof i?i:parseFloat(i||"")},questionType:P.NUMERICAL}))))}var bt=function(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(v.a)(n,2),i=l[0],o=l[1],s=function(e){if(e){var n=parseInt(e.replaceAll("-",""));n&&(t(n),o(void 0))}};return r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:i,onChange:function(e){o(e.target.value)},onKeyUp:function(e){13===e.which&&s(i)},type:"date",className:"bg-white border border-gray-400 px-4",placeholder:"Your answer","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!i,onClick:function(){s(i)}},"Submit"))},vt=function(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(v.a)(n,2),i=l[0],o=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,{handleOnClick:function(e){o(e)}}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){i&&(t(i),o(void 0))},disabled:!(null===i||void 0===i?void 0:i.latitude)||!i.longitude},"Submit"))};function gt(e){var t=e.usedQuestionRound,n=e.handleSubmit,l=e.alternatives,i=Object(a.useState)(),o=Object(v.a)(i,2),s=o[0],u=o[1];if(4!==(null===l||void 0===l?void 0:l.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt,{usedQuestionRound:t,handleClick:u,guess:s}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){(s||0===s)&&(n(s),u(void 0))},disabled:!s&&0!==s},"Submit"))}function ht(e){var t=e.currentQuestionRound,n=e.player,a=e.addGuessMutation,l=e.game,i=e.showAnswerDrawer,o=e.setShowAnswerDrawer,s=e.hasPlayerPlacedGuessInCurrentQuestionRound;if(!n||n.isDead)return null;var u=function(e){!e&&0!==e||"number"!==typeof e||(He(a,l,{numerical:e},n.id),o(!1))},c=function(e){He(a,l,{geo:e},n.id),o(!1)};return r.a.createElement(xe,{onClose:function(){o(!1)},anchor:"bottom",open:(i||1===l.questionRounds.length)&&!s,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},t.question.question),r.a.createElement("p",{className:"mt-4 text-sm"},"Your answer"),function(){var e;switch(t.question.type){case P.NUMERICAL:return r.a.createElement(ft,{handleSubmit:u});case P.DATE:return r.a.createElement(bt,{handleSubmit:u});case P.GEO:return r.a.createElement(vt,{handleSubmit:c});case P.MULTIPLE_CHOICE:var n=null===(e=t.question.alternatives)||void 0===e?void 0:e.map((function(e){return{value:e,active:!0}}));return r.a.createElement(gt,{usedQuestionRound:t,alternatives:n,handleSubmit:u});default:throw new Error("Unknow Question Type")}}()))}function Et(e){var t=e.text,n=e.handleOnClick,a=e.isDisabled;return r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-3 md:px-4 md:py-3 transition duration-300 ease-in-out hover:bg-blue-600 w-full text-xs md:text-base",onClick:n,disabled:a},t)}function yt(e){var t,n=e.currentBettingRound,l=e.game,i=e.handleRaise,o=e.placeBet,s=e.playerId,u=e.showRaiseDrawer,c=e.setShowRaiseDrawer,d=Fe(n,s),m=null===(t=l.players.find((function(e){return e.id===s})))||void 0===t?void 0:t.money,p=Object(a.useState)(d),f=Object(v.a)(p,2),b=f[0],g=f[1],h=function(){i(b,o,l,s),c(!1)};return r.a.createElement(xe,{title:"Raise",anchor:"bottom",open:u,onClose:function(){c(!1)},variant:"temporary",className:"drawer"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Raise by how much?"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:b,onChange:function(e){g(Math.round(parseFloat(e.target.value)))},onKeyUp:function(e){13===e.which&&h()},type:"number",pattern:"[0-9]",min:d,max:m,className:"bg-white border border-gray-400 px-4",placeholder:"Amount to raise","aria-label":"Amount to raise","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{disabled:!!m&&(b<d||b>m),className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:h},"Submit")),r.a.createElement("div",{className:"flex"},m&&r.a.createElement(r.a.Fragment,null,[5,10,20,50].filter((function(e){return e<m})).map((function(e){return r.a.createElement("span",{key:e,style:{cursor:"pointer"},onClick:function(){return g(e)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},e)})),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return g(m)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},"All in")))))}function xt(e){var t=e.game,n=e.usedQuestionRound,l=e.currentBettingRound,i=e.playerId,o=e.placeBet,s=e.isAppPlayerTurn,u=Object(a.useState)(!1),c=Object(v.a)(u,2),d=c[0],m=c[1];if(!n||!l)return null;var p=t.players.find((function(e){return e.id===i})),f=Fe(l,i);return r.a.createElement("div",{className:"grid md:grid-cols-3 gap-3 md:gap-4"},r.a.createElement(Et,{text:f>0?"Call for ".concat(f):"Check",handleOnClick:function(){!function(e,t,n){var a,r,l=Le(t),i=Ge(l);if(l&&(null===i||void 0===i?void 0:i.currentPlayer.id)===n){var o=Fe(i,n),s=null!==(a=null===(r=t.players.find((function(e){return e.id===n})))||void 0===r?void 0:r.money)&&void 0!==a?a:0;e({variables:{input:{gameId:t.id,playerId:n,amount:Math.min(o,s)}}})}}(o,t,i)},isDisabled:!s}),r.a.createElement(Et,{text:"Raise",handleOnClick:function(){m(!0)},isDisabled:(null===p||void 0===p?void 0:p.money)&&f>=(null===p||void 0===p?void 0:p.money)||!s}),r.a.createElement(Et,{text:"Fold",handleOnClick:function(){!function(e,t,n){var a=Le(t),r=Ge(a);a&&(null===r||void 0===r?void 0:r.currentPlayer.id)===n&&e({variables:{input:{gameId:t.id,playerId:n,amount:-1}}})}(o,t,i)},isDisabled:!s}),r.a.createElement(yt,{game:t,placeBet:o,playerId:i,currentBettingRound:l,handleRaise:Ue,showRaiseDrawer:d,setShowRaiseDrawer:m}))}var wt,Nt=function(e){var t,n,a,l=e.game,i=e.usedQuestionRound,o=e.player,s=e.placeBet,u=e.hasPlayerPlacedGuessInCurrentQuestionRound,c=e.setShowAnswerDrawer,d=e.currentBettingRound,m=(null===d||void 0===d?void 0:d.currentPlayer.id)===o.id&&Me(i,l.players),p=i.guesses.find((function(e){return e.playerId===o.id})),f=null!==(t=null===(n=l.players.find((function(e){return e.id===o.id})))||void 0===n?void 0:n.money)&&void 0!==t?t:0,b=d&&De(d,o.id)||0;i.isOver&&o.id&&d&&(f+=b);var v=i.question.type,g=((null===i||void 0===i||null===(a=i.results)||void 0===a?void 0:a.find((function(e){var t=e.playerId;return o.id===t})))||{}).changeInMoney,h=void 0===g?0:g,E=i&&l.players&&Me(i,l.players);return r.a.createElement("footer",{className:"fixed shadow-top-md bottom-0 left-0 w-full h-44 bg-gray-200 px-4 flex flex-col items-center justify-end z-1003"},r.a.createElement("div",{className:"w-full flex flex-col items-end md:items-center justify-center max-w-xl my-auto"},r.a.createElement("div",{className:"absolute left-4 md:left-10 top-0 flex flex-col items-center max-w-2xs text-center"},r.a.createElement("span",{className:"absolute shadow-top-md top-0 h-20 w-20 -mt-10 rounded-full flex items-center justify-center text-4xl ".concat(i.isOver&&h>0?"bg-green-500":"bg-gray-400"," ").concat(i.question.type===P.GEO?"left-0":"")},r.a.createElement(Te,{player:o,isQuestionRoundOver:i.isOver,isTurnPlayer:!i.isOver&&o.id===(null===d||void 0===d?void 0:d.currentPlayer.id),hasFolded:!(!i||!Qe(i,o.id)),changeInMoney:h,allPlayersPlacedTheirGuess:E,playerHasPlacedTheirGuess:!!p})),v!==P.GEO&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-xs mt-12"},"Your Answer"),r.a.createElement("span",{className:"text-2xl overflow-hidden max-h-24"},p&&r.a.createElement(ae,{guess:p.guess,questionType:v,alternatives:i.question.alternatives})))),r.a.createElement("div",{className:"flex items-center ".concat(i.isOver?"flex-col":"md:flex-col")},r.a.createElement("div",{className:"flex flex-col items-center mr-3 sm:mr-5 md:mr-0"},r.a.createElement("p",{className:"text-xs"},"Available money"),r.a.createElement("div",{className:"flex items-center mb-6 text-2xl"},r.a.createElement(je.b,{className:"mx-1"}),r.a.createElement("span",null,f),0!==h&&r.a.createElement("span",{className:"ml-2 ".concat(h>0?"text-green-500":"text-red-500")},"(",h>0?"+":"",h,")"))),!u&&l.questionRounds.length>1&&r.a.createElement("button",{className:"new-question-button bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-2 md:px-4 md:py-3 text-xs md:text-base transition duration-300 ease-in-out hover:bg-blue-600 mx-auto",onClick:function(){c(!0)}},"Answer New Question"),u&&o.id&&r.a.createElement(xt,{game:l,usedQuestionRound:i,currentBettingRound:d,placeBet:s,playerId:o.id,isAppPlayerTurn:m}))))},Ot=n(117),It=n.n(Ot),jt=function(e){var t=e.gameId,n=e.playerId,a=e.gameHasStarted,l=e.setPlayerId,i=Object(g.b)(U,{onError:H,onCompleted:function(){t&&(!function(e){localStorage.removeItem("".concat(oe,"_").concat(e))}(t),l(void 0))}}),o=Object(v.a)(i,1)[0];if(!t||!n)return null;return r.a.createElement(ve,{onConfirm:function(){o({variables:{playerId:n,gameId:t}})},dialogTitle:r.a.createElement(r.a.Fragment,null,"Are you sure?",a&&r.a.createElement("p",null,"If you leave the game, you cannot join again later.")),confirmLabel:"Leave Game",buttonLabel:r.a.createElement(It.a,null),btnClassName:"leave-game btn btn-link btn-lg"})},Ct=n.p+"static/media/turn-notification.e2e956ce.mp3",kt=n.p+"static/media/turn-alert.11acdad1.wav",St=(n(166),function(e){window.navigator.vibrate&&window.navigator.vibrate(e)});var Rt=function(){var e=Object(a.useState)(void 0),t=Object(v.a)(e,2),n=t[0],l=t[1],i=Object(a.useState)(void 0),o=Object(v.a)(i,2),s=o[0],u=o[1],c=Le(s),d=Ge(c),m=Object(a.useState)(!1),p=Object(v.a)(m,2),f=p[0],h=p[1],E=Object(a.useState)(!1),y=Object(v.a)(E,2),x=y[0],w=y[1],N=Object(b.h)().gameId,O=Object(a.useState)(),I=Object(v.a)(O,2),j=I[0],C=I[1],k=Object(a.useState)(new Audio(Ct)),S=Object(v.a)(k,1)[0],R=Object(a.useState)(new Audio(kt)),P=Object(v.a)(R,1)[0],q=function(e){H(e),C(e)},A=Object(g.a)(L,{fetchPolicy:"cache-and-network",onError:q,onCompleted:function(e){var t=e.game;u(t)}}),T=Object(v.a)(A,1)[0],D=Object(g.b)(M,{onError:q}),U=Object(v.a)(D,2),$=U[0],_=U[1].data,Y=Object(g.b)(F,{onError:q}),K=Object(v.a)(Y,1)[0],z=Object(g.b)(Q,{onError:q}),W=Object(v.a)(z,1)[0],V=Object(g.b)(B,{onError:q}),J=Object(v.a)(V,1)[0],Z=Object(g.c)(G,{variables:{gameId:N,hash:ce(N)||ue(N)},onSubscriptionData:function(e){var t,a,r=e.subscriptionData;clearInterval(wt);var l=null===(t=r.data)||void 0===t?void 0:t.gameUpdated;u(l);var i=Le(l),o=Ge(i),s=null===(a=r.data)||void 0===a?void 0:a.gameUpdated.players,c=i&&s&&Me(i,s);c&&w(!1),!(null===l||void 0===l?void 0:l.isOver)&&(null===o||void 0===o?void 0:o.currentPlayer.id)===n&&c&&(S.play(),St(200),wt=setInterval((function(){P.play(),St(200)}),15e3))}}).error;if(Object(a.useEffect)((function(){Z&&q(Z)}),[Z]),Object(a.useEffect)((function(){T({variables:{gameId:N}})}),[T,N]),Object(a.useEffect)((function(){if(N){var e,t=function(e){return localStorage.getItem("".concat(oe,"_").concat(e))}(N),n=null===_||void 0===_||null===(e=_.addPlayer)||void 0===e?void 0:e.id;t&&l(t),n&&(!function(e,t){localStorage.setItem("".concat(oe,"_").concat(e),t)}(N,n),l(n))}}),[N,_]),!s)return r.a.createElement("h3",null,"Loading...");if(j)return r.a.createElement("p",null,"A technical error occurred. Try to refresh the page");var X=s.players.find((function(e){return e.id===n})),ee=!!(null===c||void 0===c?void 0:c.guesses.find((function(e){return e.playerId===n}))),te=!!s.questionRounds.length,ne=te&&(!X||X.isDead),ae=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-(e.isOver?1:2)]}(s),re=!!ae&&(s.isOver||!ee&&!ne||ne&&!!c&&!x&&!Me(c,s.players))?ae:c;return r.a.createElement("div",{className:"p-2 flex flex-col md:justify-center ".concat(ne||!te?"min-h-screen":"min-h-screen-minus-52 mb-52")},r.a.createElement("a",{href:"/",className:"mr-auto text-3xl font-bold"},"Certainty Poker"),r.a.createElement("div",{className:"flex flex-col md:my-auto"},!te&&r.a.createElement(Oe,{players:s.players,gameLink:window.location.href,startGame:K,gameId:s.id,createPlayer:$,playerId:n,setNames:s.setNames}),te&&re&&r.a.createElement(pt,{game:s,usedQuestionRound:re,currentBettingRound:d,playerId:n,isSpectator:ne}),ne&&(null===re||void 0===re?void 0:re.isOver)&&!s.isOver&&r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mx-auto mt-5",onClick:function(){w(!0)}},"Show Next Question")),c&&n&&r.a.createElement(ht,{game:s,addGuessMutation:J,currentQuestionRound:c,player:X,showAnswerDrawer:f,setShowAnswerDrawer:h,hasPlayerPlacedGuessInCurrentQuestionRound:ee}),!s.isOver&&X&&!ne&&re&&r.a.createElement(Nt,{game:s,usedQuestionRound:re,placeBet:W,player:X,startGame:K,hasPlayerPlacedGuessInCurrentQuestionRound:ee,setShowAnswerDrawer:h,currentBettingRound:d}),r.a.createElement(jt,{gameId:N,playerId:n,gameHasStarted:te,setPlayerId:l}))};n(167);function Pt(){return r.a.createElement("p",null,"Page not found.")}var qt=function(){return r.a.createElement("div",{className:"bg-gray-50 dark:bg-gray-700 min-h-screen"},r.a.createElement("div",{id:"app",className:"mx-auto max-w-full sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl"},r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",component:ie,exact:!0}),r.a.createElement(b.a,{path:"/:gameId",component:Rt,exact:!0}),r.a.createElement(b.a,{path:"/questions/:setName",component:ie,exact:!0}),r.a.createElement(b.a,{component:Pt}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var At="s://certainty-poker.herokuapp.com",Tt=(n(168),new d.a({uri:"http".concat(At,"/query")})),Dt=new c.a({uri:"ws".concat(At,"/query"),options:{reconnect:!0}}),Lt=Object(m.d)((function(e){var t=e.query,n=Object(p.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),Dt,Tt),Gt=new s.c({link:Lt,cache:new f.a});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{client:Gt},r.a.createElement(o.a,null,r.a.createElement(qt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[177,1,2]]]);
//# sourceMappingURL=main.9e33cf8a.chunk.js.map