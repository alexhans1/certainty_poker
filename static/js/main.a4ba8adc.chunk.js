(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{154:function(e,t){},156:function(e,t){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(14),o=n.n(l),i=n(43),s=n(51),c=n(22),u=n(133),m=n(136),d=n(27),p=n(5),b=n(135),f=n(41),g=n(8),v=n(31),h=n(36),E=n(240),y=n.n(E);function x(){var e=Object(h.a)(["\n  mutation revealGuess($gameId: ID!, $playerId: ID!) {\n    revealGuess(gameId: $gameId, playerId: $playerId)\n  }\n"]);return x=function(){return e},e}function w(){var e=Object(h.a)(["\n  mutation removePlayer($gameId: ID!, $playerId: ID!) {\n    removePlayer(gameId: $gameId, playerId: $playerId)\n  }\n"]);return w=function(){return e},e}function N(){var e=Object(h.a)(["\n  mutation addGuess($input: GuessInput!) {\n    addGuess(input: $input)\n  }\n"]);return N=function(){return e},e}function O(){var e=Object(h.a)(["\n  mutation placeBet($input: BetInput!) {\n    placeBet(input: $input)\n  }\n"]);return O=function(){return e},e}function I(){var e=Object(h.a)(["\n  mutation startGame($gameId: ID!) {\n    startGame(gameId: $gameId)\n  }\n"]);return I=function(){return e},e}function j(){var e=Object(h.a)(["\n  mutation addPlayer($input: PlayerInput!) {\n    addPlayer(input: $input) {\n      id\n      money\n      name\n    }\n  }\n"]);return j=function(){return e},e}function C(){var e=Object(h.a)(["\n  subscription GameUpdated($gameId: ID!, $hash: String!) {\n    gameUpdated(gameId: $gameId, hash: $hash) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n        revealedGuesses\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return C=function(){return e},e}function S(){var e=Object(h.a)(["\n  query findGame($gameId: ID!) {\n    game(gameId: $gameId) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n        revealedGuesses\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return S=function(){return e},e}function k(){var e=Object(h.a)(["\n  query sets($setName: String) {\n    sets(setName: $setName) {\n      setName\n      numberOfQuestions\n      language\n    }\n  }\n"]);return k=function(){return e},e}function R(){var e=Object(h.a)(["\n  mutation uploadQuestions(\n    $questions: [QuestionInput!]!\n    $setName: String!\n    $isPrivate: Boolean!\n    $language: String!\n  ) {\n    uploadQuestions(\n      questions: $questions\n      setName: $setName\n      isPrivate: $isPrivate\n      language: $language\n    )\n  }\n"]);return R=function(){return e},e}function P(){var e=Object(h.a)(["\n  mutation createGame($setNames: [String!]!) {\n    createGame(setNames: $setNames) {\n      id\n    }\n  }\n"]);return P=function(){return e},e}var q=y()(P()),A=y()(R()),T=y()(k()),D=y()(S()),G=y()(C()),L=y()(j()),M=y()(I()),F=y()(O()),Q=y()(N()),B=y()(w()),U=y()(x()),$=n.p+"static/media/landing-page-image-1.6f6715eb.webp",H=n.p+"static/media/landing-page-image-2.b9e7983b.webp",Y=n.p+"static/media/landing-page-image-3.e88c71cd.webp",_=n.p+"static/media/landing-page-image-4.4442528d.webp",z=n.p+"static/media/landing-page-image-phone.bec793b4.webp";function K(){return r.a.createElement("div",{className:"grid grid-cols-3 gap-4 grid-flow-row-dense py-4 md:pb-12 h-full relative lg:overflow-hidden"},r.a.createElement("div",{className:"col-span-2 row-span-3 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:Y,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-1 row-span-2 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:_,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-2 row-span-3 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:$,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-1 row-span-5 rounded-tl-lg rounded-br-full flex justify-center items-center p-5 bg-blue-200"}),r.a.createElement("div",{className:"col-span-2 row-span-2 overflow-hidden rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:H,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"absolute rounded-2xl h-3/4 w-2/3 self-center justify-self-center flex justify-center"},r.a.createElement("img",{src:z,className:"rounded-xl h-full",alt:"background"})))}var W,V,J=n(47),Z=n(50),X=n.n(Z),ee=n(70),te=n(82),ne=n(49),ae=n(214),re=n(212),le=n(114);!function(e){e.GEO="GEO",e.NUMERICAL="NUMERICAL",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE",e.DATE="DATE"}(W||(W={})),function(e){e.CHECKED="CHECKED",e.CALLED="CALLED",e.RAISED="RAISED"}(V||(V={}));var oe={GB:"English",FR:"French",ES:"Spanish",CN:"Chinese",DE:"German",ZA:"Africaans",AL:"Albanian",DZ:"Algerian",SA:"Arab",AM:"Armenian",BD:"Bangladeshi",BG:"Bulgarian",KH:"Cambodian",HR:"Croatian",CZ:"Czech",DK:"Danish",NL:"Dutch",EE:"Estonian",FI:"Finnish",GR:"Greek",IL:"Hebrew",HU:"Hungarian",IN:"Indian",IT:"Italian",JP:"Japanese",KR:"Korean",LV:"Latvian",LT:"Lithuanian",MY:"Malaysian",MN:"Mongolian",NO:"Norwegian",PL:"Polish",BR:"Portuguese",RO:"Romanian",RU:"Russian",RS:"Serbian",SK:"Slovakian",SI:"Slovenian",SE:"Swedish",TH:"Thai",TR:"Turkish",VN:"Vietnamese"};var ie=n(116),se=n.n(ie);function ce(e){var t,n,a,l=e.guess,o=e.questionType,i=e.alternatives;if(!l)return null;switch(o){case W.NUMERICAL:var s="number"===typeof l.numerical?l.numerical:parseFloat(l.numerical||"");return isNaN(s)?null:r.a.createElement("span",null,(new Intl.NumberFormat).format(s));case W.DATE:return l.numerical?r.a.createElement("span",null,se()(l.numerical.toString(),"YYYYMMDD").format("MMM DD, YYYY")):null;case W.GEO:return r.a.createElement("span",null,"[".concat(null===(t=l.geo)||void 0===t?void 0:t.latitude,", ").concat(null===(n=l.geo)||void 0===n?void 0:n.longitude,"]"));case W.MULTIPLE_CHOICE:if(4!==(null===i||void 0===i?void 0:i.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement("span",null,i[null!==(a=l.numerical)&&void 0!==a?a:-1]);default:throw new Error("Invalid question type")}}var ue=function(e){var t=e.open,n=e.handleClose,l=e.fetchSets,o=e.setSelectedSets,i=e.setShownLanguage,s=Object(f.f)(),c=Object(a.useState)(!0),u=Object(g.a)(c,2),m=u[0],d=u[1],p=Object(a.useState)(),b=Object(g.a)(p,2),h=b[0],E=b[1],y=Object(a.useState)(""),x=Object(g.a)(y,2),w=x[0],N=x[1],O=Object(a.useState)(0),I=Object(g.a)(O,2),j=I[0],C=I[1],S=Object(a.useState)(),k=Object(g.a)(S,2),R=k[0],P=k[1],q=Object(a.useState)(),T=Object(g.a)(q,2),D=(T[0],T[1]),G=Object(v.b)(A,{variables:{setName:w,questions:h,isPrivate:!!j,language:R},onCompleted:function(){j?s.push("/questions/".concat(w)):l(),o([w]),i(R||"GB"),n(),N(""),E(void 0),d(!0)},onError:function(e){D((function(){throw e}))}}),L=Object(g.a)(G,2),M=L[0],F=L[1].error,Q=m?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-3"},"An example of the file format can be found"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900",target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/spreadsheets/d/1_cUrvCc3R2qTL_ME-A9wc9HmyH-zoAQkRnBs80dOPb8/edit?usp=sharing"},"here"),"."),r.a.createElement(le.a,{onDrop:function(e){d(!1),E(function(e){return e.map((function(e){var t,n=e.data,a=n.question,r=n.type,l=n.answer,o=n.latitude,i=n.longitude,s=n.toleranceRadius,c=n.hint1,u=n.hint2,m=n.explanation,d=n.multiple_choice_alternative1,p=n.multiple_choice_alternative2,b=n.multiple_choice_alternative3,f=[c,u].filter(Boolean),g={};switch(r){case W.NUMERICAL:case W.DATE:g.numerical=l;break;case W.GEO:g.geo={latitude:o,longitude:i,toleranceRadius:s};break;case W.MULTIPLE_CHOICE:g.numerical=0,t=[l,d,p,b];break;default:throw new Error("invalid question type")}return{question:a,type:r,answer:g,hints:f,explanation:m,alternatives:t}}))}(e))},onError:function(e,t,n,a){console.error(e)},config:{header:!0},addRemoveButton:!0,removeButtonColor:"#659cef"},r.a.createElement("span",null,"Drop CSV file here or click to upload."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("input",{value:w,onChange:function(e){N(e.target.value)},type:"text",className:"rounded-md bg-white border border-gray-400 px-4 py-2 mr-4",placeholder:"Name for the question set","aria-label":"Name for the question set",required:!0,autoFocus:!0}),r.a.createElement("select",{className:"rounded-md bg-white border border-gray-400 px-4 py-2",required:!0,value:R,onChange:function(e){P(e.target.value)}},r.a.createElement("option",{selected:!0},"Language..."),Object.keys(oe).map((function(e){return r.a.createElement("option",{key:e,value:e},Object(te.a)(e)," ",oe[e])})))),r.a.createElement("h3",{className:"text-2xl mb-3 mt-5"},"Review your upload:"),r.a.createElement("hr",null),(h||[]).map((function(e){var t,n,a;return r.a.createElement("div",{key:e.question,className:"small"},r.a.createElement("p",{className:"my-3"},"Question: ",r.a.createElement("b",null,e.question)),e.type!==W.MULTIPLE_CHOICE&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"my-3"},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(ce,{guess:e.answer,questionType:e.type,alternatives:e.alternatives}))),(null===(t=e.answer.geo)||void 0===t?void 0:t.toleranceRadius)&&r.a.createElement("p",{className:"my-3"},"Tolerance radius in km: ",r.a.createElement("b",null,e.answer.geo.toleranceRadius))),!!(null===(n=e.hints)||void 0===n?void 0:n.length)&&r.a.createElement("p",{className:"my-3"},"Hints:"," ",e.hints.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",null,e)))}))),!!(null===(a=e.alternatives)||void 0===a?void 0:a.length)&&r.a.createElement("p",{className:"my-3"},"Alternatives:"," ",e.alternatives.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",{className:0===t?"text-green-500":""},e)))}))),e.explanation&&r.a.createElement("p",{className:"my-3"},"Explanation: ",r.a.createElement("b",null,e.explanation)),r.a.createElement("hr",{className:"my-3"}))})),r.a.createElement("div",{className:"flex"},r.a.createElement("input",{type:"checkbox",className:"mt-2",id:"isPrivateCheckbox",value:j,onChange:function(){C(j?0:1)}}),r.a.createElement("label",{className:"ml-2",htmlFor:"isPrivateCheckbox"},"Questions are private",r.a.createElement("br",null),r.a.createElement("span",null,"If checked, this set of questions will not appear in the list on the start screen."))),r.a.createElement("div",{className:"flex mt-3"},r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!w||!R,onClick:function(){M()}},"Upload"),r.a.createElement("button",{className:"border-2 boder-gray-800 rounded-lg font-bold hover:text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-gray-800 ml-3",onClick:function(){d(!0)}},"Upload new file")));return r.a.createElement(ae.a,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:t,className:"flex justify-center items-center p-5",onClose:n,closeAfterTransition:!0,BackdropComponent:re.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:"flex py-6 px-6 md:px-8 my-2 md:my-6 mx-2 md:mx-6 lg:mx-10 max-h-full bg-white rounded-md focus:outline-none"},r.a.createElement("div",{className:"overflow-y-auto flex-shrink-0 max-w-full flex flex-col"},r.a.createElement("h3",{className:"text-2xl mb-2"},"Upload a CSV file with custom questions"),Q,F&&r.a.createElement("div",{className:"alert alert-danger"},F.message))))},me=n(44);var de=function(e){var t=e.open,n=e.handleClose,a=e.children;return r.a.createElement(ae.a,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:t,className:"flex justify-center items-center p-5",onClose:n,closeAfterTransition:!0,BackdropComponent:re.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:"bg-white flex flex-col h-full relative rounded-md border border-gray-500 lg:w-2/3 md:w-3/4 overflow-y-auto py-5 px-8 focus:outline-none max-w-2xl"},r.a.createElement("button",{onClick:n,className:"absolute top-4 right-4"},r.a.createElement(me.e,null)),a))};n(173);var pe=function(e){var t=e.sets,n=e.open,l=e.handleClose,o=e.handleOpen,i=e.fetchSets,s=Object(f.f)(),c=Object(a.useState)(!1),u=Object(g.a)(c,2),m=u[0],d=u[1],p=Object(a.useState)([]),b=Object(g.a)(p,2),h=b[0],E=b[1],y=Object(a.useState)("GB"),x=Object(g.a)(y,2),w=x[0],N=x[1],O=Object(a.useState)([]),I=Object(g.a)(O,2),j=I[0],C=I[1],S=Object(a.useState)(),k=Object(g.a)(S,2),R=(k[0],k[1]);Object(a.useEffect)((function(){var e=t.reduce((function(e,t){return e.includes(t.language)||e.push(t.language),e}),[]).sort((function(e,t){return"GB"===e?-1:parseInt(e)-parseInt(t)}))||[];C(e),N(e.includes("GB")?"GB":e[0]),1===t.length&&E([t[0].setName])}),[t]);var P=Object(v.b)(q,{variables:{setNames:h},onCompleted:function(e){var t=e.createGame;s.push("/".concat(t.id))},onError:function(e){R((function(){throw e}))}}),A=Object(g.a)(P,2),T=A[0],D=A[1].loading,G="/"!==s.location.pathname,L=function(){var e=Object(ee.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.length&&T();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{open:n,handleClose:l},r.a.createElement("h2",{className:"text-2xl font-bold my-4"},"Select a set of questions to start a game"),G&&r.a.createElement("p",{className:"text-sm font-semibold my-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-xl"},"Make sure you copy and save this URL in order to start games with this question set at any time:",r.a.createElement("br",null),r.a.createElement("button",{onClick:Object(ee.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(window.location.href);case 2:case"end":return e.stop()}}),e)}))),className:"flex items-center text-blue-600 hover:text-blue-800 focus:outline-none font-bold"},window.location.href," ",r.a.createElement(ne.b,{className:"ml-2 text-lg"}))),r.a.createElement("p",{className:"my-2 font-semibold"},"Languages:"),r.a.createElement("div",{className:"flex mb-3"},j.map((function(e){return r.a.createElement("span",{key:e,className:"text-4xl mx-1 px-5 rounded-full border border-gray-800 hover:bg-gray-800 ".concat(e===w?"bg-gray-800":"opacity-50 hover:opacity-100"),onClick:function(){N(e)},style:{cursor:e===w?"default":"pointer"}},Object(te.a)(e))}))),Object.keys(oe).includes(w)&&r.a.createElement("p",{className:"mt-3 font-semibold"},oe[w]," question sets:"),r.a.createElement("div",{className:"set-container my-4"},t.filter((function(e){return e.language===w})).map((function(e){return r.a.createElement("span",{key:e.setName,className:"flex justify-center items-center rounded-md text-center px-4 py-3 border border-gray-800 hover:bg-gray-800 hover:text-white cursor-pointer ".concat((null===h||void 0===h?void 0:h.includes(e.setName))?"bg-gray-800 text-white":""),style:{gridColumn:"span ".concat(Math.round(Math.pow(e.setName.length,.35)))},onClick:function(t){t.metaKey?(null===h||void 0===h?void 0:h.includes(e.setName))?E(h.filter((function(t){return e.setName!==t}))):E([e.setName].concat(Object(J.a)(h))):E([e.setName])}},e.setName," (",e.numberOfQuestions,")")}))),r.a.createElement("p",{className:"mt-auto"},"You can also upload your own set of questions"," ",r.a.createElement("button",{onClick:function(){d(!0),l()},className:"text-blue-600 hover:text-blue-800 focus:outline-none font-bold"},"here"),"."),r.a.createElement("button",{className:"mt-3 bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mr-auto",onClick:L,disabled:!h.length},D?"Loading...":"Play for Free")),r.a.createElement(ue,{open:m,handleClose:function(){o(),d(!1)},setShownLanguage:N,setSelectedSets:E,fetchSets:i}))},be=n.p+"static/media/2021.503ecc25.png";var fe=function(e){var t=e.className,n=void 0===t?"":t,l=e.setName,o=Object(f.f)(),i=Object(a.useState)(),s=Object(g.a)(i,2),c=(s[0],s[1]),u=Object(v.b)(q,{variables:{setNames:[l]},onCompleted:function(e){var t=e.createGame;o.push("/".concat(t.id))},onError:function(e){c((function(){throw e}))}}),m=Object(g.a)(u,2),d=m[0],p=m[1].loading;return r.a.createElement("div",{className:"bg-yellow-200 relative text-lg rounded-2xl px-5 py-6 mr-auto max-w-sm ".concat(n)},r.a.createElement("p",null,r.a.createElement("b",{className:"text-2xl"},"2021 Quiz ")),r.a.createElement("p",{className:"mt-2"},"New question set with all 2021 trivia."," ",r.a.createElement("i",null,"News, pop culture, arts and sports."),r.a.createElement("br",null),"Do you remember what happened this past year?"),r.a.createElement("button",{className:"mt-6 bg-black rounded-full font-semi-bold text-white text-center px-6 py-3 transition duration-300 ease-in-out hover:text-black hover:bg-white border border-black focus:outline-none mr-auto",onClick:function(){d()}},p?"Loading...":"Start 2021 Quiz"),r.a.createElement("img",{className:"absolute bottom-3 right-3 transform -rotate-12",style:{width:"35%"},src:be,alt:"2021"}))};function ge(e){var t=e.sets,n=void 0===t?[]:t,l=(e.setName,e.fetchSets),o=Object(f.f)(),i=Object(a.useState)(!1),s=Object(g.a)(i,2),c=s[0],u=s[1];return Object(a.useEffect)((function(){"/"!==o.location.pathname&&u(!0)}),[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col justify-end h-full py-8 lg:pb-32 lg:pt-0"},r.a.createElement(fe,{setName:"2021 Quiz",className:"mb-8 lg:mb-auto lg:mt-5"}),r.a.createElement("h1",{className:"text-5xl"},r.a.createElement("span",{className:"font-light italic"},"You think you know things?"),r.a.createElement("br",null),"Let's make it interesting then!"),r.a.createElement("p",{className:"text-xl mt-3"},r.a.createElement("b",null,"Free")," poker-like trivia game."),r.a.createElement("button",{onClick:function(){u(!0)},className:"border border-blue-600 rounded-full font-bold text-3xl text-blue-600 hover:text-white text-center px-8 py-4 transition duration-300 ease-in-out hover:bg-blue-600 mt-8 mr-auto focus:outline-none"},"Create Game"),r.a.createElement("p",{className:"mt-10"},"Check out the rules"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900 p-0",href:"https://docs.google.com/document/d/13pwz8yzrPdY1DcQqXvhejJAxXdWdPrvxR6GUxg5PJPs/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer"},"here"),".")),r.a.createElement(pe,{sets:n,fetchSets:l,open:c,handleOpen:function(){u(!0)},handleClose:function(){u(!1)}}))}n(174);var ve=function(){var e=Object(f.g)().setName,t=Object(a.useState)(),n=Object(g.a)(t,2),l=(n[0],n[1]),o=Object(v.a)(T,{fetchPolicy:"no-cache",onError:function(e){l((function(){throw e}))},variables:{setName:e}}),i=Object(g.a)(o,2),s=i[0],c=i[1].data;return Object(a.useEffect)((function(){s()}),[s,e]),r.a.createElement("div",{className:"grid lg:grid-cols-2 gap-x-8 relative landing-page"},r.a.createElement(ge,{sets:null===c||void 0===c?void 0:c.sets,setName:e,fetchSets:s}),r.a.createElement(K,null))},he=n(46),Ee="player_id",ye="fingerprint",xe=function(e){localStorage.clear();var t=Math.random().toString(36).substring(2);return localStorage.setItem("".concat(ye,"_").concat(e),t),t},we=function(e){return localStorage.getItem("".concat(ye,"_").concat(e))};var Ne=function(e){var t=e.playerName;return r.a.createElement("div",{className:"rounded-xl border-2 px-3 h-16 w-36 flex items-center justify-center shadow"},r.a.createElement("span",{className:"overflow-hidden text-overflow-ellipsis"},t))},Oe=n(244),Ie=n(245),je=n(254);function Ce(e){var t=e.buttonLabel,n=e.dialogTitle,a=e.confirmLabel,l=e.onConfirm,o=e.isDisabled,i=e.btnClassName,s=r.a.useState(!1),c=Object(g.a)(s,2),u=c[0],m=c[1],d=function(){m(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:i||"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){m(!0)},disabled:o},t),r.a.createElement(Oe.a,{open:u,onClose:d},r.a.createElement("div",{className:"px-4 py-2"},r.a.createElement(je.a,null,n),r.a.createElement(Ie.a,null,r.a.createElement("button",{className:"btn btn-outline-dark",onClick:d},"Cancel"),r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){l(),m(!1)}},a)))))}var Se=function(e){var t=e.startGame,n=e.gameId,a=e.isDisabled;return r.a.createElement(Ce,{onConfirm:function(){t({variables:{gameId:n}})},dialogTitle:"Are you sure you want to start the game? Once it's started no more players can join.",confirmLabel:"Start Game",buttonLabel:"Start Game",isDisabled:a})},ke=n(20),Re=n(25),Pe=n(255);n(175);function qe(e){var t=e.children,n=e.onClose,a=Object(Re.a)(e,["children","onClose"]);return r.a.createElement(Pe.a,Object(ke.a)({},a),r.a.createElement("div",{className:"flex items-center flex-col bg-gray-200 py-4 min-h-52"},n&&r.a.createElement("span",{id:"drawer-close",className:"ml-auto mr-3 -mb-4 -mt-2",onClick:n},"\u2573"),r.a.createElement("div",{className:"container px-5 pb-5 flex flex-col md:max-w-screen-md"},t)))}function Ae(e){var t=e.createPlayer,n=e.gameId,l=e.playerId,o=Object(a.useState)(""),i=Object(g.a)(o,2),s=i[0],c=i[1],u=function(){l||t({variables:{input:{gameId:n,playerName:s}}})};return r.a.createElement(qe,{title:"Your name",anchor:"bottom",open:!l,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},"Enter your name"),r.a.createElement("p",{className:"mt-4 text-sm"},"Username"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:s,onChange:function(e){c(e.target.value)},onKeyUp:function(e){13===e.which&&u()},type:"text",className:"bg-white border border-gray-400 px-4",placeholder:"Your name","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",disabled:!s.length,className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:u},"Submit"))))}var Te,De=function(e){var t=e.players,n=e.gameLink,a=e.startGame,l=e.gameId,o=e.createPlayer,i=e.playerId,s=e.setNames;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col items-center font-semibold mt-4 px-5 mx-auto md:max-w-screen-md"},r.a.createElement("h5",null,"Share this link with friends who want to join the game"),r.a.createElement("div",{className:"flex items-center justify-between w-full break-all px-4 md:px-10 py-4 mt-4 bg-gray-200 rounded-md"},r.a.createElement("span",{className:"w-3/4"},n),r.a.createElement("button",{className:"text-blue-500 hover:text-blue-600 p-2 ripple focus:outline-none text-2xl",onClick:Object(ee.a)(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(window.location.href);case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(ne.b,null))),r.a.createElement("h4",{className:"mt-4 self-start text-lg"},"Question Set",s.length>1?"s":"",": ",s.join(", ")),r.a.createElement("p",{className:"mt-20 self-start"},"Players"),r.a.createElement("p",{className:"text-xs font-normal self-start w-full pb-2 border-b-2 border-grey-200"},12-t.length," Open spot",12-t.length===1?"":"s"),r.a.createElement("hr",null),r.a.createElement("div",{className:"mt-8 grid gap-8 w-full sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},t.map((function(e){return r.a.createElement(Ne,{key:e.id,playerName:null===e||void 0===e?void 0:e.name})}))),i&&r.a.createElement("div",{className:"mt-16 self-start"},r.a.createElement(Se,{startGame:a,gameId:l,isDisabled:t.length<=1}))),r.a.createElement(Ae,{gameId:l,createPlayer:o,playerId:i}))},Ge=n(40),Le=n(62),Me=n(253),Fe=n(101),Qe=n(125),Be=function(e){var t=e.tooltipTitle,n=e.children;return r.a.createElement(Me.a,{title:t},r.a.createElement("span",null,n))},Ue=(Te={},Object(Le.a)(Te,V.RAISED,r.a.createElement(Be,{tooltipTitle:"Raised"},r.a.createElement(ne.a,null))),Object(Le.a)(Te,V.CALLED,r.a.createElement(Be,{tooltipTitle:"Called"},r.a.createElement(ne.c,null))),Object(Le.a)(Te,V.CHECKED,r.a.createElement(Be,{tooltipTitle:"Checked"},r.a.createElement(ne.c,null))),Te);var $e=function(e){var t=e.player,n=e.isWinningPlayer,a=e.isQuestionRoundOver,l=e.changeInMoney,o=e.isDead,i=e.hasFolded,s=e.allPlayersPlacedTheirGuess,c=e.playerHasPlacedTheirGuess,u=e.isTurnPlayer,m=e.playerIsAllIn;if(o)return r.a.createElement(Be,{tooltipTitle:"Out"},r.a.createElement(me.d,null));if(i)return r.a.createElement(Be,{tooltipTitle:"Folded"},r.a.createElement(Ge.a,null));if(m)return r.a.createElement(Be,{tooltipTitle:"All in"},r.a.createElement(Ge.b,null));if(a)return n?r.a.createElement(Fe.a,null):l&&l>0?r.a.createElement(Fe.b,null):l&&l<0?r.a.createElement(me.c,null):null;if(!s)return c?r.a.createElement(Be,{tooltipTitle:"Already submitted guess"},r.a.createElement(me.b,null)):r.a.createElement(Be,{tooltipTitle:"Not yet submitted guess"},r.a.createElement(he.d,null));if(u)return r.a.createElement(Be,{tooltipTitle:"Player's turn"},r.a.createElement(me.a,{className:"text-red-600"}));var d=t.bettingState;return d&&Ue[d]?Ue[d]:r.a.createElement(Be,{tooltipTitle:"Waiting for turn"},r.a.createElement(Qe.a,null))},He=function(e,t){return e.bets.reduce((function(e,n){return e+(n.playerId===t?n.amount:0)}),0)},Ye=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-1]},_e=function(e){var t;return null===e||void 0===e?void 0:e.bettingRounds[(null===e||void 0===e||null===(t=e.bettingRounds)||void 0===t?void 0:t.length)-1]},ze=function(e,t){var n=t.filter((function(e){return!e.isDead}));return e.guesses.length>=n.length},Ke=function(e,t){if(!e.bets.length)return 0;var n=He(e,t),a=e.bets.reduce((function(e,t){return e[t.playerId]=(e[t.playerId]||0)+t.amount,e}),{});return Math.max.apply(Math,Object(J.a)(Object.values(a)))-n},We=function(e,t){return null===e||void 0===e?void 0:e.foldedPlayerIds.includes(t)},Ve=function(e){return!!e.isOver||(e.question.type===W.MULTIPLE_CHOICE?e.bettingRounds.length>=4:e.question.hints.length+1<e.bettingRounds.length)},Je=function(e,t,n,a){var r,l,o=Ye(n),i=_e(o);if(o&&(null===i||void 0===i?void 0:i.currentPlayer.id)===a){if(Ke(i,a)>e)throw new Error("Amount to call is greater than raised amount.");var s=null!==(r=null===(l=n.players.find((function(e){return e.id===a})))||void 0===l?void 0:l.money)&&void 0!==r?r:0;t({variables:{input:{gameId:n.id,playerId:a,amount:Math.min(e,s)}}})}},Ze=function(e,t,n,a){e({variables:{input:{gameId:t.id,playerId:a,guess:n}}})};var Xe=function(e){var t=e.playerId,n=e.gameId,l=Object(a.useState)(),o=Object(g.a)(l,2),i=(o[0],o[1]),s=Object(v.b)(U,{onError:function(e){i((function(){throw e}))}}),c=Object(g.a)(s,1)[0];return r.a.createElement(Me.a,{title:"Reveal Your Answer"},r.a.createElement("button",{className:"new-question-button rounded-lg font-bold text-center text-blue-500 px-2 py-2 text-xs md:text-base transition duration-300 ease-in-out hover:text-blue-700 mx-auto",onClick:function(){c({variables:{playerId:t,gameId:n}})}},r.a.createElement(he.c,{size:25})))},et=(n(176),[1,9,5,2,11,4,8,10,6,3,12,7]),tt=function(e){var t=e.gameId,n=e.player,a=e.index,l=e.numberOfPlayers,o=e.isTurnPlayer,i=e.isAppPlayer,s=e.isWinningPlayer,c=e.isQuestionRoundOver,u=e.isShowdown,m=e.currentBettingRound,d=e.changeInMoney,p=e.hasFolded,b=e.isSpectator,f=e.allPlayersPlacedTheirGuess,g=e.guess,v=e.question,h=e.isGameOver,E=e.isRevealingGuess,y=o&&!c?"isTurnPlayer":"",x=i?"bg-blue-200":"bg-gray-200",w=n.isDead?"is-dead":"",N=m?He(m,n.id):0,O=b||E||c&&u&&!p,I=!((null===v||void 0===v?void 0:v.type)===W.GEO)&&O,j=!O&&c&&i,C=et.filter((function(e){return e<=l}))[a],S=n.money;return c&&!h&&(S+=N),r.a.createElement("div",{className:"player player-".concat(C," shadow-md ").concat(y," ").concat(x," ").concat(w," md:absolute")},r.a.createElement("span",{className:"status text-gray-900 shadow-lg ".concat(c&&d&&d>0?"bg-green-500":"bg-gray-400")},r.a.createElement($e,{player:n,isWinningPlayer:s,isTurnPlayer:o,changeInMoney:d,isQuestionRoundOver:c,isDead:n.isDead,hasFolded:p,allPlayersPlacedTheirGuess:f,playerHasPlacedTheirGuess:!!g,playerIsAllIn:!n.isDead&&0===n.money})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"name"},n.name),r.a.createElement("div",{className:"flex items-center"},r.a.createElement(Ge.b,{className:"mr-1"}),r.a.createElement("span",null,S),c&&d&&r.a.createElement("span",{className:"ml-1 ".concat(d>0?"text-green-500":"text-red-500")},"(",d>0?"+":"",d,")")),r.a.createElement("div",{className:"inner-info grid absolute text-sm left-48 md:left-auto sm:-right-3 md:right-0 md:text-lg md:grid-flow-auto text-gray-800 md:w-full"},!c&&!!N&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(Ge.b,null)),r.a.createElement("span",null,N)),I&&(null===v||void 0===v?void 0:v.type)&&(null===g||void 0===g?void 0:g.guess)&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(me.b,null)),r.a.createElement(ce,{guess:null===g||void 0===g?void 0:g.guess,questionType:v.type,alternatives:v.alternatives})),j&&r.a.createElement("div",null,r.a.createElement(Xe,{gameId:t,playerId:n.id})))))};function nt(e){var t=e.usedQuestionRound,n=e.isGameFull,a=null===t||void 0===t?void 0:t.bettingRounds.reduce((function(e,t){return t.bets.forEach((function(t){e+=t.amount})),e}),0),l=n?"md:-right-5 md:-top-10":"md:left-24 md:bottom-20";return r.a.createElement("div",{className:"text-2xl md:text-3xl self-start z-1003 md:absolute ".concat(l)},r.a.createElement("div",{className:"flex -mb-3"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(Ge.b,null)),r.a.createElement("span",null,a)),r.a.createElement("span",{className:"text-xs md:text-sm"},"In Pot"))}var at={title:{fontSize:"0.7em",borderTop:"1px solid #ebebeb",marginTop:"0.3em",paddingTop:"1em"},currentHint:{fontSize:"1.4em"},oldHint:{fontSize:"0.7em"}};function rt(e){var t=e.usedQuestionRound,n=t.question.hints,a=t.isOver?n.length:Math.min(t.bettingRounds.length-1,n.length);return a<1?null:(null===n||void 0===n?void 0:n.length)?r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("span",{style:at.title},"Hint",a>1&&"s"," (",a,"/",n.length,"):"),r.a.createElement("ol",null,t.question.hints.slice(0,a).map((function(e,n){return r.a.createElement("li",{key:e,style:a!==n+1||Ve(t)?at.oldHint:at.currentHint},e)})))):null}var lt={question:{fontSize:"1.6em"},answer:{fontSize:"1.6em"}};function ot(e){var t=e.game,n=e.usedQuestionRound,a=n.question.type!==W.MULTIPLE_CHOICE&&n.bettingRounds.length<=1&&!n.isOver,l=t.questionRounds.length+t.questions.length;return r.a.createElement("div",null,r.a.createElement("p",{className:"mb-0",style:!a&&{fontSize:"0.7em"}||{}},"Question (",t.questionRounds.length,"/",l,"):"),r.a.createElement("p",{style:a&&lt.question||{}},n.question.question),r.a.createElement(rt,{usedQuestionRound:n}),[W.NUMERICAL,W.DATE].includes(n.question.type)&&Ve(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:lt.answer},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(ce,{guess:n.question.answer,questionType:n.question.type}))),n.question.explanation&&r.a.createElement("p",null,n.question.explanation)))}var it=n(17),st=n(246),ct=n(247),ut=n(248),mt=n(249),dt=n(256),pt=n(250),bt=n(251),ft=n(257),gt=n(252),vt=(n(177),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>1e3?0:e>100?1:e>1?2:4});function ht(e){var t=e.handleUpdate,n=Object(a.useState)(null),l=Object(g.a)(n,2),o=l[0],i=l[1];return Object(st.b)({click:function(e){i(e.latlng),t({latitude:e.latlng.lat,longitude:e.latlng.lng})}}),o&&r.a.createElement(ct.a,{position:o})}function Et(e){var t=e.children,n=e.markers,a=Object(st.a)(),l=Object(it.latLngBounds)([]);return null===n||void 0===n||n.forEach((function(e){l.extend([e.position.latitude,e.position.longitude])})),l.isValid()&&a.flyToBounds(l,{padding:[10,10],maxZoom:n.length>1?15:5}),r.a.createElement(ut.a,null,t)}var yt=r.a.memo((function(e){var t=e.markers,n=void 0===t?[]:t,a=e.handleOnClick,l=e.className,o=n.find((function(e){return e.isAnswer})),i=!!o&&n.filter((function(e){return!e.isAnswer&&e.distanceToAnswer})).map((function(e){var t;return{line:[new it.LatLng(e.position.latitude,e.position.longitude),new it.LatLng(o.position.latitude,o.position.longitude)],label:null===(t=e.distanceToAnswer)||void 0===t?void 0:t.toFixed(vt(e.distanceToAnswer))}}));return r.a.createElement(mt.a,{center:[0,0],zoom:1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,scrollWheelZoom:!0,className:l},r.a.createElement(dt.a,{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.svg"}),a&&r.a.createElement(ht,{handleUpdate:a}),i&&i.map((function(e){var t=e.line,n=e.label;return r.a.createElement(pt.a,{key:t.toString(),positions:t,color:"#393d4e",weight:2},n&&r.a.createElement(bt.a,{className:"distance-label",direction:"center",permanent:!0},n," km"))})),n.length&&r.a.createElement(Et,{markers:n},n.map((function(e){var t=e.position,n=e.label,a=e.radiusInKilometres;return a?r.a.createElement(ft.a,{center:[t.latitude,t.longitude],radius:1e3*a,key:t.latitude},n&&r.a.createElement(bt.a,{direction:"center",permanent:!0},n)):r.a.createElement(ct.a,{alt:"position marker",position:[t.latitude,t.longitude],key:t.latitude},n&&r.a.createElement(bt.a,{direction:"bottom",offset:[-15,20],permanent:!0},n))}))))}),(function(e,t){return Object(gt.a)(e.markers,t.markers)}));function xt(e){var t=e.usedQuestionRound,n=e.isSpectator,a=e.playerId,l=e.players,o=e.className,i=t.question.type;if(!t||i!==W.GEO)return null;var s=t.guesses.find((function(e){return e.playerId===a})),c=(null===s||void 0===s?void 0:s.guess.geo)?[{position:s.guess.geo,label:"You",distanceToAnswer:s.difference}]:[];return(n||t.isOver)&&c.push.apply(c,Object(J.a)(t.guesses.reduce((function(e,r){var o=r.guess,i=r.playerId,s=r.difference;if(o.geo&&a!==i&&(n||!We(t,i)&&t.isShowdown||t.revealedGuesses.includes(i))){var c,u=(null===(c=l.find((function(e){return e.id===i})))||void 0===c?void 0:c.name)||"";e.push({position:o.geo,label:u,distanceToAnswer:s})}return e}),[]))),Ve(t)&&t.question.answer.geo&&c.push({position:t.question.answer.geo,label:r.a.createElement(he.a,{className:"text-green-500 text-2xl"}),isAnswer:!0,radiusInKilometres:t.question.answer.geo.toleranceRadius}),r.a.createElement(yt,{className:o,markers:c})}n(178);function wt(e){var t,n=e.usedQuestionRound,a=e.handleClick,l=e.guess;if(n.question.type!==W.MULTIPLE_CHOICE)return null;if(4!==(null===(t=n.question.alternatives)||void 0===t?void 0:t.length))throw new Error("missing alternatives for multiple choice question");var o=n.question.alternatives.map((function(e){var t;return{value:e,active:!(null===(t=n.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})),i=Ve(n),s=n.question.answer.numerical;return r.a.createElement("div",{className:"mc-container my-2"},o.map((function(e,t){var n="text-center border-2 border-blue-600 rounded-lg shadow px-4 py-3 font-bold focus:outline-none";return a||(n+=" no-pointer"),e.active&&a?(n+=" hover:bg-blue-600 hover:text-white",n+=l===t?" text-white bg-blue-600":" text-blue-600"):n+=" text-blue-600",r.a.createElement("button",{key:"".concat(e.value,"_").concat(t),className:n,onClick:function(){return a&&a(t)},disabled:!e.active||i&&t!==s},e.value)})))}n(179);var Nt=function(e){var t,n,a=e.game,l=e.usedQuestionRound,o=e.currentBettingRound,i=e.playerId,s=e.isSpectator,c=(null===l||void 0===l?void 0:l.question.type)===W.GEO,u=(null===l||void 0===l?void 0:l.question.type)===W.MULTIPLE_CHOICE,m=l&&a.players&&ze(l,a.players),d=function(e){if(e.isOver)return e.players.reduce((function(e,t,n){return 0===n?e:e[0].money<t.money?[t]:e[0].money===t.money?[].concat(Object(J.a)(e),[t]):e}),[e.players[0]]).map((function(e){return e.id}))}(a)||[];return r.a.createElement("div",{className:"flex flex-col items-center"},c&&r.a.createElement(ot,{game:a,usedQuestionRound:l}),r.a.createElement("div",{className:"relative w-full md:w-4/5 my-6"},r.a.createElement("div",{className:"poker-table ".concat(c?"md:p-0 md:overflow-hidden":"md:px-48 md:py-24"," rounded-full flex md:justify-center flex-col-reverse md:flex-col md:items-center md:w-full md:border-8 md:border-white md:shadow-xl")},r.a.createElement("div",{className:"grid gap-y-6 mt-7 px-5 md:mt-0 md:px-0"},a.players.map((function(e,t){var n,c=((null===(n=l.results)||void 0===n?void 0:n.find((function(t){var n=t.playerId;return e.id===n})))||{}).changeInMoney,u=!(!l||!We(l,e.id)),p=l.guesses.find((function(t){return t.playerId===e.id}));return r.a.createElement(tt,Object.assign({key:e.id},{gameId:a.id,player:e,index:t,numberOfPlayers:a.players.length,currentBettingRound:o,changeInMoney:c,isAppPlayer:e.id===i,isTurnPlayer:e.id===(null===o||void 0===o?void 0:o.currentPlayer.id),isQuestionRoundOver:!!(null===l||void 0===l?void 0:l.isOver),isShowdown:!!(null===l||void 0===l?void 0:l.isShowdown),hasFolded:u,isSpectator:s,allPlayersPlacedTheirGuess:m,guess:p,question:l.question,isWinningPlayer:d.includes(e.id),isGameOver:a.isOver,isRevealingGuess:l.revealedGuesses.includes(e.id)}))}))),r.a.createElement("div",{className:"flex flex-col gap-2 justify-center items-center w-full h-full"},!c&&r.a.createElement("div",null,r.a.createElement(nt,{usedQuestionRound:l,isGameFull:12===a.players.length}),r.a.createElement(ot,{game:a,usedQuestionRound:l})),c&&r.a.createElement("div",{className:"flex flex-col-reverse w-full"},r.a.createElement(xt,{usedQuestionRound:l,isSpectator:s,playerId:i,players:a.players,className:"map"}),r.a.createElement(nt,{usedQuestionRound:l,isGameFull:12===a.players.length})),u&&r.a.createElement(wt,{usedQuestionRound:l,alternatives:(null===l||void 0===l||null===(t=l.question.alternatives)||void 0===t?void 0:t.map((function(e){var t;return{value:e,active:!(null===(t=l.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})))||[],guess:null===l||void 0===l||null===(n=l.guesses.find((function(e){return e.playerId===i})))||void 0===n?void 0:n.guess.numerical})))))};function Ot(e){var t=e.handleSubmit,n=Object(a.useState)(""),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:o,onChange:function(e){var t=parseFloat(e.target.value);i(0===t?0:t||e.target.value)},onKeyUp:function(e){13===e.which&&(t(o),i(""))},type:"number",className:"bg-white border border-gray-400 px-4",placeholder:"Your answer","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:"string"===typeof o||!o&&0!==o,onClick:function(){t(o),i("")}},"Submit"),r.a.createElement("p",{className:"-mt-2 text-sm h-2"},r.a.createElement(ce,{guess:{numerical:"number"===typeof o?o:parseFloat(o||"")},questionType:W.NUMERICAL}))))}var It=n(126),jt=n.n(It);function Ct(e){var t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")}var St=function(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement(jt.a,{className:"bg-white",dayPlaceholder:"DD",monthPlaceholder:"MM",yearPlaceholder:"YYYY",calendarClassName:"hidden",showLeadingZeros:!0,calendarIcon:null,value:o,onChange:function(e){i(e)}}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!o,onClick:function(){o&&function(e){if(e){var n=parseInt(e.replaceAll("-",""));n&&(t(n),i(void 0))}}(Ct(o))}},"Submit"),o&&r.a.createElement("p",{className:"-mt-2 text-sm h-2"},r.a.createElement(ce,{guess:{numerical:parseInt(Ct(o))},questionType:W.DATE})))};function kt(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,{handleOnClick:function(e){i(e)}}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){o&&(t(o),i(void 0))},disabled:!(null===o||void 0===o?void 0:o.latitude)||!o.longitude},"Submit"))}function Rt(e){var t=e.usedQuestionRound,n=e.handleSubmit,l=e.alternatives,o=Object(a.useState)(),i=Object(g.a)(o,2),s=i[0],c=i[1];if(4!==(null===l||void 0===l?void 0:l.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement(r.a.Fragment,null,r.a.createElement(wt,{usedQuestionRound:t,handleClick:c,guess:s}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){(s||0===s)&&(n(s),c(void 0))},disabled:!s&&0!==s},"Submit"))}function Pt(e){var t=e.currentQuestionRound,n=e.player,a=e.addGuessMutation,l=e.game,o=e.showAnswerDrawer,i=e.setShowAnswerDrawer,s=e.hasPlayerPlacedGuessInCurrentQuestionRound;if(!n||n.isDead)return null;var c=function(e){!e&&0!==e||"number"!==typeof e||(Ze(a,l,{numerical:e},n.id),i(!1))},u=function(e){Ze(a,l,{geo:e},n.id),i(!1)};return r.a.createElement(qe,{onClose:function(){i(!1)},anchor:"bottom",open:(o||1===l.questionRounds.length)&&!s,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},t.question.question),r.a.createElement("p",{className:"mt-4 text-sm"},"Your answer"),function(){var e;switch(t.question.type){case W.NUMERICAL:return r.a.createElement(Ot,{handleSubmit:c});case W.DATE:return r.a.createElement(St,{handleSubmit:c});case W.GEO:return r.a.createElement(kt,{handleSubmit:u});case W.MULTIPLE_CHOICE:var n=null===(e=t.question.alternatives)||void 0===e?void 0:e.map((function(e){return{value:e,active:!0}}));return r.a.createElement(Rt,{usedQuestionRound:t,alternatives:n,handleSubmit:c});default:throw new Error("Unknow Question Type")}}()))}var qt=n(127);function At(e){var t=e.text,n=e.handleOnClick,a=e.isDisabled;return r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-3 md:px-4 md:py-3 transition duration-300 ease-in-out hover:bg-blue-600 w-full text-xs md:text-base",onClick:n,disabled:a},t)}function Tt(e){var t,n=e.currentBettingRound,l=e.game,o=e.handleRaise,i=e.placeBet,s=e.playerId,c=e.showRaiseDrawer,u=e.setShowRaiseDrawer,m=Ke(n,s),d=null===(t=l.players.find((function(e){return e.id===s})))||void 0===t?void 0:t.money,p=Object(a.useState)(m),b=Object(g.a)(p,2),f=b[0],v=b[1],h=function(){o(f,i,l,s),u(!1)};return r.a.createElement(qe,{title:"Raise",anchor:"bottom",open:c,onClose:function(){u(!1)},variant:"temporary",className:"drawer"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Raise by how much?"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:f,onChange:function(e){v(Math.round(parseFloat(e.target.value)))},onKeyUp:function(e){13===e.which&&h()},type:"number",pattern:"[0-9]",min:m,max:d,className:"bg-white border border-gray-400 px-4",placeholder:"Amount to raise","aria-label":"Amount to raise","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{disabled:!!d&&(f<m||f>d),className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:h},"Submit")),r.a.createElement("div",{className:"flex"},d&&r.a.createElement(r.a.Fragment,null,[5,10,20,50].filter((function(e){return e<d})).map((function(e){return r.a.createElement("span",{key:e,style:{cursor:"pointer"},onClick:function(){return v(e)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},e)})),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return v(d)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},"All in")))))}function Dt(e){var t=e.game,n=e.usedQuestionRound,l=e.currentBettingRound,o=e.playerId,i=e.placeBet,s=e.isAppPlayerTurn,c=Object(a.useState)(!1),u=Object(g.a)(c,2),m=u[0],d=u[1];if(!n||!l)return null;var p=t.players.find((function(e){return e.id===o})),b=Ke(l,o);return r.a.createElement("div",{className:"grid md:grid-cols-3 gap-3 md:gap-4"},r.a.createElement(At,{text:b>0?"Call for ".concat(b):"Check",handleOnClick:function(){!function(e,t,n){var a,r,l=Ye(t),o=_e(l);if(l&&(null===o||void 0===o?void 0:o.currentPlayer.id)===n){var i=Ke(o,n),s=null!==(a=null===(r=t.players.find((function(e){return e.id===n})))||void 0===r?void 0:r.money)&&void 0!==a?a:0;e({variables:{input:{gameId:t.id,playerId:n,amount:Math.min(i,s)}}})}}(i,t,o)},isDisabled:!s}),r.a.createElement(At,{text:"Raise",handleOnClick:function(){d(!0)},isDisabled:(null===p||void 0===p?void 0:p.money)&&b>=(null===p||void 0===p?void 0:p.money)||!s}),r.a.createElement(At,{text:"Fold",handleOnClick:function(){!function(e,t,n){var a=Ye(t),r=_e(a);a&&(null===r||void 0===r?void 0:r.currentPlayer.id)===n&&e({variables:{input:{gameId:t.id,playerId:n,amount:-1}}})}(i,t,o)},isDisabled:!s}),r.a.createElement(Tt,{game:t,placeBet:i,playerId:o,currentBettingRound:l,handleRaise:Je,showRaiseDrawer:m,setShowRaiseDrawer:d}))}var Gt=function(e){var t,n,a,l=e.game,o=e.usedQuestionRound,i=e.player,s=e.placeBet,c=e.hasPlayerPlacedGuessInCurrentQuestionRound,u=e.setShowAnswerDrawer,m=e.currentBettingRound,d=(null===m||void 0===m?void 0:m.currentPlayer.id)===i.id&&ze(o,l.players),p=o.guesses.find((function(e){return e.playerId===i.id})),b=null!==(t=null===(n=l.players.find((function(e){return e.id===i.id})))||void 0===n?void 0:n.money)&&void 0!==t?t:0,f=m&&He(m,i.id)||0;o.isOver&&i.id&&m&&(b+=f);var g=o.question.type,v=((null===o||void 0===o||null===(a=o.results)||void 0===a?void 0:a.find((function(e){var t=e.playerId;return i.id===t})))||{}).changeInMoney,h=void 0===v?0:v,E=o&&l.players&&ze(o,l.players);return r.a.createElement("footer",{className:"fixed shadow-top-md bottom-0 left-0 w-full h-44 bg-gray-200 px-4 flex flex-col items-center justify-end z-1003"},r.a.createElement("div",{className:"w-full flex flex-col items-end md:items-center justify-center max-w-xl my-auto"},r.a.createElement("div",{className:"absolute left-4 md:left-10 top-0 flex flex-col items-center max-w-2xs text-center"},r.a.createElement("span",{className:"absolute shadow-top-md top-0 h-20 w-20 -mt-10 rounded-full flex items-center justify-center text-4xl ".concat(o.isOver&&h>0?"bg-green-500":"bg-gray-400"," ").concat(o.question.type===W.GEO?"left-0":"")},d&&!o.isOver&&r.a.createElement("span",{className:"absolute"},r.a.createElement(qt.CountdownCircleTimer,{isPlaying:d,size:80,strokeWidth:5,duration:15,colors:[["#004777",.5],["#A30000",1]],trailColor:"#9ca3af"})),r.a.createElement("span",null,r.a.createElement($e,{player:i,isQuestionRoundOver:o.isOver,isTurnPlayer:!o.isOver&&i.id===(null===m||void 0===m?void 0:m.currentPlayer.id),hasFolded:!(!o||!We(o,i.id)),changeInMoney:h,allPlayersPlacedTheirGuess:E,playerHasPlacedTheirGuess:!!p}))),g!==W.GEO&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-xs mt-12"},"Your Answer"),r.a.createElement("span",{className:"text-2xl overflow-hidden max-h-24"},p&&r.a.createElement(ce,{guess:p.guess,questionType:g,alternatives:o.question.alternatives})))),r.a.createElement("div",{className:"flex items-center ".concat(o.isOver?"flex-col":"md:flex-col")},r.a.createElement("div",{className:"flex flex-col items-center mr-3 sm:mr-5 md:mr-0"},r.a.createElement("p",{className:"text-xs"},"Available money"),r.a.createElement("div",{className:"flex items-center mb-6 text-2xl"},r.a.createElement(Ge.b,{className:"mx-1"}),r.a.createElement("span",null,b),0!==h&&r.a.createElement("span",{className:"ml-2 ".concat(h>0?"text-green-500":"text-red-500")},"(",h>0?"+":"",h,")"))),!c&&l.questionRounds.length>1&&r.a.createElement("button",{className:"new-question-button bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-2 md:px-4 md:py-3 text-xs md:text-base transition duration-300 ease-in-out hover:bg-blue-600 mx-auto",onClick:function(){u(!0)}},"Answer New Question"),c&&i.id&&r.a.createElement(Dt,{game:l,usedQuestionRound:o,currentBettingRound:m,placeBet:s,playerId:i.id,isAppPlayerTurn:d}))))},Lt=n(128),Mt=n.n(Lt);var Ft,Qt=function(e){var t=e.gameId,n=e.playerId,l=e.gameHasStarted,o=e.setPlayerId,i=Object(a.useState)(),s=Object(g.a)(i,2),c=(s[0],s[1]),u=Object(v.b)(B,{onError:function(e){c((function(){throw e}))},onCompleted:function(){t&&(!function(e){localStorage.removeItem("".concat(Ee,"_").concat(e))}(t),o(void 0))}}),m=Object(g.a)(u,1)[0];return t&&n?r.a.createElement(Ce,{onConfirm:function(){m({variables:{playerId:n,gameId:t}})},dialogTitle:r.a.createElement(r.a.Fragment,null,"Are you sure?",l&&r.a.createElement("p",null,"If you leave the game, you cannot join again later.")),confirmLabel:"Leave Game",buttonLabel:r.a.createElement(Mt.a,null),btnClassName:"leave-game btn btn-link btn-lg"}):null},Bt=n(129),Ut=n(130),$t=n(137),Ht=n(134),Yt=n(132),_t=function(e){Object($t.a)(n,e);var t=Object(Ht.a)(n);function n(){var e;Object(Bt.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1,error:void 0},e}return Object(Ut.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error("Uncaught error:",e,t)}},{key:"render",value:function(){if(this.state.hasError){var e,t=null===(e=this.state.error)||void 0===e?void 0:e.message.replace("GraphQL error: ","");return r.a.createElement("p",{className:"text-lg mt-6 flex items-center font-semibold"},r.a.createElement(Yt.a,{className:"text-4xl text-red-600 mr-3"}),"Game not found"===t?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(r.a.Fragment,null,'A technical error has occurred: "',t,'"',r.a.createElement("br",null)," Try to refresh the page."))}return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(r.a.Component),zt=n.p+"static/media/turn-notification.e2e956ce.mp3",Kt=n.p+"static/media/turn-alert.11acdad1.wav",Wt=(n(197),function(e){window.navigator.vibrate&&window.navigator.vibrate(e)});function Vt(){var e=Object(a.useState)(void 0),t=Object(g.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(void 0),i=Object(g.a)(o,2),s=i[0],c=i[1],u=Ye(s),m=_e(u),d=Object(a.useState)(!1),p=Object(g.a)(d,2),b=p[0],h=p[1],E=Object(a.useState)(!1),y=Object(g.a)(E,2),x=y[0],w=y[1],N=Object(f.g)().gameId,O=Object(a.useState)(),I=Object(g.a)(O,2),j=(I[0],I[1]),C=Object(a.useState)(new Audio(zt)),S=Object(g.a)(C,1)[0],k=Object(a.useState)(new Audio(Kt)),R=Object(g.a)(k,1)[0],P=function(e){j((function(){throw e}))},q=Object(v.a)(D,{fetchPolicy:"cache-and-network",onError:P,onCompleted:function(e){var t=e.game;c(t)}}),A=Object(g.a)(q,2),T=A[0],B=A[1].loading,U=Object(v.b)(L,{onError:P}),$=Object(g.a)(U,2),H=$[0],Y=$[1].data,_=Object(v.b)(M,{onError:P}),z=Object(g.a)(_,1)[0],K=Object(v.b)(F,{onError:P}),W=Object(g.a)(K,1)[0],V=Object(v.b)(Q,{onError:P}),J=Object(g.a)(V,1)[0],Z=Object(v.c)(G,{variables:{gameId:N,hash:we(N)||xe(N)},onSubscriptionData:function(e){var t,a,r=e.subscriptionData;clearInterval(Ft);var l=null===(t=r.data)||void 0===t?void 0:t.gameUpdated;c(l);var o=Ye(l),i=_e(o),s=null===(a=r.data)||void 0===a?void 0:a.gameUpdated.players,u=o&&s&&ze(o,s);u&&w(!1),!(null===l||void 0===l?void 0:l.isOver)&&(null===i||void 0===i?void 0:i.currentPlayer.id)===n&&u&&(S.play(),Wt(200),Ft=setInterval((function(){R.play(),Wt(200)}),15e3))}}).error;if(Object(a.useEffect)((function(){Z&&P(Z)}),[Z]),Object(a.useEffect)((function(){T({variables:{gameId:N}})}),[T,N]),Object(a.useEffect)((function(){if(N){var e,t=function(e){return localStorage.getItem("".concat(Ee,"_").concat(e))}(N),n=null===Y||void 0===Y||null===(e=Y.addPlayer)||void 0===e?void 0:e.id;t&&l(t),n&&(!function(e,t){localStorage.setItem("".concat(Ee,"_").concat(e),t)}(N,n),l(n))}}),[N,Y]),B)return r.a.createElement("h3",{className:"text-lg mt-6 font-semibold"},"Loading...");if(!s)return r.a.createElement("p",{className:"text-lg mt-6 flex items-center font-semibold"},r.a.createElement(he.b,{className:"text-4xl mr-2"})," Game not found.");var X=s.players.find((function(e){return e.id===n})),ee=!!(null===u||void 0===u?void 0:u.guesses.find((function(e){return e.playerId===n}))),te=!!s.questionRounds.length,ne=te&&(!X||X.isDead),ae=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-(e.isOver?1:2)]}(s),re=!!ae&&(s.isOver||!ee&&!ne||ne&&!!u&&!x&&!ze(u,s.players))?ae:u;return r.a.createElement("div",{className:"p-2 flex flex-col md:justify-center ".concat(ne||!te?"min-h-screen":"min-h-screen-minus-52 mb-52")},r.a.createElement("div",{className:"flex flex-col md:my-auto"},!te&&r.a.createElement(De,{players:s.players,gameLink:window.location.href,startGame:z,gameId:s.id,createPlayer:H,playerId:n,setNames:s.setNames}),te&&re&&r.a.createElement(Nt,{game:s,usedQuestionRound:re,currentBettingRound:m,playerId:n,isSpectator:ne}),ne&&(null===re||void 0===re?void 0:re.isOver)&&!s.isOver&&r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mx-auto mt-5",onClick:function(){w(!0)}},"Show Next Question")),u&&n&&r.a.createElement(Pt,{game:s,addGuessMutation:J,currentQuestionRound:u,player:X,showAnswerDrawer:b,setShowAnswerDrawer:h,hasPlayerPlacedGuessInCurrentQuestionRound:ee}),!s.isOver&&X&&!ne&&re&&r.a.createElement(Gt,{game:s,usedQuestionRound:re,placeBet:W,player:X,startGame:z,hasPlayerPlacedGuessInCurrentQuestionRound:ee,setShowAnswerDrawer:h,currentBettingRound:m}),r.a.createElement(Qt,{gameId:N,playerId:n,gameHasStarted:te,setPlayerId:l}))}var Jt=function(){return r.a.createElement(_t,null,r.a.createElement(Vt,null))};function Zt(){return r.a.createElement("p",null,"Page not found.")}var Xt=function(){return r.a.createElement("div",{className:"mx-auto flex flex-col max-w-full sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl px-3"},r.a.createElement(i.b,{to:"/",className:"mt-4 text-3xl font-bold"},"Certainty Poker"),r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/",component:ve,exact:!0}),r.a.createElement(f.a,{path:"/:gameId",component:Jt,exact:!0}),r.a.createElement(f.a,{path:"/questions/:setName",component:ve,exact:!0}),r.a.createElement(f.a,{component:Zt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var en="s://certainty-poker.herokuapp.com",tn=(n(198),new m.a({uri:"http".concat(en,"/query")})),nn=new u.a({uri:"ws".concat(en,"/query"),options:{reconnect:!0}}),an=Object(d.d)((function(e){var t=e.query,n=Object(p.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),nn,tn),rn=new s.c({link:an,cache:new b.a});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{client:rn},r.a.createElement(i.a,null,r.a.createElement(Xt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.a4ba8adc.chunk.js.map