(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{138:function(e,t){},140:function(e,t){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(13),o=n.n(l),i=n(41),s=n(49),u=n(21),c=n(119),d=n(121),m=n(26),p=n(4),f=n(120),b=n(47),g=n(6),v=n(30),h=n(37),E=n(210),y=n.n(E);function x(){var e=Object(h.a)(["\n  mutation removePlayer($gameId: ID!, $playerId: ID!) {\n    removePlayer(gameId: $gameId, playerId: $playerId)\n  }\n"]);return x=function(){return e},e}function w(){var e=Object(h.a)(["\n  mutation addGuess($input: GuessInput!) {\n    addGuess(input: $input)\n  }\n"]);return w=function(){return e},e}function N(){var e=Object(h.a)(["\n  mutation placeBet($input: BetInput!) {\n    placeBet(input: $input)\n  }\n"]);return N=function(){return e},e}function O(){var e=Object(h.a)(["\n  mutation startGame($gameId: ID!) {\n    startGame(gameId: $gameId)\n  }\n"]);return O=function(){return e},e}function I(){var e=Object(h.a)(["\n  mutation addPlayer($input: PlayerInput!) {\n    addPlayer(input: $input) {\n      id\n      money\n      name\n    }\n  }\n"]);return I=function(){return e},e}function j(){var e=Object(h.a)(["\n  subscription GameUpdated($gameId: ID!, $hash: String!) {\n    gameUpdated(gameId: $gameId, hash: $hash) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return j=function(){return e},e}function C(){var e=Object(h.a)(["\n  query findGame($gameId: ID!) {\n    game(gameId: $gameId) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return C=function(){return e},e}function S(){var e=Object(h.a)(["\n  query sets($setName: String) {\n    sets(setName: $setName) {\n      setName\n      numberOfQuestions\n      language\n    }\n  }\n"]);return S=function(){return e},e}function k(){var e=Object(h.a)(["\n  mutation uploadQuestions(\n    $questions: [QuestionInput!]!\n    $setName: String!\n    $isPrivate: Boolean!\n    $language: String!\n  ) {\n    uploadQuestions(\n      questions: $questions\n      setName: $setName\n      isPrivate: $isPrivate\n      language: $language\n    )\n  }\n"]);return k=function(){return e},e}function R(){var e=Object(h.a)(["\n  mutation createGame($setNames: [String!]!) {\n    createGame(setNames: $setNames) {\n      id\n    }\n  }\n"]);return R=function(){return e},e}var P=y()(R()),q=y()(k()),A=y()(S()),T=y()(C()),D=y()(j()),L=y()(I()),G=y()(O()),M=y()(N()),F=y()(w()),B=y()(x()),Q=function(e){console.error(e.message)},U=n.p+"static/media/landing-page-image-1.02af88eb.png",H=n.p+"static/media/landing-page-image-2.3b5d2efa.png",$=n.p+"static/media/landing-page-image-3.d9f239dd.png",_=n.p+"static/media/landing-page-image-4.428c6f8f.png",Y=n.p+"static/media/landing-page-image-phone.9eb55053.png";function z(){return r.a.createElement("div",{className:"grid grid-cols-3 gap-4 grid-flow-row-dense py-4 md:pb-12 h-full relative lg:overflow-hidden"},r.a.createElement("div",{className:"col-span-2 row-span-3 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:$,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-1 row-span-2 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:_,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-2 row-span-3 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:U,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-1 row-span-5 rounded-tl-lg rounded-br-full flex justify-center items-center p-5 bg-blue-200"}),r.a.createElement("div",{className:"col-span-2 row-span-2 overflow-hidden rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:H,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"absolute rounded-2xl h-3/4 w-2/3 self-center justify-self-center flex justify-center"},r.a.createElement("img",{src:Y,className:"rounded-xl h-full",alt:"background"})))}var K,W,V=n(44),J=n(48),Z=n.n(J),X=n(64),ee=n(76),te=n(46),ne=n(183),ae=n(181),re=n(105);!function(e){e.GEO="GEO",e.NUMERICAL="NUMERICAL",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE",e.DATE="DATE"}(K||(K={})),function(e){e.CHECKED="CHECKED",e.CALLED="CALLED",e.RAISED="RAISED"}(W||(W={}));var le={GB:"English",FR:"French",ES:"Spanish",CN:"Chinese",DE:"German",ZA:"Africaans",AL:"Albanian",DZ:"Algerian",SA:"Arab",AM:"Armenian",BD:"Bangladeshi",BG:"Bulgarian",KH:"Cambodian",HR:"Croatian",CZ:"Czech",DK:"Danish",NL:"Dutch",EE:"Estonian",FI:"Finnish",GR:"Greek",IL:"Hebrew",HU:"Hungarian",IN:"Indian",IT:"Italian",JP:"Japanese",KR:"Korean",LV:"Latvian",LT:"Lithuanian",MY:"Malaysian",MN:"Mongolian",NO:"Norwegian",PL:"Polish",BR:"Portuguese",RO:"Romanian",RU:"Russian",RS:"Serbian",SK:"Slovakian",SI:"Slovenian",SE:"Swedish",TH:"Thai",TR:"Turkish",VN:"Vietnamese"};var oe=n(107),ie=n.n(oe);function se(e){var t,n,a,l=e.guess,o=e.questionType,i=e.alternatives;if(!l)return null;switch(o){case K.NUMERICAL:var s="number"===typeof l.numerical?l.numerical:parseFloat(l.numerical||"");return isNaN(s)?null:r.a.createElement("span",null,(new Intl.NumberFormat).format(s));case K.DATE:return l.numerical?r.a.createElement("span",null,ie()(l.numerical.toString(),"YYYYMMDD").format("MMM DD, YYYY")):null;case K.GEO:return r.a.createElement("span",null,"[".concat(null===(t=l.geo)||void 0===t?void 0:t.latitude,", ").concat(null===(n=l.geo)||void 0===n?void 0:n.longitude,"]"));case K.MULTIPLE_CHOICE:if(4!==(null===i||void 0===i?void 0:i.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement("span",null,i[null!==(a=l.numerical)&&void 0!==a?a:-1]);default:throw new Error("Invalid question type")}}var ue=function(e){var t=e.open,n=e.handleClose,l=e.fetchSets,o=e.setSelectedSets,i=e.setShownLanguage,s=Object(b.f)(),u=Object(a.useState)(!0),c=Object(g.a)(u,2),d=c[0],m=c[1],p=Object(a.useState)(),f=Object(g.a)(p,2),h=f[0],E=f[1],y=Object(a.useState)(""),x=Object(g.a)(y,2),w=x[0],N=x[1],O=Object(a.useState)(0),I=Object(g.a)(O,2),j=I[0],C=I[1],S=Object(a.useState)(),k=Object(g.a)(S,2),R=k[0],P=k[1],A=Object(v.b)(q,{variables:{setName:w,questions:h,isPrivate:!!j,language:R},onCompleted:function(){j?s.push("/questions/".concat(w)):l(),o([w]),i(R||"GB"),n(),N(""),E(void 0),m(!0)},onError:Q}),T=Object(g.a)(A,2),D=T[0],L=T[1].error,G=d?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-3"},"An example of the file format can be found"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900",target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/spreadsheets/d/1_cUrvCc3R2qTL_ME-A9wc9HmyH-zoAQkRnBs80dOPb8/edit?usp=sharing"},"here"),"."),r.a.createElement(re.a,{onDrop:function(e){m(!1),E(function(e){return e.map((function(e){var t,n=e.data,a=n.question,r=n.type,l=n.answer,o=n.latitude,i=n.longitude,s=n.toleranceRadius,u=n.hint1,c=n.hint2,d=n.explanation,m=n.multiple_choice_alternative1,p=n.multiple_choice_alternative2,f=n.multiple_choice_alternative3,b=[u,c].filter(Boolean),g={};switch(r){case K.NUMERICAL:case K.DATE:g.numerical=l;break;case K.GEO:g.geo={latitude:o,longitude:i,toleranceRadius:s};break;case K.MULTIPLE_CHOICE:g.numerical=0,t=[l,m,p,f];break;default:throw new Error("invalid question type")}return{question:a,type:r,answer:g,hints:b,explanation:d,alternatives:t}}))}(e))},onError:function(e,t,n,a){console.error(e)},config:{header:!0},addRemoveButton:!0,removeButtonColor:"#659cef"},r.a.createElement("span",null,"Drop CSV file here or click to upload."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("input",{value:w,onChange:function(e){N(e.target.value)},type:"text",className:"rounded-md bg-white border border-gray-400 px-4 py-2 mr-4",placeholder:"Name for the question set","aria-label":"Name for the question set",required:!0,autoFocus:!0}),r.a.createElement("select",{className:"rounded-md bg-white border border-gray-400 px-4 py-2",required:!0,value:R,onChange:function(e){P(e.target.value)}},r.a.createElement("option",{selected:!0},"Language..."),Object.keys(le).map((function(e){return r.a.createElement("option",{key:e,value:e},Object(ee.a)(e)," ",le[e])})))),r.a.createElement("h3",{className:"text-2xl mb-3 mt-5"},"Review your upload:"),r.a.createElement("hr",null),(h||[]).map((function(e){var t,n,a;return r.a.createElement("div",{key:e.question,className:"small"},r.a.createElement("p",{className:"my-3"},"Question: ",r.a.createElement("b",null,e.question)),e.type!==K.MULTIPLE_CHOICE&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"my-3"},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(se,{guess:e.answer,questionType:e.type,alternatives:e.alternatives}))),(null===(t=e.answer.geo)||void 0===t?void 0:t.toleranceRadius)&&r.a.createElement("p",{className:"my-3"},"Tolerance radius in km: ",r.a.createElement("b",null,e.answer.geo.toleranceRadius))),!!(null===(n=e.hints)||void 0===n?void 0:n.length)&&r.a.createElement("p",{className:"my-3"},"Hints:"," ",e.hints.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",null,e)))}))),!!(null===(a=e.alternatives)||void 0===a?void 0:a.length)&&r.a.createElement("p",{className:"my-3"},"Alternatives:"," ",e.alternatives.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",{className:0===t?"text-green-500":""},e)))}))),e.explanation&&r.a.createElement("p",{className:"my-3"},"Explanation: ",r.a.createElement("b",null,e.explanation)),r.a.createElement("hr",{className:"my-3"}))})),r.a.createElement("div",{className:"flex"},r.a.createElement("input",{type:"checkbox",className:"mt-2",id:"isPrivateCheckbox",value:j,onChange:function(){C(j?0:1)}}),r.a.createElement("label",{className:"ml-2",htmlFor:"isPrivateCheckbox"},"Questions are private",r.a.createElement("br",null),r.a.createElement("span",null,"If checked, this set of questions will not appear in the list on the start screen."))),r.a.createElement("div",{className:"flex mt-3"},r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!w||!R,onClick:function(){D()}},"Upload"),r.a.createElement("button",{className:"border-2 boder-gray-800 rounded-lg font-bold hover:text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-gray-800 ml-3",onClick:function(){m(!0)}},"Upload new file")));return r.a.createElement(ne.a,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:t,className:"flex justify-center items-center p-5",onClose:n,closeAfterTransition:!0,BackdropComponent:ae.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:"flex py-6 px-6 md:px-8 my-2 md:my-6 mx-2 md:mx-6 lg:mx-10 max-h-full bg-white rounded-md focus:outline-none"},r.a.createElement("div",{className:"overflow-y-auto flex-shrink-0 max-w-full flex flex-col"},r.a.createElement("h3",{className:"text-2xl mb-2"},"Upload a CSV file with custom questions"),G,L&&r.a.createElement("div",{className:"alert alert-danger"},L.message))))},ce=n(42);var de=function(e){var t=e.open,n=e.handleClose,a=e.children;return r.a.createElement(ne.a,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:t,className:"flex justify-center items-center p-5",onClose:n,closeAfterTransition:!0,BackdropComponent:ae.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:"bg-white flex flex-col h-full relative rounded-md border border-gray-500 lg:w-2/3 md:w-3/4 overflow-y-auto py-5 px-8 focus:outline-none max-w-2xl"},r.a.createElement("button",{onClick:n,className:"absolute top-4 right-4"},r.a.createElement(ce.e,null)),a))};n(157);var me=function(e){var t=e.sets,n=e.open,l=e.handleClose,o=e.handleOpen,i=e.fetchSets,s=Object(b.f)(),u=Object(a.useState)(!1),c=Object(g.a)(u,2),d=c[0],m=c[1],p=Object(a.useState)([]),f=Object(g.a)(p,2),h=f[0],E=f[1],y=Object(a.useState)("GB"),x=Object(g.a)(y,2),w=x[0],N=x[1],O=Object(a.useState)([]),I=Object(g.a)(O,2),j=I[0],C=I[1];Object(a.useEffect)((function(){var e=t.reduce((function(e,t){return e.includes(t.language)||e.push(t.language),e}),[]).sort((function(e,t){return"GB"===e?-1:parseInt(e)-parseInt(t)}))||[];C(e),N(e.includes("GB")?"GB":e[0]),1===t.length&&E([t[0].setName])}),[t]);var S=Object(v.b)(P,{variables:{setNames:h},onCompleted:function(e){var t=e.createGame;s.push("/".concat(t.id))},onError:Q}),k=Object(g.a)(S,2),R=k[0],q=k[1].loading,A="/"!==s.location.pathname,T=function(){var e=Object(X.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.length&&R();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{open:n,handleClose:l},r.a.createElement("h2",{className:"text-2xl font-bold my-4"},"Select a set of questions to start a game"),A&&r.a.createElement("p",{className:"text-sm font-semibold my-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-xl"},"Make sure you copy and save this URL in order to start games with this question set at any time:",r.a.createElement("br",null),r.a.createElement("button",{onClick:Object(X.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(window.location.href);case 2:case"end":return e.stop()}}),e)}))),className:"flex items-center text-blue-600 hover:text-blue-800 focus:outline-none font-bold"},window.location.href," ",r.a.createElement(te.b,{className:"ml-2 text-lg"}))),r.a.createElement("p",{className:"my-2 font-semibold"},"Languages:"),r.a.createElement("div",{className:"flex mb-3"},j.map((function(e){return r.a.createElement("span",{key:e,className:"text-4xl mx-1 px-5 rounded-full border border-gray-800 hover:bg-gray-800 ".concat(e===w?"bg-gray-800":"opacity-50 hover:opacity-100"),onClick:function(){N(e)},style:{cursor:e===w?"default":"pointer"}},Object(ee.a)(e))}))),Object.keys(le).includes(w)&&r.a.createElement("p",{className:"mt-3 font-semibold"},le[w]," question sets:"),r.a.createElement("div",{className:"set-container my-4"},t.filter((function(e){return e.language===w})).map((function(e){return r.a.createElement("span",{key:e.setName,className:"flex justify-center items-center rounded-md text-center px-4 py-3 border border-gray-800 hover:bg-gray-800 hover:text-white cursor-pointer ".concat((null===h||void 0===h?void 0:h.includes(e.setName))?"bg-gray-800 text-white":""),style:{gridColumn:"span ".concat(Math.round(Math.pow(e.setName.length,.35)))},onClick:function(t){t.metaKey?(null===h||void 0===h?void 0:h.includes(e.setName))?E(h.filter((function(t){return e.setName!==t}))):E([e.setName].concat(Object(V.a)(h))):E([e.setName])}},e.setName," (",e.numberOfQuestions,")")}))),r.a.createElement("p",{className:"mt-auto"},"You can also upload your own set of questions"," ",r.a.createElement("button",{onClick:function(){m(!0),l()},className:"text-blue-600 hover:text-blue-800 focus:outline-none font-bold"},"here"),"."),r.a.createElement("button",{className:"mt-3 bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mr-auto",onClick:T,disabled:!h.length},q?"Loading...":"Play for Free")),r.a.createElement(ue,{open:d,handleClose:function(){o(),m(!1)},setShownLanguage:N,setSelectedSets:E,fetchSets:i}))};function pe(e){var t=e.sets,n=void 0===t?[]:t,l=(e.setName,e.fetchSets),o=Object(b.f)(),i=Object(a.useState)(!1),s=Object(g.a)(i,2),u=s[0],c=s[1];return Object(a.useEffect)((function(){"/"!==o.location.pathname&&c(!0)}),[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col justify-end h-full py-8 lg:pb-32 lg:pt-0"},r.a.createElement("h1",{className:"text-5xl"},r.a.createElement("span",{className:"font-light italic"},"You think you know things?"),r.a.createElement("br",null),"Let's make it interesting then!"),r.a.createElement("p",{className:"text-xl mt-3"},r.a.createElement("b",null,"Free")," poker-like trivia game."),r.a.createElement("button",{onClick:function(){c(!0)},className:"border border-blue-600 rounded-full font-bold text-3xl text-blue-600 hover:text-white text-center px-8 py-4 transition duration-300 ease-in-out hover:bg-blue-600 mt-8 mr-auto focus:outline-none"},"Create Game"),r.a.createElement("p",{className:"mt-10"},"Check out the rules"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900 p-0",href:"https://docs.google.com/document/d/13pwz8yzrPdY1DcQqXvhejJAxXdWdPrvxR6GUxg5PJPs/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer"},"here"),".")),r.a.createElement(me,{sets:n,fetchSets:l,open:u,handleOpen:function(){c(!0)},handleClose:function(){c(!1)}}))}n(158);var fe=function(){var e=Object(b.g)().setName,t=Object(v.a)(A,{fetchPolicy:"no-cache",onError:Q,variables:{setName:e}}),n=Object(g.a)(t,2),l=n[0],o=n[1].data;return Object(a.useEffect)((function(){l()}),[l,e]),r.a.createElement("div",{className:"grid lg:grid-cols-2 gap-x-8 relative landing-page"},r.a.createElement(pe,{sets:null===o||void 0===o?void 0:o.sets,setName:e,fetchSets:l}),r.a.createElement(z,null))},be="player_id",ge="fingerprint",ve=function(e){localStorage.clear();var t=Math.random().toString(36).substring(2);return localStorage.setItem("".concat(ge,"_").concat(e),t),t},he=function(e){return localStorage.getItem("".concat(ge,"_").concat(e))};var Ee=function(e){var t=e.playerName;return r.a.createElement("div",{className:"rounded-xl border-2 px-3 h-16 w-36 flex items-center justify-center shadow"},r.a.createElement("span",{className:"overflow-hidden text-overflow-ellipsis"},t))},ye=n(214),xe=n(215),we=n(224),Ne=function(e){var t=e.buttonLabel,n=e.dialogTitle,a=e.confirmLabel,l=e.onConfirm,o=e.isDisabled,i=e.btnClassName,s=r.a.useState(!1),u=Object(g.a)(s,2),c=u[0],d=u[1],m=function(){d(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:i||"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){d(!0)},disabled:o},t),r.a.createElement(ye.a,{open:c,onClose:m},r.a.createElement("div",{className:"px-4 py-2"},r.a.createElement(we.a,null,n),r.a.createElement(xe.a,null,r.a.createElement("button",{className:"btn btn-outline-dark",onClick:m},"Cancel"),r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){l(),d(!1)}},a)))))},Oe=function(e){var t=e.startGame,n=e.gameId,a=e.isDisabled;return r.a.createElement(Ne,{onConfirm:function(){t({variables:{gameId:n}})},dialogTitle:"Are you sure you want to start the game? Once it's started no more players can join.",confirmLabel:"Start Game",buttonLabel:"Start Game",isDisabled:a})},Ie=n(19),je=n(24),Ce=n(225);n(159);function Se(e){var t=e.children,n=e.onClose,a=Object(je.a)(e,["children","onClose"]);return r.a.createElement(Ce.a,Object(Ie.a)({},a),r.a.createElement("div",{className:"flex items-center flex-col bg-gray-200 py-4 min-h-52"},n&&r.a.createElement("span",{id:"drawer-close",className:"ml-auto mr-3 -mb-4 -mt-2",onClick:n},"\u2573"),r.a.createElement("div",{className:"container px-5 pb-5 flex flex-col md:max-w-screen-md"},t)))}function ke(e){var t=e.createPlayer,n=e.gameId,l=e.playerId,o=Object(a.useState)(""),i=Object(g.a)(o,2),s=i[0],u=i[1],c=function(){l||t({variables:{input:{gameId:n,playerName:s}}})};return r.a.createElement(Se,{title:"Your name",anchor:"bottom",open:!l,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},"Enter your name"),r.a.createElement("p",{className:"mt-4 text-sm"},"Username"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:s,onChange:function(e){u(e.target.value)},onKeyUp:function(e){13===e.which&&c()},type:"text",className:"bg-white border border-gray-400 px-4",placeholder:"Your name","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",disabled:!s.length,className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:c},"Submit"))))}var Re,Pe=function(e){var t=e.players,n=e.gameLink,a=e.startGame,l=e.gameId,o=e.createPlayer,i=e.playerId,s=e.setNames;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col items-center font-semibold mt-4 px-5 mx-auto md:max-w-screen-md"},r.a.createElement("h5",null,"Share this link with friends who want to join the game"),r.a.createElement("div",{className:"flex items-center justify-between w-full break-all px-4 md:px-10 py-4 mt-4 bg-gray-200 rounded-md"},r.a.createElement("span",{className:"w-3/4"},n),r.a.createElement("button",{className:"text-blue-500 hover:text-blue-600 p-2 ripple focus:outline-none text-2xl",onClick:Object(X.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(window.location.href);case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(te.b,null))),r.a.createElement("h4",{className:"mt-4 self-start text-lg"},"Question Set",s.length>1?"s":"",": ",s.join(", ")),r.a.createElement("p",{className:"mt-20 self-start"},"Players"),r.a.createElement("p",{className:"text-xs font-normal self-start w-full pb-2 border-b-2 border-grey-200"},12-t.length," Open spot",12-t.length===1?"":"s"),r.a.createElement("hr",null),r.a.createElement("div",{className:"mt-8 grid gap-8 w-full sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},t.map((function(e){return r.a.createElement(Ee,{key:e.id,playerName:null===e||void 0===e?void 0:e.name})}))),i&&r.a.createElement("div",{className:"mt-16 self-start"},r.a.createElement(Oe,{startGame:a,gameId:l,isDisabled:t.length<=1}))),r.a.createElement(ke,{gameId:l,createPlayer:o,playerId:i}))},qe=n(39),Ae=n(58),Te=n(223),De=n(79),Le=n(94),Ge=n(116),Me=function(e){var t=e.tooltipTitle,n=e.children;return r.a.createElement(Te.a,{title:t},r.a.createElement("span",null,n))},Fe=(Re={},Object(Ae.a)(Re,W.RAISED,r.a.createElement(Me,{tooltipTitle:"Raised"},r.a.createElement(te.a,null))),Object(Ae.a)(Re,W.CALLED,r.a.createElement(Me,{tooltipTitle:"Called"},r.a.createElement(te.c,null))),Object(Ae.a)(Re,W.CHECKED,r.a.createElement(Me,{tooltipTitle:"Checked"},r.a.createElement(te.c,null))),Re);var Be=function(e){var t=e.player,n=e.isWinningPlayer,a=e.isQuestionRoundOver,l=e.changeInMoney,o=e.isDead,i=e.hasFolded,s=e.allPlayersPlacedTheirGuess,u=e.playerHasPlacedTheirGuess,c=e.isTurnPlayer,d=e.playerIsAllIn;if(o)return r.a.createElement(Me,{tooltipTitle:"Out"},r.a.createElement(ce.d,null));if(i)return r.a.createElement(Me,{tooltipTitle:"Folded"},r.a.createElement(qe.a,null));if(d)return r.a.createElement(Me,{tooltipTitle:"All in"},r.a.createElement(qe.b,null));if(a)return n?r.a.createElement(Le.a,null):l&&l>0?r.a.createElement(Le.b,null):l&&l<0?r.a.createElement(ce.c,null):null;if(!s)return u?r.a.createElement(Me,{tooltipTitle:"Already submitted guess"},r.a.createElement(ce.b,null)):r.a.createElement(Me,{tooltipTitle:"Not yet submitted guess"},r.a.createElement(De.b,null));if(c)return r.a.createElement(Me,{tooltipTitle:"Player's turn"},r.a.createElement(ce.a,{className:"text-red-600"}));var m=t.bettingState;return m&&Fe[m]?Fe[m]:r.a.createElement(Me,{tooltipTitle:"Waiting for turn"},r.a.createElement(Ge.a,null))},Qe=function(e,t){return e.bets.reduce((function(e,n){return e+(n.playerId===t?n.amount:0)}),0)},Ue=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-1]},He=function(e){var t;return null===e||void 0===e?void 0:e.bettingRounds[(null===e||void 0===e||null===(t=e.bettingRounds)||void 0===t?void 0:t.length)-1]},$e=function(e,t){var n=t.filter((function(e){return!e.isDead}));return e.guesses.length>=n.length},_e=function(e,t){if(!e.bets.length)return 0;var n=Qe(e,t),a=e.bets.reduce((function(e,t){return e[t.playerId]=(e[t.playerId]||0)+t.amount,e}),{});return Math.max.apply(Math,Object(V.a)(Object.values(a)))-n},Ye=function(e,t){return null===e||void 0===e?void 0:e.foldedPlayerIds.includes(t)},ze=function(e){return!!e.isOver||(e.question.type===K.MULTIPLE_CHOICE?e.bettingRounds.length>=4:e.question.hints.length+1<e.bettingRounds.length)},Ke=function(e,t,n,a){var r,l,o=Ue(n),i=He(o);if(o&&(null===i||void 0===i?void 0:i.currentPlayer.id)===a){if(_e(i,a)>e)throw new Error("Amount to call is greater than raised amount.");var s=null!==(r=null===(l=n.players.find((function(e){return e.id===a})))||void 0===l?void 0:l.money)&&void 0!==r?r:0;t({variables:{input:{gameId:n.id,playerId:a,amount:Math.min(e,s)}}})}},We=function(e,t,n,a){e({variables:{input:{gameId:t.id,playerId:a,guess:n}}})},Ve=(n(160),[1,9,5,2,11,4,8,10,6,3,12,7]),Je=function(e){var t=e.player,n=e.index,a=e.numberOfPlayers,l=e.isTurnPlayer,o=e.isAppPlayer,i=e.isWinningPlayer,s=e.isQuestionRoundOver,u=e.isShowdown,c=e.currentBettingRound,d=e.changeInMoney,m=e.hasFolded,p=e.isSpectator,f=e.allPlayersPlacedTheirGuess,b=e.guess,g=e.question,v=e.isGameOver,h=l&&!s?"isTurnPlayer":"",E=o?"bg-blue-200":"bg-gray-200",y=t.isDead?"is-dead":"",x=c?Qe(c,t.id):0,w=(null===g||void 0===g?void 0:g.type)!==K.GEO&&(p||!!s&&u&&!m),N=Ve.filter((function(e){return e<=a}))[n],O=t.money;return s&&!v&&(O+=x),r.a.createElement("div",{className:"player player-".concat(N," shadow-md ").concat(h," ").concat(E," ").concat(y," md:absolute")},r.a.createElement("span",{className:"status text-gray-900 shadow-lg ".concat(s&&d&&d>0?"bg-green-500":"bg-gray-400")},r.a.createElement(Be,{player:t,isWinningPlayer:i,isTurnPlayer:l,changeInMoney:d,isQuestionRoundOver:s,isDead:t.isDead,hasFolded:m,allPlayersPlacedTheirGuess:f,playerHasPlacedTheirGuess:!!b,playerIsAllIn:!t.isDead&&0===t.money})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"name"},t.name),r.a.createElement("div",{className:"flex items-center"},r.a.createElement(qe.b,{className:"mr-1"}),r.a.createElement("span",null,O),s&&d&&r.a.createElement("span",{className:"ml-1 ".concat(d>0?"text-green-500":"text-red-500")},"(",d>0?"+":"",d,")")),r.a.createElement("div",{className:"inner-info grid absolute text-sm left-48 md:left-auto sm:-right-3 md:right-0 md:text-lg md:grid-flow-auto text-gray-800 md:w-full"},!s&&!!x&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(qe.b,null)),r.a.createElement("span",null,x)),w&&(null===g||void 0===g?void 0:g.type)&&(null===b||void 0===b?void 0:b.guess)&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(ce.b,null)),r.a.createElement(se,{guess:null===b||void 0===b?void 0:b.guess,questionType:g.type,alternatives:g.alternatives})))))};function Ze(e){var t=e.usedQuestionRound,n=e.isGameFull,a=null===t||void 0===t?void 0:t.bettingRounds.reduce((function(e,t){return t.bets.forEach((function(t){e+=t.amount})),e}),0),l=n?"md:-right-5 md:-top-10":"md:left-24 md:bottom-20";return r.a.createElement("div",{className:"text-2xl md:text-3xl self-start z-1003 md:absolute ".concat(l)},r.a.createElement("div",{className:"flex -mb-3"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(qe.b,null)),r.a.createElement("span",null,a)),r.a.createElement("span",{className:"text-xs md:text-sm"},"In Pot"))}var Xe={title:{fontSize:"0.7em",borderTop:"1px solid #ebebeb",marginTop:"0.3em",paddingTop:"1em"},currentHint:{fontSize:"1.4em"},oldHint:{fontSize:"0.7em"}};function et(e){var t=e.usedQuestionRound,n=t.question.hints,a=t.isOver?n.length:Math.min(t.bettingRounds.length-1,n.length);return a<1?null:(null===n||void 0===n?void 0:n.length)?r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("span",{style:Xe.title},"Hint",a>1&&"s"," (",a,"/",n.length,"):"),r.a.createElement("ol",null,t.question.hints.slice(0,a).map((function(e,n){return r.a.createElement("li",{key:e,style:a!==n+1||ze(t)?Xe.oldHint:Xe.currentHint},e)})))):null}var tt={question:{fontSize:"1.6em"},answer:{fontSize:"1.6em"}};function nt(e){var t=e.game,n=e.usedQuestionRound,a=n.question.type!==K.MULTIPLE_CHOICE&&n.bettingRounds.length<=1&&!n.isOver,l=t.questionRounds.length+t.questions.length;return r.a.createElement("div",null,r.a.createElement("p",{className:"mb-0",style:!a&&{fontSize:"0.7em"}||{}},"Question (",t.questionRounds.length,"/",l,"):"),r.a.createElement("p",{style:a&&tt.question||{}},n.question.question),r.a.createElement(et,{usedQuestionRound:n}),[K.NUMERICAL,K.DATE].includes(n.question.type)&&ze(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:tt.answer},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(se,{guess:n.question.answer,questionType:n.question.type}))),n.question.explanation&&r.a.createElement("p",null,n.question.explanation)))}var at=n(16),rt=n(216),lt=n(217),ot=n(218),it=n(219),st=n(226),ut=n(220),ct=n(221),dt=n(227),mt=n(222),pt=(n(161),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>1e3?0:e>100?1:e>1?2:4});function ft(e){var t=e.handleUpdate,n=Object(a.useState)(null),l=Object(g.a)(n,2),o=l[0],i=l[1];return Object(rt.b)({click:function(e){i(e.latlng),t({latitude:e.latlng.lat,longitude:e.latlng.lng})}}),o&&r.a.createElement(lt.a,{position:o})}function bt(e){var t=e.children,n=e.markers,a=Object(rt.a)(),l=Object(at.latLngBounds)([]);return null===n||void 0===n||n.forEach((function(e){l.extend([e.position.latitude,e.position.longitude])})),l.isValid()&&a.flyToBounds(l,{padding:[10,10],maxZoom:n.length>1?15:5}),r.a.createElement(ot.a,null,t)}var gt=r.a.memo((function(e){var t=e.markers,n=void 0===t?[]:t,a=e.handleOnClick,l=e.className,o=n.find((function(e){return e.isAnswer})),i=!!o&&n.filter((function(e){return!e.isAnswer&&e.distanceToAnswer})).map((function(e){var t;return{line:[new at.LatLng(e.position.latitude,e.position.longitude),new at.LatLng(o.position.latitude,o.position.longitude)],label:null===(t=e.distanceToAnswer)||void 0===t?void 0:t.toFixed(pt(e.distanceToAnswer))}}));return r.a.createElement(it.a,{center:[0,0],zoom:1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,scrollWheelZoom:!0,className:l},r.a.createElement(st.a,{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.svg"}),a&&r.a.createElement(ft,{handleUpdate:a}),i&&i.map((function(e){var t=e.line,n=e.label;return r.a.createElement(ut.a,{key:t.toString(),positions:t,color:"#393d4e",weight:2},n&&r.a.createElement(ct.a,{className:"distance-label",direction:"center",permanent:!0},n," km"))})),n.length&&r.a.createElement(bt,{markers:n},n.map((function(e){var t=e.position,n=e.label,a=e.radiusInKilometres;return a?r.a.createElement(dt.a,{center:[t.latitude,t.longitude],radius:1e3*a,key:t.latitude},n&&r.a.createElement(ct.a,{direction:"center",permanent:!0},n)):r.a.createElement(lt.a,{alt:"position marker",position:[t.latitude,t.longitude],key:t.latitude},n&&r.a.createElement(ct.a,{direction:"bottom",offset:[-15,20],permanent:!0},n))}))))}),(function(e,t){return Object(mt.a)(e.markers,t.markers)}));function vt(e){var t=e.usedQuestionRound,n=e.isSpectator,a=e.playerId,l=e.players,o=e.className,i=t.question.type;if(!t||i!==K.GEO)return null;var s=t.guesses.find((function(e){return e.playerId===a})),u=(null===s||void 0===s?void 0:s.guess.geo)?[{position:s.guess.geo,label:"You",distanceToAnswer:s.difference}]:[];return(n||t.isOver&&t.isShowdown)&&u.push.apply(u,Object(V.a)(t.guesses.reduce((function(e,r){var o=r.guess,i=r.playerId,s=r.difference;if(o.geo&&a!==i&&(n||!Ye(t,i))){var u,c=(null===(u=l.find((function(e){return e.id===i})))||void 0===u?void 0:u.name)||"";e.push({position:o.geo,label:c,distanceToAnswer:s})}return e}),[]))),ze(t)&&t.question.answer.geo&&u.push({position:t.question.answer.geo,label:r.a.createElement(De.a,{className:"text-green-500 text-2xl"}),isAnswer:!0,radiusInKilometres:t.question.answer.geo.toleranceRadius}),r.a.createElement(gt,{className:o,markers:u})}n(162);function ht(e){var t,n=e.usedQuestionRound,a=e.handleClick,l=e.guess;if(n.question.type!==K.MULTIPLE_CHOICE)return null;if(4!==(null===(t=n.question.alternatives)||void 0===t?void 0:t.length))throw new Error("missing alternatives for multiple choice question");var o=n.question.alternatives.map((function(e){var t;return{value:e,active:!(null===(t=n.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})),i=ze(n),s=n.question.answer.numerical;return r.a.createElement("div",{className:"mc-container my-2"},o.map((function(e,t){var n="text-center border-2 border-blue-600 rounded-lg shadow px-4 py-3 font-bold focus:outline-none";return a||(n+=" no-pointer"),e.active&&a?(n+=" hover:bg-blue-600 hover:text-white",n+=l===t?" text-white bg-blue-600":" text-blue-600"):n+=" text-blue-600",r.a.createElement("button",{key:"".concat(e.value,"_").concat(t),className:n,onClick:function(){return a&&a(t)},disabled:!e.active||i&&t!==s},e.value)})))}n(163);var Et=function(e){var t,n,a=e.game,l=e.usedQuestionRound,o=e.currentBettingRound,i=e.playerId,s=e.isSpectator,u=(null===l||void 0===l?void 0:l.question.type)===K.GEO,c=(null===l||void 0===l?void 0:l.question.type)===K.MULTIPLE_CHOICE,d=l&&a.players&&$e(l,a.players),m=function(e){if(e.isOver)return e.players.reduce((function(e,t,n){return 0===n?e:e[0].money<t.money?[t]:e[0].money===t.money?[].concat(Object(V.a)(e),[t]):e}),[e.players[0]]).map((function(e){return e.id}))}(a)||[];return r.a.createElement("div",{className:"flex flex-col items-center"},u&&r.a.createElement(nt,{game:a,usedQuestionRound:l}),r.a.createElement("div",{className:"relative w-full md:w-4/5 my-6"},r.a.createElement("div",{className:"poker-table ".concat(u?"md:p-0 md:overflow-hidden":"md:px-48 md:py-24"," rounded-full flex md:justify-center flex-col-reverse md:flex-col md:items-center md:w-full md:border-8 md:border-white md:shadow-xl")},r.a.createElement("div",{className:"grid gap-y-6 mt-7 px-5 md:mt-0 md:px-0"},a.players.map((function(e,t){var n,u=((null===(n=l.results)||void 0===n?void 0:n.find((function(t){var n=t.playerId;return e.id===n})))||{}).changeInMoney,c=!(!l||!Ye(l,e.id)),p=l.guesses.find((function(t){return t.playerId===e.id}));return r.a.createElement(Je,Object.assign({key:e.id},{player:e,index:t,numberOfPlayers:a.players.length,currentBettingRound:o,changeInMoney:u,isAppPlayer:e.id===i,isTurnPlayer:e.id===(null===o||void 0===o?void 0:o.currentPlayer.id),isQuestionRoundOver:!!(null===l||void 0===l?void 0:l.isOver),isShowdown:!!(null===l||void 0===l?void 0:l.isShowdown),hasFolded:c,isSpectator:s,allPlayersPlacedTheirGuess:d,guess:p,question:l.question,isWinningPlayer:m.includes(e.id),isGameOver:a.isOver}))}))),r.a.createElement("div",{className:"flex flex-col gap-2 justify-center items-center w-full h-full"},!u&&r.a.createElement("div",null,r.a.createElement(Ze,{usedQuestionRound:l,isGameFull:12===a.players.length}),r.a.createElement(nt,{game:a,usedQuestionRound:l})),u&&r.a.createElement("div",{className:"flex flex-col-reverse w-full"},r.a.createElement(vt,{usedQuestionRound:l,isSpectator:s,playerId:i,players:a.players,className:"map"}),r.a.createElement(Ze,{usedQuestionRound:l,isGameFull:12===a.players.length})),c&&r.a.createElement(ht,{usedQuestionRound:l,alternatives:(null===l||void 0===l||null===(t=l.question.alternatives)||void 0===t?void 0:t.map((function(e){var t;return{value:e,active:!(null===(t=l.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})))||[],guess:null===l||void 0===l||null===(n=l.guesses.find((function(e){return e.playerId===i})))||void 0===n?void 0:n.guess.numerical})))))};function yt(e){var t=e.handleSubmit,n=Object(a.useState)(""),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:o,onChange:function(e){var t=parseFloat(e.target.value);i(0===t?0:t||e.target.value)},onKeyUp:function(e){13===e.which&&(t(o),i(""))},type:"number",className:"bg-white border border-gray-400 px-4",placeholder:"Your answer","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:"string"===typeof o||!o&&0!==o,onClick:function(){t(o),i("")}},"Submit"),r.a.createElement("p",{className:"-mt-2 text-sm h-2"},r.a.createElement(se,{guess:{numerical:"number"===typeof o?o:parseFloat(o||"")},questionType:K.NUMERICAL}))))}var xt=function(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(g.a)(n,2),o=l[0],i=l[1],s=function(e){if(e){var n=parseInt(e.replaceAll("-",""));n&&(t(n),i(void 0))}};return r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:o,onChange:function(e){i(e.target.value)},onKeyUp:function(e){13===e.which&&s(o)},type:"date",className:"bg-white border border-gray-400 px-4",placeholder:"Your answer","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!o,onClick:function(){s(o)}},"Submit"))},wt=function(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(gt,{handleOnClick:function(e){i(e)}}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){o&&(t(o),i(void 0))},disabled:!(null===o||void 0===o?void 0:o.latitude)||!o.longitude},"Submit"))};function Nt(e){var t=e.usedQuestionRound,n=e.handleSubmit,l=e.alternatives,o=Object(a.useState)(),i=Object(g.a)(o,2),s=i[0],u=i[1];if(4!==(null===l||void 0===l?void 0:l.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ht,{usedQuestionRound:t,handleClick:u,guess:s}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){(s||0===s)&&(n(s),u(void 0))},disabled:!s&&0!==s},"Submit"))}function Ot(e){var t=e.currentQuestionRound,n=e.player,a=e.addGuessMutation,l=e.game,o=e.showAnswerDrawer,i=e.setShowAnswerDrawer,s=e.hasPlayerPlacedGuessInCurrentQuestionRound;if(!n||n.isDead)return null;var u=function(e){!e&&0!==e||"number"!==typeof e||(We(a,l,{numerical:e},n.id),i(!1))},c=function(e){We(a,l,{geo:e},n.id),i(!1)};return r.a.createElement(Se,{onClose:function(){i(!1)},anchor:"bottom",open:(o||1===l.questionRounds.length)&&!s,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},t.question.question),r.a.createElement("p",{className:"mt-4 text-sm"},"Your answer"),function(){var e;switch(t.question.type){case K.NUMERICAL:return r.a.createElement(yt,{handleSubmit:u});case K.DATE:return r.a.createElement(xt,{handleSubmit:u});case K.GEO:return r.a.createElement(wt,{handleSubmit:c});case K.MULTIPLE_CHOICE:var n=null===(e=t.question.alternatives)||void 0===e?void 0:e.map((function(e){return{value:e,active:!0}}));return r.a.createElement(Nt,{usedQuestionRound:t,alternatives:n,handleSubmit:u});default:throw new Error("Unknow Question Type")}}()))}var It=n(117);function jt(e){var t=e.text,n=e.handleOnClick,a=e.isDisabled;return r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-3 md:px-4 md:py-3 transition duration-300 ease-in-out hover:bg-blue-600 w-full text-xs md:text-base",onClick:n,disabled:a},t)}function Ct(e){var t,n=e.currentBettingRound,l=e.game,o=e.handleRaise,i=e.placeBet,s=e.playerId,u=e.showRaiseDrawer,c=e.setShowRaiseDrawer,d=_e(n,s),m=null===(t=l.players.find((function(e){return e.id===s})))||void 0===t?void 0:t.money,p=Object(a.useState)(d),f=Object(g.a)(p,2),b=f[0],v=f[1],h=function(){o(b,i,l,s),c(!1)};return r.a.createElement(Se,{title:"Raise",anchor:"bottom",open:u,onClose:function(){c(!1)},variant:"temporary",className:"drawer"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Raise by how much?"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:b,onChange:function(e){v(Math.round(parseFloat(e.target.value)))},onKeyUp:function(e){13===e.which&&h()},type:"number",pattern:"[0-9]",min:d,max:m,className:"bg-white border border-gray-400 px-4",placeholder:"Amount to raise","aria-label":"Amount to raise","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{disabled:!!m&&(b<d||b>m),className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:h},"Submit")),r.a.createElement("div",{className:"flex"},m&&r.a.createElement(r.a.Fragment,null,[5,10,20,50].filter((function(e){return e<m})).map((function(e){return r.a.createElement("span",{key:e,style:{cursor:"pointer"},onClick:function(){return v(e)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},e)})),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return v(m)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},"All in")))))}function St(e){var t=e.game,n=e.usedQuestionRound,l=e.currentBettingRound,o=e.playerId,i=e.placeBet,s=e.isAppPlayerTurn,u=Object(a.useState)(!1),c=Object(g.a)(u,2),d=c[0],m=c[1];if(!n||!l)return null;var p=t.players.find((function(e){return e.id===o})),f=_e(l,o);return r.a.createElement("div",{className:"grid md:grid-cols-3 gap-3 md:gap-4"},r.a.createElement(jt,{text:f>0?"Call for ".concat(f):"Check",handleOnClick:function(){!function(e,t,n){var a,r,l=Ue(t),o=He(l);if(l&&(null===o||void 0===o?void 0:o.currentPlayer.id)===n){var i=_e(o,n),s=null!==(a=null===(r=t.players.find((function(e){return e.id===n})))||void 0===r?void 0:r.money)&&void 0!==a?a:0;e({variables:{input:{gameId:t.id,playerId:n,amount:Math.min(i,s)}}})}}(i,t,o)},isDisabled:!s}),r.a.createElement(jt,{text:"Raise",handleOnClick:function(){m(!0)},isDisabled:(null===p||void 0===p?void 0:p.money)&&f>=(null===p||void 0===p?void 0:p.money)||!s}),r.a.createElement(jt,{text:"Fold",handleOnClick:function(){!function(e,t,n){var a=Ue(t),r=He(a);a&&(null===r||void 0===r?void 0:r.currentPlayer.id)===n&&e({variables:{input:{gameId:t.id,playerId:n,amount:-1}}})}(i,t,o)},isDisabled:!s}),r.a.createElement(Ct,{game:t,placeBet:i,playerId:o,currentBettingRound:l,handleRaise:Ke,showRaiseDrawer:d,setShowRaiseDrawer:m}))}var kt,Rt=function(e){var t,n,a,l=e.game,o=e.usedQuestionRound,i=e.player,s=e.placeBet,u=e.hasPlayerPlacedGuessInCurrentQuestionRound,c=e.setShowAnswerDrawer,d=e.currentBettingRound,m=(null===d||void 0===d?void 0:d.currentPlayer.id)===i.id&&$e(o,l.players),p=o.guesses.find((function(e){return e.playerId===i.id})),f=null!==(t=null===(n=l.players.find((function(e){return e.id===i.id})))||void 0===n?void 0:n.money)&&void 0!==t?t:0,b=d&&Qe(d,i.id)||0;o.isOver&&i.id&&d&&(f+=b);var g=o.question.type,v=((null===o||void 0===o||null===(a=o.results)||void 0===a?void 0:a.find((function(e){var t=e.playerId;return i.id===t})))||{}).changeInMoney,h=void 0===v?0:v,E=o&&l.players&&$e(o,l.players);return r.a.createElement("footer",{className:"fixed shadow-top-md bottom-0 left-0 w-full h-44 bg-gray-200 px-4 flex flex-col items-center justify-end z-1003"},r.a.createElement("div",{className:"w-full flex flex-col items-end md:items-center justify-center max-w-xl my-auto"},r.a.createElement("div",{className:"absolute left-4 md:left-10 top-0 flex flex-col items-center max-w-2xs text-center"},r.a.createElement("span",{className:"absolute shadow-top-md top-0 h-20 w-20 -mt-10 rounded-full flex items-center justify-center text-4xl ".concat(o.isOver&&h>0?"bg-green-500":"bg-gray-400"," ").concat(o.question.type===K.GEO?"left-0":"")},m&&!o.isOver&&r.a.createElement("span",{className:"absolute"},r.a.createElement(It.CountdownCircleTimer,{isPlaying:m,size:80,strokeWidth:5,duration:15,colors:[["#004777",.5],["#A30000",1]],trailColor:"#9ca3af"})),r.a.createElement("span",null,r.a.createElement(Be,{player:i,isQuestionRoundOver:o.isOver,isTurnPlayer:!o.isOver&&i.id===(null===d||void 0===d?void 0:d.currentPlayer.id),hasFolded:!(!o||!Ye(o,i.id)),changeInMoney:h,allPlayersPlacedTheirGuess:E,playerHasPlacedTheirGuess:!!p}))),g!==K.GEO&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-xs mt-12"},"Your Answer"),r.a.createElement("span",{className:"text-2xl overflow-hidden max-h-24"},p&&r.a.createElement(se,{guess:p.guess,questionType:g,alternatives:o.question.alternatives})))),r.a.createElement("div",{className:"flex items-center ".concat(o.isOver?"flex-col":"md:flex-col")},r.a.createElement("div",{className:"flex flex-col items-center mr-3 sm:mr-5 md:mr-0"},r.a.createElement("p",{className:"text-xs"},"Available money"),r.a.createElement("div",{className:"flex items-center mb-6 text-2xl"},r.a.createElement(qe.b,{className:"mx-1"}),r.a.createElement("span",null,f),0!==h&&r.a.createElement("span",{className:"ml-2 ".concat(h>0?"text-green-500":"text-red-500")},"(",h>0?"+":"",h,")"))),!u&&l.questionRounds.length>1&&r.a.createElement("button",{className:"new-question-button bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-2 md:px-4 md:py-3 text-xs md:text-base transition duration-300 ease-in-out hover:bg-blue-600 mx-auto",onClick:function(){c(!0)}},"Answer New Question"),u&&i.id&&r.a.createElement(St,{game:l,usedQuestionRound:o,currentBettingRound:d,placeBet:s,playerId:i.id,isAppPlayerTurn:m}))))},Pt=n(118),qt=n.n(Pt),At=function(e){var t=e.gameId,n=e.playerId,a=e.gameHasStarted,l=e.setPlayerId,o=Object(v.b)(B,{onError:Q,onCompleted:function(){t&&(!function(e){localStorage.removeItem("".concat(be,"_").concat(e))}(t),l(void 0))}}),i=Object(g.a)(o,1)[0];if(!t||!n)return null;return r.a.createElement(Ne,{onConfirm:function(){i({variables:{playerId:n,gameId:t}})},dialogTitle:r.a.createElement(r.a.Fragment,null,"Are you sure?",a&&r.a.createElement("p",null,"If you leave the game, you cannot join again later.")),confirmLabel:"Leave Game",buttonLabel:r.a.createElement(qt.a,null),btnClassName:"leave-game btn btn-link btn-lg"})},Tt=n.p+"static/media/turn-notification.e2e956ce.mp3",Dt=n.p+"static/media/turn-alert.11acdad1.wav",Lt=(n(168),function(e){window.navigator.vibrate&&window.navigator.vibrate(e)});var Gt=function(){var e=Object(a.useState)(void 0),t=Object(g.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(void 0),i=Object(g.a)(o,2),s=i[0],u=i[1],c=Ue(s),d=He(c),m=Object(a.useState)(!1),p=Object(g.a)(m,2),f=p[0],h=p[1],E=Object(a.useState)(!1),y=Object(g.a)(E,2),x=y[0],w=y[1],N=Object(b.g)().gameId,O=Object(a.useState)(),I=Object(g.a)(O,2),j=I[0],C=I[1],S=Object(a.useState)(new Audio(Tt)),k=Object(g.a)(S,1)[0],R=Object(a.useState)(new Audio(Dt)),P=Object(g.a)(R,1)[0],q=function(e){Q(e),C(e)},A=Object(v.a)(T,{fetchPolicy:"cache-and-network",onError:q,onCompleted:function(e){var t=e.game;u(t)}}),B=Object(g.a)(A,1)[0],U=Object(v.b)(L,{onError:q}),H=Object(g.a)(U,2),$=H[0],_=H[1].data,Y=Object(v.b)(G,{onError:q}),z=Object(g.a)(Y,1)[0],K=Object(v.b)(M,{onError:q}),W=Object(g.a)(K,1)[0],V=Object(v.b)(F,{onError:q}),J=Object(g.a)(V,1)[0],Z=Object(v.c)(D,{variables:{gameId:N,hash:he(N)||ve(N)},onSubscriptionData:function(e){var t,a,r=e.subscriptionData;clearInterval(kt);var l=null===(t=r.data)||void 0===t?void 0:t.gameUpdated;u(l);var o=Ue(l),i=He(o),s=null===(a=r.data)||void 0===a?void 0:a.gameUpdated.players,c=o&&s&&$e(o,s);c&&w(!1),!(null===l||void 0===l?void 0:l.isOver)&&(null===i||void 0===i?void 0:i.currentPlayer.id)===n&&c&&(k.play(),Lt(200),kt=setInterval((function(){P.play(),Lt(200)}),15e3))}}).error;if(Object(a.useEffect)((function(){Z&&q(Z)}),[Z]),Object(a.useEffect)((function(){B({variables:{gameId:N}})}),[B,N]),Object(a.useEffect)((function(){if(N){var e,t=function(e){return localStorage.getItem("".concat(be,"_").concat(e))}(N),n=null===_||void 0===_||null===(e=_.addPlayer)||void 0===e?void 0:e.id;t&&l(t),n&&(!function(e,t){localStorage.setItem("".concat(be,"_").concat(e),t)}(N,n),l(n))}}),[N,_]),!s)return r.a.createElement("h3",null,"Loading...");if(j)return r.a.createElement("p",null,"A technical error occurred. Try to refresh the page");var X=s.players.find((function(e){return e.id===n})),ee=!!(null===c||void 0===c?void 0:c.guesses.find((function(e){return e.playerId===n}))),te=!!s.questionRounds.length,ne=te&&(!X||X.isDead),ae=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-(e.isOver?1:2)]}(s),re=!!ae&&(s.isOver||!ee&&!ne||ne&&!!c&&!x&&!$e(c,s.players))?ae:c;return r.a.createElement("div",{className:"p-2 flex flex-col md:justify-center ".concat(ne||!te?"min-h-screen":"min-h-screen-minus-52 mb-52")},r.a.createElement("div",{className:"flex flex-col md:my-auto"},!te&&r.a.createElement(Pe,{players:s.players,gameLink:window.location.href,startGame:z,gameId:s.id,createPlayer:$,playerId:n,setNames:s.setNames}),te&&re&&r.a.createElement(Et,{game:s,usedQuestionRound:re,currentBettingRound:d,playerId:n,isSpectator:ne}),ne&&(null===re||void 0===re?void 0:re.isOver)&&!s.isOver&&r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mx-auto mt-5",onClick:function(){w(!0)}},"Show Next Question")),c&&n&&r.a.createElement(Ot,{game:s,addGuessMutation:J,currentQuestionRound:c,player:X,showAnswerDrawer:f,setShowAnswerDrawer:h,hasPlayerPlacedGuessInCurrentQuestionRound:ee}),!s.isOver&&X&&!ne&&re&&r.a.createElement(Rt,{game:s,usedQuestionRound:re,placeBet:W,player:X,startGame:z,hasPlayerPlacedGuessInCurrentQuestionRound:ee,setShowAnswerDrawer:h,currentBettingRound:d}),r.a.createElement(At,{gameId:N,playerId:n,gameHasStarted:te,setPlayerId:l}))};function Mt(){return r.a.createElement("p",null,"Page not found.")}var Ft=function(){return r.a.createElement("div",{className:"mx-auto flex flex-col h-full max-w-full sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl px-3"},r.a.createElement(i.b,{to:"/",className:"mt-4 text-3xl font-bold"},"Certainty Poker"),r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",component:fe,exact:!0}),r.a.createElement(b.a,{path:"/:gameId",component:Gt,exact:!0}),r.a.createElement(b.a,{path:"/questions/:setName",component:fe,exact:!0}),r.a.createElement(b.a,{component:Mt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Bt="s://certainty-poker.herokuapp.com",Qt=(n(169),new d.a({uri:"http".concat(Bt,"/query")})),Ut=new c.a({uri:"ws".concat(Bt,"/query"),options:{reconnect:!0}}),Ht=Object(m.d)((function(e){var t=e.query,n=Object(p.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),Ut,Qt),$t=new s.c({link:Ht,cache:new f.a});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{client:$t},r.a.createElement(i.a,null,r.a.createElement(Ft,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[178,1,2]]]);
//# sourceMappingURL=main.7cf914fc.chunk.js.map