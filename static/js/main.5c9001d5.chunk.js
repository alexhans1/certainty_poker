(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{153:function(e,t){},155:function(e,t){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},206:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(14),o=n.n(l),i=n(42),s=n(50),c=n(22),u=n(132),m=n(135),d=n(27),p=n(5),f=n(134),b=n(48),g=n(8),v=n(31),h=n(38),E=n(240),y=n.n(E);function x(){var e=Object(h.a)(["\n  mutation removePlayer($gameId: ID!, $playerId: ID!) {\n    removePlayer(gameId: $gameId, playerId: $playerId)\n  }\n"]);return x=function(){return e},e}function w(){var e=Object(h.a)(["\n  mutation addGuess($input: GuessInput!) {\n    addGuess(input: $input)\n  }\n"]);return w=function(){return e},e}function N(){var e=Object(h.a)(["\n  mutation placeBet($input: BetInput!) {\n    placeBet(input: $input)\n  }\n"]);return N=function(){return e},e}function O(){var e=Object(h.a)(["\n  mutation startGame($gameId: ID!) {\n    startGame(gameId: $gameId)\n  }\n"]);return O=function(){return e},e}function I(){var e=Object(h.a)(["\n  mutation addPlayer($input: PlayerInput!) {\n    addPlayer(input: $input) {\n      id\n      money\n      name\n    }\n  }\n"]);return I=function(){return e},e}function j(){var e=Object(h.a)(["\n  subscription GameUpdated($gameId: ID!, $hash: String!) {\n    gameUpdated(gameId: $gameId, hash: $hash) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return j=function(){return e},e}function C(){var e=Object(h.a)(["\n  query findGame($gameId: ID!) {\n    game(gameId: $gameId) {\n      id\n      setNames\n      questionRounds {\n        question {\n          id\n          hints\n          answer {\n            numerical\n            geo {\n              latitude\n              longitude\n              toleranceRadius\n            }\n          }\n          alternatives\n          hiddenAlternatives\n          question\n          explanation\n          type\n        }\n        foldedPlayerIds\n        bettingRounds {\n          currentPlayer {\n            id\n          }\n          bets {\n            amount\n            playerId\n          }\n        }\n        guesses {\n          guess {\n            numerical\n            geo {\n              latitude\n              longitude\n            }\n          }\n          playerId\n          difference\n        }\n        results {\n          playerId\n          changeInMoney\n        }\n        isOver\n        isShowdown\n      }\n      players {\n        id\n        money\n        name\n        isDead\n        bettingState\n      }\n      dealerId\n      questions {\n        id\n      }\n      isOver\n    }\n  }\n"]);return C=function(){return e},e}function S(){var e=Object(h.a)(["\n  query sets($setName: String) {\n    sets(setName: $setName) {\n      setName\n      numberOfQuestions\n      language\n    }\n  }\n"]);return S=function(){return e},e}function k(){var e=Object(h.a)(["\n  mutation uploadQuestions(\n    $questions: [QuestionInput!]!\n    $setName: String!\n    $isPrivate: Boolean!\n    $language: String!\n  ) {\n    uploadQuestions(\n      questions: $questions\n      setName: $setName\n      isPrivate: $isPrivate\n      language: $language\n    )\n  }\n"]);return k=function(){return e},e}function R(){var e=Object(h.a)(["\n  mutation createGame($setNames: [String!]!) {\n    createGame(setNames: $setNames) {\n      id\n    }\n  }\n"]);return R=function(){return e},e}var P=y()(R()),q=y()(k()),A=y()(S()),T=y()(C()),D=y()(j()),L=y()(I()),G=y()(O()),M=y()(N()),F=y()(w()),Q=y()(x()),B=n.p+"static/media/landing-page-image-1.6f6715eb.webp",U=n.p+"static/media/landing-page-image-2.b9e7983b.webp",H=n.p+"static/media/landing-page-image-3.e88c71cd.webp",$=n.p+"static/media/landing-page-image-4.4442528d.webp",_=n.p+"static/media/landing-page-image-phone.bec793b4.webp";function Y(){return r.a.createElement("div",{className:"grid grid-cols-3 gap-4 grid-flow-row-dense py-4 md:pb-12 h-full relative lg:overflow-hidden"},r.a.createElement("div",{className:"col-span-2 row-span-3 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:H,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-1 row-span-2 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:$,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-2 row-span-3 rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:B,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"col-span-1 row-span-5 rounded-tl-lg rounded-br-full flex justify-center items-center p-5 bg-blue-200"}),r.a.createElement("div",{className:"col-span-2 row-span-2 overflow-hidden rounded-lg flex justify-center items-center p-5 bg-beige"},r.a.createElement("img",{src:U,className:"rounded-xl",alt:"background"})),r.a.createElement("div",{className:"absolute rounded-2xl h-3/4 w-2/3 self-center justify-self-center flex justify-center"},r.a.createElement("img",{src:_,className:"rounded-xl h-full",alt:"background"})))}var z,K,W=n(45),V=n(49),J=n.n(V),Z=n(70),X=n(82),ee=n(47),te=n(213),ne=n(211),ae=n(113);!function(e){e.GEO="GEO",e.NUMERICAL="NUMERICAL",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE",e.DATE="DATE"}(z||(z={})),function(e){e.CHECKED="CHECKED",e.CALLED="CALLED",e.RAISED="RAISED"}(K||(K={}));var re={GB:"English",FR:"French",ES:"Spanish",CN:"Chinese",DE:"German",ZA:"Africaans",AL:"Albanian",DZ:"Algerian",SA:"Arab",AM:"Armenian",BD:"Bangladeshi",BG:"Bulgarian",KH:"Cambodian",HR:"Croatian",CZ:"Czech",DK:"Danish",NL:"Dutch",EE:"Estonian",FI:"Finnish",GR:"Greek",IL:"Hebrew",HU:"Hungarian",IN:"Indian",IT:"Italian",JP:"Japanese",KR:"Korean",LV:"Latvian",LT:"Lithuanian",MY:"Malaysian",MN:"Mongolian",NO:"Norwegian",PL:"Polish",BR:"Portuguese",RO:"Romanian",RU:"Russian",RS:"Serbian",SK:"Slovakian",SI:"Slovenian",SE:"Swedish",TH:"Thai",TR:"Turkish",VN:"Vietnamese"};var le=n(115),oe=n.n(le);function ie(e){var t,n,a,l=e.guess,o=e.questionType,i=e.alternatives;if(!l)return null;switch(o){case z.NUMERICAL:var s="number"===typeof l.numerical?l.numerical:parseFloat(l.numerical||"");return isNaN(s)?null:r.a.createElement("span",null,(new Intl.NumberFormat).format(s));case z.DATE:return l.numerical?r.a.createElement("span",null,oe()(l.numerical.toString(),"YYYYMMDD").format("MMM DD, YYYY")):null;case z.GEO:return r.a.createElement("span",null,"[".concat(null===(t=l.geo)||void 0===t?void 0:t.latitude,", ").concat(null===(n=l.geo)||void 0===n?void 0:n.longitude,"]"));case z.MULTIPLE_CHOICE:if(4!==(null===i||void 0===i?void 0:i.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement("span",null,i[null!==(a=l.numerical)&&void 0!==a?a:-1]);default:throw new Error("Invalid question type")}}var se=function(e){var t=e.open,n=e.handleClose,l=e.fetchSets,o=e.setSelectedSets,i=e.setShownLanguage,s=Object(b.f)(),c=Object(a.useState)(!0),u=Object(g.a)(c,2),m=u[0],d=u[1],p=Object(a.useState)(),f=Object(g.a)(p,2),h=f[0],E=f[1],y=Object(a.useState)(""),x=Object(g.a)(y,2),w=x[0],N=x[1],O=Object(a.useState)(0),I=Object(g.a)(O,2),j=I[0],C=I[1],S=Object(a.useState)(),k=Object(g.a)(S,2),R=k[0],P=k[1],A=Object(a.useState)(),T=Object(g.a)(A,2),D=(T[0],T[1]),L=Object(v.b)(q,{variables:{setName:w,questions:h,isPrivate:!!j,language:R},onCompleted:function(){j?s.push("/questions/".concat(w)):l(),o([w]),i(R||"GB"),n(),N(""),E(void 0),d(!0)},onError:function(e){D((function(){throw e}))}}),G=Object(g.a)(L,2),M=G[0],F=G[1].error,Q=m?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-3"},"An example of the file format can be found"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900",target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/spreadsheets/d/1_cUrvCc3R2qTL_ME-A9wc9HmyH-zoAQkRnBs80dOPb8/edit?usp=sharing"},"here"),"."),r.a.createElement(ae.a,{onDrop:function(e){d(!1),E(function(e){return e.map((function(e){var t,n=e.data,a=n.question,r=n.type,l=n.answer,o=n.latitude,i=n.longitude,s=n.toleranceRadius,c=n.hint1,u=n.hint2,m=n.explanation,d=n.multiple_choice_alternative1,p=n.multiple_choice_alternative2,f=n.multiple_choice_alternative3,b=[c,u].filter(Boolean),g={};switch(r){case z.NUMERICAL:case z.DATE:g.numerical=l;break;case z.GEO:g.geo={latitude:o,longitude:i,toleranceRadius:s};break;case z.MULTIPLE_CHOICE:g.numerical=0,t=[l,d,p,f];break;default:throw new Error("invalid question type")}return{question:a,type:r,answer:g,hints:b,explanation:m,alternatives:t}}))}(e))},onError:function(e,t,n,a){console.error(e)},config:{header:!0},addRemoveButton:!0,removeButtonColor:"#659cef"},r.a.createElement("span",null,"Drop CSV file here or click to upload."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("input",{value:w,onChange:function(e){N(e.target.value)},type:"text",className:"rounded-md bg-white border border-gray-400 px-4 py-2 mr-4",placeholder:"Name for the question set","aria-label":"Name for the question set",required:!0,autoFocus:!0}),r.a.createElement("select",{className:"rounded-md bg-white border border-gray-400 px-4 py-2",required:!0,value:R,onChange:function(e){P(e.target.value)}},r.a.createElement("option",{selected:!0},"Language..."),Object.keys(re).map((function(e){return r.a.createElement("option",{key:e,value:e},Object(X.a)(e)," ",re[e])})))),r.a.createElement("h3",{className:"text-2xl mb-3 mt-5"},"Review your upload:"),r.a.createElement("hr",null),(h||[]).map((function(e){var t,n,a;return r.a.createElement("div",{key:e.question,className:"small"},r.a.createElement("p",{className:"my-3"},"Question: ",r.a.createElement("b",null,e.question)),e.type!==z.MULTIPLE_CHOICE&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"my-3"},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(ie,{guess:e.answer,questionType:e.type,alternatives:e.alternatives}))),(null===(t=e.answer.geo)||void 0===t?void 0:t.toleranceRadius)&&r.a.createElement("p",{className:"my-3"},"Tolerance radius in km: ",r.a.createElement("b",null,e.answer.geo.toleranceRadius))),!!(null===(n=e.hints)||void 0===n?void 0:n.length)&&r.a.createElement("p",{className:"my-3"},"Hints:"," ",e.hints.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",null,e)))}))),!!(null===(a=e.alternatives)||void 0===a?void 0:a.length)&&r.a.createElement("p",{className:"my-3"},"Alternatives:"," ",e.alternatives.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{key:e},r.a.createElement("b",{className:0===t?"text-green-500":""},e)))}))),e.explanation&&r.a.createElement("p",{className:"my-3"},"Explanation: ",r.a.createElement("b",null,e.explanation)),r.a.createElement("hr",{className:"my-3"}))})),r.a.createElement("div",{className:"flex"},r.a.createElement("input",{type:"checkbox",className:"mt-2",id:"isPrivateCheckbox",value:j,onChange:function(){C(j?0:1)}}),r.a.createElement("label",{className:"ml-2",htmlFor:"isPrivateCheckbox"},"Questions are private",r.a.createElement("br",null),r.a.createElement("span",null,"If checked, this set of questions will not appear in the list on the start screen."))),r.a.createElement("div",{className:"flex mt-3"},r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!w||!R,onClick:function(){M()}},"Upload"),r.a.createElement("button",{className:"border-2 boder-gray-800 rounded-lg font-bold hover:text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-gray-800 ml-3",onClick:function(){d(!0)}},"Upload new file")));return r.a.createElement(te.a,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:t,className:"flex justify-center items-center p-5",onClose:n,closeAfterTransition:!0,BackdropComponent:ne.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:"flex py-6 px-6 md:px-8 my-2 md:my-6 mx-2 md:mx-6 lg:mx-10 max-h-full bg-white rounded-md focus:outline-none"},r.a.createElement("div",{className:"overflow-y-auto flex-shrink-0 max-w-full flex flex-col"},r.a.createElement("h3",{className:"text-2xl mb-2"},"Upload a CSV file with custom questions"),Q,F&&r.a.createElement("div",{className:"alert alert-danger"},F.message))))},ce=n(43);var ue=function(e){var t=e.open,n=e.handleClose,a=e.children;return r.a.createElement(te.a,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:t,className:"flex justify-center items-center p-5",onClose:n,closeAfterTransition:!0,BackdropComponent:ne.a,BackdropProps:{timeout:500}},r.a.createElement("div",{className:"bg-white flex flex-col h-full relative rounded-md border border-gray-500 lg:w-2/3 md:w-3/4 overflow-y-auto py-5 px-8 focus:outline-none max-w-2xl"},r.a.createElement("button",{onClick:n,className:"absolute top-4 right-4"},r.a.createElement(ce.e,null)),a))};n(172);var me=function(e){var t=e.sets,n=e.open,l=e.handleClose,o=e.handleOpen,i=e.fetchSets,s=Object(b.f)(),c=Object(a.useState)(!1),u=Object(g.a)(c,2),m=u[0],d=u[1],p=Object(a.useState)([]),f=Object(g.a)(p,2),h=f[0],E=f[1],y=Object(a.useState)("GB"),x=Object(g.a)(y,2),w=x[0],N=x[1],O=Object(a.useState)([]),I=Object(g.a)(O,2),j=I[0],C=I[1],S=Object(a.useState)(),k=Object(g.a)(S,2),R=(k[0],k[1]);Object(a.useEffect)((function(){var e=t.reduce((function(e,t){return e.includes(t.language)||e.push(t.language),e}),[]).sort((function(e,t){return"GB"===e?-1:parseInt(e)-parseInt(t)}))||[];C(e),N(e.includes("GB")?"GB":e[0]),1===t.length&&E([t[0].setName])}),[t]);var q=Object(v.b)(P,{variables:{setNames:h},onCompleted:function(e){var t=e.createGame;s.push("/".concat(t.id))},onError:function(e){R((function(){throw e}))}}),A=Object(g.a)(q,2),T=A[0],D=A[1].loading,L="/"!==s.location.pathname,G=function(){var e=Object(Z.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.length&&T();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{open:n,handleClose:l},r.a.createElement("h2",{className:"text-2xl font-bold my-4"},"Select a set of questions to start a game"),L&&r.a.createElement("p",{className:"text-sm font-semibold my-3 px-6 py-3 bg-yellow-100 border border-yellow-300 rounded-xl"},"Make sure you copy and save this URL in order to start games with this question set at any time:",r.a.createElement("br",null),r.a.createElement("button",{onClick:Object(Z.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(window.location.href);case 2:case"end":return e.stop()}}),e)}))),className:"flex items-center text-blue-600 hover:text-blue-800 focus:outline-none font-bold"},window.location.href," ",r.a.createElement(ee.b,{className:"ml-2 text-lg"}))),r.a.createElement("p",{className:"my-2 font-semibold"},"Languages:"),r.a.createElement("div",{className:"flex mb-3"},j.map((function(e){return r.a.createElement("span",{key:e,className:"text-4xl mx-1 px-5 rounded-full border border-gray-800 hover:bg-gray-800 ".concat(e===w?"bg-gray-800":"opacity-50 hover:opacity-100"),onClick:function(){N(e)},style:{cursor:e===w?"default":"pointer"}},Object(X.a)(e))}))),Object.keys(re).includes(w)&&r.a.createElement("p",{className:"mt-3 font-semibold"},re[w]," question sets:"),r.a.createElement("div",{className:"set-container my-4"},t.filter((function(e){return e.language===w})).map((function(e){return r.a.createElement("span",{key:e.setName,className:"flex justify-center items-center rounded-md text-center px-4 py-3 border border-gray-800 hover:bg-gray-800 hover:text-white cursor-pointer ".concat((null===h||void 0===h?void 0:h.includes(e.setName))?"bg-gray-800 text-white":""),style:{gridColumn:"span ".concat(Math.round(Math.pow(e.setName.length,.35)))},onClick:function(t){t.metaKey?(null===h||void 0===h?void 0:h.includes(e.setName))?E(h.filter((function(t){return e.setName!==t}))):E([e.setName].concat(Object(W.a)(h))):E([e.setName])}},e.setName," (",e.numberOfQuestions,")")}))),r.a.createElement("p",{className:"mt-auto"},"You can also upload your own set of questions"," ",r.a.createElement("button",{onClick:function(){d(!0),l()},className:"text-blue-600 hover:text-blue-800 focus:outline-none font-bold"},"here"),"."),r.a.createElement("button",{className:"mt-3 bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mr-auto",onClick:G,disabled:!h.length},D?"Loading...":"Play for Free")),r.a.createElement(se,{open:m,handleClose:function(){o(),d(!1)},setShownLanguage:N,setSelectedSets:E,fetchSets:i}))};function de(e){var t=e.sets,n=void 0===t?[]:t,l=(e.setName,e.fetchSets),o=Object(b.f)(),i=Object(a.useState)(!1),s=Object(g.a)(i,2),c=s[0],u=s[1];return Object(a.useEffect)((function(){"/"!==o.location.pathname&&u(!0)}),[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col justify-end h-full py-8 lg:pb-32 lg:pt-0"},r.a.createElement("h1",{className:"text-5xl"},r.a.createElement("span",{className:"font-light italic"},"You think you know things?"),r.a.createElement("br",null),"Let's make it interesting then!"),r.a.createElement("p",{className:"text-xl mt-3"},r.a.createElement("b",null,"Free")," poker-like trivia game."),r.a.createElement("button",{onClick:function(){u(!0)},className:"border border-blue-600 rounded-full font-bold text-3xl text-blue-600 hover:text-white text-center px-8 py-4 transition duration-300 ease-in-out hover:bg-blue-600 mt-8 mr-auto focus:outline-none"},"Create Game"),r.a.createElement("p",{className:"mt-10"},"Check out the rules"," ",r.a.createElement("a",{className:"text-blue-700 hover:text-blue-900 p-0",href:"https://docs.google.com/document/d/13pwz8yzrPdY1DcQqXvhejJAxXdWdPrvxR6GUxg5PJPs/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer"},"here"),".")),r.a.createElement(me,{sets:n,fetchSets:l,open:c,handleOpen:function(){u(!0)},handleClose:function(){u(!1)}}))}n(173);var pe=function(){var e=Object(b.g)().setName,t=Object(a.useState)(),n=Object(g.a)(t,2),l=(n[0],n[1]),o=Object(v.a)(A,{fetchPolicy:"no-cache",onError:function(e){l((function(){throw e}))},variables:{setName:e}}),i=Object(g.a)(o,2),s=i[0],c=i[1].data;return Object(a.useEffect)((function(){s()}),[s,e]),r.a.createElement("div",{className:"grid lg:grid-cols-2 gap-x-8 relative landing-page"},r.a.createElement(de,{sets:null===c||void 0===c?void 0:c.sets,setName:e,fetchSets:s}),r.a.createElement(Y,null))},fe=n(58),be="player_id",ge="fingerprint",ve=function(e){localStorage.clear();var t=Math.random().toString(36).substring(2);return localStorage.setItem("".concat(ge,"_").concat(e),t),t},he=function(e){return localStorage.getItem("".concat(ge,"_").concat(e))};var Ee=function(e){var t=e.playerName;return r.a.createElement("div",{className:"rounded-xl border-2 px-3 h-16 w-36 flex items-center justify-center shadow"},r.a.createElement("span",{className:"overflow-hidden text-overflow-ellipsis"},t))},ye=n(244),xe=n(245),we=n(254);function Ne(e){var t=e.buttonLabel,n=e.dialogTitle,a=e.confirmLabel,l=e.onConfirm,o=e.isDisabled,i=e.btnClassName,s=r.a.useState(!1),c=Object(g.a)(s,2),u=c[0],m=c[1],d=function(){m(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:i||"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){m(!0)},disabled:o},t),r.a.createElement(ye.a,{open:u,onClose:d},r.a.createElement("div",{className:"px-4 py-2"},r.a.createElement(we.a,null,n),r.a.createElement(xe.a,null,r.a.createElement("button",{className:"btn btn-outline-dark",onClick:d},"Cancel"),r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){l(),m(!1)}},a)))))}var Oe=function(e){var t=e.startGame,n=e.gameId,a=e.isDisabled;return r.a.createElement(Ne,{onConfirm:function(){t({variables:{gameId:n}})},dialogTitle:"Are you sure you want to start the game? Once it's started no more players can join.",confirmLabel:"Start Game",buttonLabel:"Start Game",isDisabled:a})},Ie=n(20),je=n(25),Ce=n(255);n(174);function Se(e){var t=e.children,n=e.onClose,a=Object(je.a)(e,["children","onClose"]);return r.a.createElement(Ce.a,Object(Ie.a)({},a),r.a.createElement("div",{className:"flex items-center flex-col bg-gray-200 py-4 min-h-52"},n&&r.a.createElement("span",{id:"drawer-close",className:"ml-auto mr-3 -mb-4 -mt-2",onClick:n},"\u2573"),r.a.createElement("div",{className:"container px-5 pb-5 flex flex-col md:max-w-screen-md"},t)))}function ke(e){var t=e.createPlayer,n=e.gameId,l=e.playerId,o=Object(a.useState)(""),i=Object(g.a)(o,2),s=i[0],c=i[1],u=function(){l||t({variables:{input:{gameId:n,playerName:s}}})};return r.a.createElement(Se,{title:"Your name",anchor:"bottom",open:!l,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},"Enter your name"),r.a.createElement("p",{className:"mt-4 text-sm"},"Username"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:s,onChange:function(e){c(e.target.value)},onKeyUp:function(e){13===e.which&&u()},type:"text",className:"bg-white border border-gray-400 px-4",placeholder:"Your name","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",disabled:!s.length,className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:u},"Submit"))))}var Re,Pe=function(e){var t=e.players,n=e.gameLink,a=e.startGame,l=e.gameId,o=e.createPlayer,i=e.playerId,s=e.setNames;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-col items-center font-semibold mt-4 px-5 mx-auto md:max-w-screen-md"},r.a.createElement("h5",null,"Share this link with friends who want to join the game"),r.a.createElement("div",{className:"flex items-center justify-between w-full break-all px-4 md:px-10 py-4 mt-4 bg-gray-200 rounded-md"},r.a.createElement("span",{className:"w-3/4"},n),r.a.createElement("button",{className:"text-blue-500 hover:text-blue-600 p-2 ripple focus:outline-none text-2xl",onClick:Object(Z.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(window.location.href);case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(ee.b,null))),r.a.createElement("h4",{className:"mt-4 self-start text-lg"},"Question Set",s.length>1?"s":"",": ",s.join(", ")),r.a.createElement("p",{className:"mt-20 self-start"},"Players"),r.a.createElement("p",{className:"text-xs font-normal self-start w-full pb-2 border-b-2 border-grey-200"},12-t.length," Open spot",12-t.length===1?"":"s"),r.a.createElement("hr",null),r.a.createElement("div",{className:"mt-8 grid gap-8 w-full sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},t.map((function(e){return r.a.createElement(Ee,{key:e.id,playerName:null===e||void 0===e?void 0:e.name})}))),i&&r.a.createElement("div",{className:"mt-16 self-start"},r.a.createElement(Oe,{startGame:a,gameId:l,isDisabled:t.length<=1}))),r.a.createElement(ke,{gameId:l,createPlayer:o,playerId:i}))},qe=n(40),Ae=n(62),Te=n(253),De=n(100),Le=n(124),Ge=function(e){var t=e.tooltipTitle,n=e.children;return r.a.createElement(Te.a,{title:t},r.a.createElement("span",null,n))},Me=(Re={},Object(Ae.a)(Re,K.RAISED,r.a.createElement(Ge,{tooltipTitle:"Raised"},r.a.createElement(ee.a,null))),Object(Ae.a)(Re,K.CALLED,r.a.createElement(Ge,{tooltipTitle:"Called"},r.a.createElement(ee.c,null))),Object(Ae.a)(Re,K.CHECKED,r.a.createElement(Ge,{tooltipTitle:"Checked"},r.a.createElement(ee.c,null))),Re);var Fe=function(e){var t=e.player,n=e.isWinningPlayer,a=e.isQuestionRoundOver,l=e.changeInMoney,o=e.isDead,i=e.hasFolded,s=e.allPlayersPlacedTheirGuess,c=e.playerHasPlacedTheirGuess,u=e.isTurnPlayer,m=e.playerIsAllIn;if(o)return r.a.createElement(Ge,{tooltipTitle:"Out"},r.a.createElement(ce.d,null));if(i)return r.a.createElement(Ge,{tooltipTitle:"Folded"},r.a.createElement(qe.a,null));if(m)return r.a.createElement(Ge,{tooltipTitle:"All in"},r.a.createElement(qe.b,null));if(a)return n?r.a.createElement(De.a,null):l&&l>0?r.a.createElement(De.b,null):l&&l<0?r.a.createElement(ce.c,null):null;if(!s)return c?r.a.createElement(Ge,{tooltipTitle:"Already submitted guess"},r.a.createElement(ce.b,null)):r.a.createElement(Ge,{tooltipTitle:"Not yet submitted guess"},r.a.createElement(fe.c,null));if(u)return r.a.createElement(Ge,{tooltipTitle:"Player's turn"},r.a.createElement(ce.a,{className:"text-red-600"}));var d=t.bettingState;return d&&Me[d]?Me[d]:r.a.createElement(Ge,{tooltipTitle:"Waiting for turn"},r.a.createElement(Le.a,null))},Qe=function(e,t){return e.bets.reduce((function(e,n){return e+(n.playerId===t?n.amount:0)}),0)},Be=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-1]},Ue=function(e){var t;return null===e||void 0===e?void 0:e.bettingRounds[(null===e||void 0===e||null===(t=e.bettingRounds)||void 0===t?void 0:t.length)-1]},He=function(e,t){var n=t.filter((function(e){return!e.isDead}));return e.guesses.length>=n.length},$e=function(e,t){if(!e.bets.length)return 0;var n=Qe(e,t),a=e.bets.reduce((function(e,t){return e[t.playerId]=(e[t.playerId]||0)+t.amount,e}),{});return Math.max.apply(Math,Object(W.a)(Object.values(a)))-n},_e=function(e,t){return null===e||void 0===e?void 0:e.foldedPlayerIds.includes(t)},Ye=function(e){return!!e.isOver||(e.question.type===z.MULTIPLE_CHOICE?e.bettingRounds.length>=4:e.question.hints.length+1<e.bettingRounds.length)},ze=function(e,t,n,a){var r,l,o=Be(n),i=Ue(o);if(o&&(null===i||void 0===i?void 0:i.currentPlayer.id)===a){if($e(i,a)>e)throw new Error("Amount to call is greater than raised amount.");var s=null!==(r=null===(l=n.players.find((function(e){return e.id===a})))||void 0===l?void 0:l.money)&&void 0!==r?r:0;t({variables:{input:{gameId:n.id,playerId:a,amount:Math.min(e,s)}}})}},Ke=function(e,t,n,a){e({variables:{input:{gameId:t.id,playerId:a,guess:n}}})},We=(n(175),[1,9,5,2,11,4,8,10,6,3,12,7]),Ve=function(e){var t=e.player,n=e.index,a=e.numberOfPlayers,l=e.isTurnPlayer,o=e.isAppPlayer,i=e.isWinningPlayer,s=e.isQuestionRoundOver,c=e.isShowdown,u=e.currentBettingRound,m=e.changeInMoney,d=e.hasFolded,p=e.isSpectator,f=e.allPlayersPlacedTheirGuess,b=e.guess,g=e.question,v=e.isGameOver,h=l&&!s?"isTurnPlayer":"",E=o?"bg-blue-200":"bg-gray-200",y=t.isDead?"is-dead":"",x=u?Qe(u,t.id):0,w=(null===g||void 0===g?void 0:g.type)!==z.GEO&&(p||!!s&&c&&!d),N=We.filter((function(e){return e<=a}))[n],O=t.money;return s&&!v&&(O+=x),r.a.createElement("div",{className:"player player-".concat(N," shadow-md ").concat(h," ").concat(E," ").concat(y," md:absolute")},r.a.createElement("span",{className:"status text-gray-900 shadow-lg ".concat(s&&m&&m>0?"bg-green-500":"bg-gray-400")},r.a.createElement(Fe,{player:t,isWinningPlayer:i,isTurnPlayer:l,changeInMoney:m,isQuestionRoundOver:s,isDead:t.isDead,hasFolded:d,allPlayersPlacedTheirGuess:f,playerHasPlacedTheirGuess:!!b,playerIsAllIn:!t.isDead&&0===t.money})),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"name"},t.name),r.a.createElement("div",{className:"flex items-center"},r.a.createElement(qe.b,{className:"mr-1"}),r.a.createElement("span",null,O),s&&m&&r.a.createElement("span",{className:"ml-1 ".concat(m>0?"text-green-500":"text-red-500")},"(",m>0?"+":"",m,")")),r.a.createElement("div",{className:"inner-info grid absolute text-sm left-48 md:left-auto sm:-right-3 md:right-0 md:text-lg md:grid-flow-auto text-gray-800 md:w-full"},!s&&!!x&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(qe.b,null)),r.a.createElement("span",null,x)),w&&(null===g||void 0===g?void 0:g.type)&&(null===b||void 0===b?void 0:b.guess)&&r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(ce.b,null)),r.a.createElement(ie,{guess:null===b||void 0===b?void 0:b.guess,questionType:g.type,alternatives:g.alternatives})))))};function Je(e){var t=e.usedQuestionRound,n=e.isGameFull,a=null===t||void 0===t?void 0:t.bettingRounds.reduce((function(e,t){return t.bets.forEach((function(t){e+=t.amount})),e}),0),l=n?"md:-right-5 md:-top-10":"md:left-24 md:bottom-20";return r.a.createElement("div",{className:"text-2xl md:text-3xl self-start z-1003 md:absolute ".concat(l)},r.a.createElement("div",{className:"flex -mb-3"},r.a.createElement("span",{className:"mx-1"},r.a.createElement(qe.b,null)),r.a.createElement("span",null,a)),r.a.createElement("span",{className:"text-xs md:text-sm"},"In Pot"))}var Ze={title:{fontSize:"0.7em",borderTop:"1px solid #ebebeb",marginTop:"0.3em",paddingTop:"1em"},currentHint:{fontSize:"1.4em"},oldHint:{fontSize:"0.7em"}};function Xe(e){var t=e.usedQuestionRound,n=t.question.hints,a=t.isOver?n.length:Math.min(t.bettingRounds.length-1,n.length);return a<1?null:(null===n||void 0===n?void 0:n.length)?r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("span",{style:Ze.title},"Hint",a>1&&"s"," (",a,"/",n.length,"):"),r.a.createElement("ol",null,t.question.hints.slice(0,a).map((function(e,n){return r.a.createElement("li",{key:e,style:a!==n+1||Ye(t)?Ze.oldHint:Ze.currentHint},e)})))):null}var et={question:{fontSize:"1.6em"},answer:{fontSize:"1.6em"}};function tt(e){var t=e.game,n=e.usedQuestionRound,a=n.question.type!==z.MULTIPLE_CHOICE&&n.bettingRounds.length<=1&&!n.isOver,l=t.questionRounds.length+t.questions.length;return r.a.createElement("div",null,r.a.createElement("p",{className:"mb-0",style:!a&&{fontSize:"0.7em"}||{}},"Question (",t.questionRounds.length,"/",l,"):"),r.a.createElement("p",{style:a&&et.question||{}},n.question.question),r.a.createElement(Xe,{usedQuestionRound:n}),[z.NUMERICAL,z.DATE].includes(n.question.type)&&Ye(n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:et.answer},"Answer:"," ",r.a.createElement("b",null,r.a.createElement(ie,{guess:n.question.answer,questionType:n.question.type}))),n.question.explanation&&r.a.createElement("p",null,n.question.explanation)))}var nt=n(17),at=n(246),rt=n(247),lt=n(248),ot=n(249),it=n(256),st=n(250),ct=n(251),ut=n(257),mt=n(252),dt=(n(176),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>1e3?0:e>100?1:e>1?2:4});function pt(e){var t=e.handleUpdate,n=Object(a.useState)(null),l=Object(g.a)(n,2),o=l[0],i=l[1];return Object(at.b)({click:function(e){i(e.latlng),t({latitude:e.latlng.lat,longitude:e.latlng.lng})}}),o&&r.a.createElement(rt.a,{position:o})}function ft(e){var t=e.children,n=e.markers,a=Object(at.a)(),l=Object(nt.latLngBounds)([]);return null===n||void 0===n||n.forEach((function(e){l.extend([e.position.latitude,e.position.longitude])})),l.isValid()&&a.flyToBounds(l,{padding:[10,10],maxZoom:n.length>1?15:5}),r.a.createElement(lt.a,null,t)}var bt=r.a.memo((function(e){var t=e.markers,n=void 0===t?[]:t,a=e.handleOnClick,l=e.className,o=n.find((function(e){return e.isAnswer})),i=!!o&&n.filter((function(e){return!e.isAnswer&&e.distanceToAnswer})).map((function(e){var t;return{line:[new nt.LatLng(e.position.latitude,e.position.longitude),new nt.LatLng(o.position.latitude,o.position.longitude)],label:null===(t=e.distanceToAnswer)||void 0===t?void 0:t.toFixed(dt(e.distanceToAnswer))}}));return r.a.createElement(ot.a,{center:[0,0],zoom:1,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,scrollWheelZoom:!0,className:l},r.a.createElement(it.a,{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.svg"}),a&&r.a.createElement(pt,{handleUpdate:a}),i&&i.map((function(e){var t=e.line,n=e.label;return r.a.createElement(st.a,{key:t.toString(),positions:t,color:"#393d4e",weight:2},n&&r.a.createElement(ct.a,{className:"distance-label",direction:"center",permanent:!0},n," km"))})),n.length&&r.a.createElement(ft,{markers:n},n.map((function(e){var t=e.position,n=e.label,a=e.radiusInKilometres;return a?r.a.createElement(ut.a,{center:[t.latitude,t.longitude],radius:1e3*a,key:t.latitude},n&&r.a.createElement(ct.a,{direction:"center",permanent:!0},n)):r.a.createElement(rt.a,{alt:"position marker",position:[t.latitude,t.longitude],key:t.latitude},n&&r.a.createElement(ct.a,{direction:"bottom",offset:[-15,20],permanent:!0},n))}))))}),(function(e,t){return Object(mt.a)(e.markers,t.markers)}));function gt(e){var t=e.usedQuestionRound,n=e.isSpectator,a=e.playerId,l=e.players,o=e.className,i=t.question.type;if(!t||i!==z.GEO)return null;var s=t.guesses.find((function(e){return e.playerId===a})),c=(null===s||void 0===s?void 0:s.guess.geo)?[{position:s.guess.geo,label:"You",distanceToAnswer:s.difference}]:[];return(n||t.isOver&&t.isShowdown)&&c.push.apply(c,Object(W.a)(t.guesses.reduce((function(e,r){var o=r.guess,i=r.playerId,s=r.difference;if(o.geo&&a!==i&&(n||!_e(t,i))){var c,u=(null===(c=l.find((function(e){return e.id===i})))||void 0===c?void 0:c.name)||"";e.push({position:o.geo,label:u,distanceToAnswer:s})}return e}),[]))),Ye(t)&&t.question.answer.geo&&c.push({position:t.question.answer.geo,label:r.a.createElement(fe.a,{className:"text-green-500 text-2xl"}),isAnswer:!0,radiusInKilometres:t.question.answer.geo.toleranceRadius}),r.a.createElement(bt,{className:o,markers:c})}n(177);function vt(e){var t,n=e.usedQuestionRound,a=e.handleClick,l=e.guess;if(n.question.type!==z.MULTIPLE_CHOICE)return null;if(4!==(null===(t=n.question.alternatives)||void 0===t?void 0:t.length))throw new Error("missing alternatives for multiple choice question");var o=n.question.alternatives.map((function(e){var t;return{value:e,active:!(null===(t=n.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})),i=Ye(n),s=n.question.answer.numerical;return r.a.createElement("div",{className:"mc-container my-2"},o.map((function(e,t){var n="text-center border-2 border-blue-600 rounded-lg shadow px-4 py-3 font-bold focus:outline-none";return a||(n+=" no-pointer"),e.active&&a?(n+=" hover:bg-blue-600 hover:text-white",n+=l===t?" text-white bg-blue-600":" text-blue-600"):n+=" text-blue-600",r.a.createElement("button",{key:"".concat(e.value,"_").concat(t),className:n,onClick:function(){return a&&a(t)},disabled:!e.active||i&&t!==s},e.value)})))}n(178);var ht=function(e){var t,n,a=e.game,l=e.usedQuestionRound,o=e.currentBettingRound,i=e.playerId,s=e.isSpectator,c=(null===l||void 0===l?void 0:l.question.type)===z.GEO,u=(null===l||void 0===l?void 0:l.question.type)===z.MULTIPLE_CHOICE,m=l&&a.players&&He(l,a.players),d=function(e){if(e.isOver)return e.players.reduce((function(e,t,n){return 0===n?e:e[0].money<t.money?[t]:e[0].money===t.money?[].concat(Object(W.a)(e),[t]):e}),[e.players[0]]).map((function(e){return e.id}))}(a)||[];return r.a.createElement("div",{className:"flex flex-col items-center"},c&&r.a.createElement(tt,{game:a,usedQuestionRound:l}),r.a.createElement("div",{className:"relative w-full md:w-4/5 my-6"},r.a.createElement("div",{className:"poker-table ".concat(c?"md:p-0 md:overflow-hidden":"md:px-48 md:py-24"," rounded-full flex md:justify-center flex-col-reverse md:flex-col md:items-center md:w-full md:border-8 md:border-white md:shadow-xl")},r.a.createElement("div",{className:"grid gap-y-6 mt-7 px-5 md:mt-0 md:px-0"},a.players.map((function(e,t){var n,c=((null===(n=l.results)||void 0===n?void 0:n.find((function(t){var n=t.playerId;return e.id===n})))||{}).changeInMoney,u=!(!l||!_e(l,e.id)),p=l.guesses.find((function(t){return t.playerId===e.id}));return r.a.createElement(Ve,Object.assign({key:e.id},{player:e,index:t,numberOfPlayers:a.players.length,currentBettingRound:o,changeInMoney:c,isAppPlayer:e.id===i,isTurnPlayer:e.id===(null===o||void 0===o?void 0:o.currentPlayer.id),isQuestionRoundOver:!!(null===l||void 0===l?void 0:l.isOver),isShowdown:!!(null===l||void 0===l?void 0:l.isShowdown),hasFolded:u,isSpectator:s,allPlayersPlacedTheirGuess:m,guess:p,question:l.question,isWinningPlayer:d.includes(e.id),isGameOver:a.isOver}))}))),r.a.createElement("div",{className:"flex flex-col gap-2 justify-center items-center w-full h-full"},!c&&r.a.createElement("div",null,r.a.createElement(Je,{usedQuestionRound:l,isGameFull:12===a.players.length}),r.a.createElement(tt,{game:a,usedQuestionRound:l})),c&&r.a.createElement("div",{className:"flex flex-col-reverse w-full"},r.a.createElement(gt,{usedQuestionRound:l,isSpectator:s,playerId:i,players:a.players,className:"map"}),r.a.createElement(Je,{usedQuestionRound:l,isGameFull:12===a.players.length})),u&&r.a.createElement(vt,{usedQuestionRound:l,alternatives:(null===l||void 0===l||null===(t=l.question.alternatives)||void 0===t?void 0:t.map((function(e){var t;return{value:e,active:!(null===(t=l.question.hiddenAlternatives)||void 0===t?void 0:t.includes(e))}})))||[],guess:null===l||void 0===l||null===(n=l.guesses.find((function(e){return e.playerId===i})))||void 0===n?void 0:n.guess.numerical})))))};function Et(e){var t=e.handleSubmit,n=Object(a.useState)(""),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement("div",{className:"flex flex-col"},r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:o,onChange:function(e){var t=parseFloat(e.target.value);i(0===t?0:t||e.target.value)},onKeyUp:function(e){13===e.which&&(t(o),i(""))},type:"number",className:"bg-white border border-gray-400 px-4",placeholder:"Your answer","aria-label":"Your answer","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:"string"===typeof o||!o&&0!==o,onClick:function(){t(o),i("")}},"Submit"),r.a.createElement("p",{className:"-mt-2 text-sm h-2"},r.a.createElement(ie,{guess:{numerical:"number"===typeof o?o:parseFloat(o||"")},questionType:z.NUMERICAL}))))}var yt=n(125),xt=n.n(yt);function wt(e){var t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")}var Nt=function(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement(xt.a,{className:"bg-white",dayPlaceholder:"DD",monthPlaceholder:"MM",yearPlaceholder:"YYYY",calendarClassName:"hidden",showLeadingZeros:!0,calendarIcon:null,value:o,onChange:function(e){i(e)}}),r.a.createElement("button",{type:"submit",className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",disabled:!o,onClick:function(){o&&function(e){if(e){var n=parseInt(e.replaceAll("-",""));n&&(t(n),i(void 0))}}(wt(o))}},"Submit"),o&&r.a.createElement("p",{className:"-mt-2 text-sm h-2"},r.a.createElement(ie,{guess:{numerical:parseInt(wt(o))},questionType:z.DATE})))};function Ot(e){var t=e.handleSubmit,n=Object(a.useState)(),l=Object(g.a)(n,2),o=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(bt,{handleOnClick:function(e){i(e)}}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){o&&(t(o),i(void 0))},disabled:!(null===o||void 0===o?void 0:o.latitude)||!o.longitude},"Submit"))}function It(e){var t=e.usedQuestionRound,n=e.handleSubmit,l=e.alternatives,o=Object(a.useState)(),i=Object(g.a)(o,2),s=i[0],c=i[1];if(4!==(null===l||void 0===l?void 0:l.length))throw new Error("missing alternatives for multiple choice question");return r.a.createElement(r.a.Fragment,null,r.a.createElement(vt,{usedQuestionRound:t,handleClick:c,guess:s}),r.a.createElement("button",{className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:function(){(s||0===s)&&(n(s),c(void 0))},disabled:!s&&0!==s},"Submit"))}function jt(e){var t=e.currentQuestionRound,n=e.player,a=e.addGuessMutation,l=e.game,o=e.showAnswerDrawer,i=e.setShowAnswerDrawer,s=e.hasPlayerPlacedGuessInCurrentQuestionRound;if(!n||n.isDead)return null;var c=function(e){!e&&0!==e||"number"!==typeof e||(Ke(a,l,{numerical:e},n.id),i(!1))},u=function(e){Ke(a,l,{geo:e},n.id),i(!1)};return r.a.createElement(Se,{onClose:function(){i(!1)},anchor:"bottom",open:(o||1===l.questionRounds.length)&&!s,variant:"temporary"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"font-bold"},t.question.question),r.a.createElement("p",{className:"mt-4 text-sm"},"Your answer"),function(){var e;switch(t.question.type){case z.NUMERICAL:return r.a.createElement(Et,{handleSubmit:c});case z.DATE:return r.a.createElement(Nt,{handleSubmit:c});case z.GEO:return r.a.createElement(Ot,{handleSubmit:u});case z.MULTIPLE_CHOICE:var n=null===(e=t.question.alternatives)||void 0===e?void 0:e.map((function(e){return{value:e,active:!0}}));return r.a.createElement(It,{usedQuestionRound:t,alternatives:n,handleSubmit:c});default:throw new Error("Unknow Question Type")}}()))}var Ct=n(126);function St(e){var t=e.text,n=e.handleOnClick,a=e.isDisabled;return r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-3 md:px-4 md:py-3 transition duration-300 ease-in-out hover:bg-blue-600 w-full text-xs md:text-base",onClick:n,disabled:a},t)}function kt(e){var t,n=e.currentBettingRound,l=e.game,o=e.handleRaise,i=e.placeBet,s=e.playerId,c=e.showRaiseDrawer,u=e.setShowRaiseDrawer,m=$e(n,s),d=null===(t=l.players.find((function(e){return e.id===s})))||void 0===t?void 0:t.money,p=Object(a.useState)(m),f=Object(g.a)(p,2),b=f[0],v=f[1],h=function(){o(b,i,l,s),u(!1)};return r.a.createElement(Se,{title:"Raise",anchor:"bottom",open:c,onClose:function(){u(!1)},variant:"temporary",className:"drawer"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Raise by how much?"),r.a.createElement("div",{className:"grid grid-cols-2 gap-4"},r.a.createElement("input",{value:b,onChange:function(e){v(Math.round(parseFloat(e.target.value)))},onKeyUp:function(e){13===e.which&&h()},type:"number",pattern:"[0-9]",min:m,max:d,className:"bg-white border border-gray-400 px-4",placeholder:"Amount to raise","aria-label":"Amount to raise","aria-describedby":"basic-addon2",autoFocus:!0}),r.a.createElement("button",{disabled:!!d&&(b<m||b>d),className:"bg-blue-500 mr-auto rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600",onClick:h},"Submit")),r.a.createElement("div",{className:"flex"},d&&r.a.createElement(r.a.Fragment,null,[5,10,20,50].filter((function(e){return e<d})).map((function(e){return r.a.createElement("span",{key:e,style:{cursor:"pointer"},onClick:function(){return v(e)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},e)})),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return v(d)},className:"mt-2 text-white bg-blue-500 mr-2 px-4 rounded-2xl hover:bg-blue-600"},"All in")))))}function Rt(e){var t=e.game,n=e.usedQuestionRound,l=e.currentBettingRound,o=e.playerId,i=e.placeBet,s=e.isAppPlayerTurn,c=Object(a.useState)(!1),u=Object(g.a)(c,2),m=u[0],d=u[1];if(!n||!l)return null;var p=t.players.find((function(e){return e.id===o})),f=$e(l,o);return r.a.createElement("div",{className:"grid md:grid-cols-3 gap-3 md:gap-4"},r.a.createElement(St,{text:f>0?"Call for ".concat(f):"Check",handleOnClick:function(){!function(e,t,n){var a,r,l=Be(t),o=Ue(l);if(l&&(null===o||void 0===o?void 0:o.currentPlayer.id)===n){var i=$e(o,n),s=null!==(a=null===(r=t.players.find((function(e){return e.id===n})))||void 0===r?void 0:r.money)&&void 0!==a?a:0;e({variables:{input:{gameId:t.id,playerId:n,amount:Math.min(i,s)}}})}}(i,t,o)},isDisabled:!s}),r.a.createElement(St,{text:"Raise",handleOnClick:function(){d(!0)},isDisabled:(null===p||void 0===p?void 0:p.money)&&f>=(null===p||void 0===p?void 0:p.money)||!s}),r.a.createElement(St,{text:"Fold",handleOnClick:function(){!function(e,t,n){var a=Be(t),r=Ue(a);a&&(null===r||void 0===r?void 0:r.currentPlayer.id)===n&&e({variables:{input:{gameId:t.id,playerId:n,amount:-1}}})}(i,t,o)},isDisabled:!s}),r.a.createElement(kt,{game:t,placeBet:i,playerId:o,currentBettingRound:l,handleRaise:ze,showRaiseDrawer:m,setShowRaiseDrawer:d}))}var Pt=function(e){var t,n,a,l=e.game,o=e.usedQuestionRound,i=e.player,s=e.placeBet,c=e.hasPlayerPlacedGuessInCurrentQuestionRound,u=e.setShowAnswerDrawer,m=e.currentBettingRound,d=(null===m||void 0===m?void 0:m.currentPlayer.id)===i.id&&He(o,l.players),p=o.guesses.find((function(e){return e.playerId===i.id})),f=null!==(t=null===(n=l.players.find((function(e){return e.id===i.id})))||void 0===n?void 0:n.money)&&void 0!==t?t:0,b=m&&Qe(m,i.id)||0;o.isOver&&i.id&&m&&(f+=b);var g=o.question.type,v=((null===o||void 0===o||null===(a=o.results)||void 0===a?void 0:a.find((function(e){var t=e.playerId;return i.id===t})))||{}).changeInMoney,h=void 0===v?0:v,E=o&&l.players&&He(o,l.players);return r.a.createElement("footer",{className:"fixed shadow-top-md bottom-0 left-0 w-full h-44 bg-gray-200 px-4 flex flex-col items-center justify-end z-1003"},r.a.createElement("div",{className:"w-full flex flex-col items-end md:items-center justify-center max-w-xl my-auto"},r.a.createElement("div",{className:"absolute left-4 md:left-10 top-0 flex flex-col items-center max-w-2xs text-center"},r.a.createElement("span",{className:"absolute shadow-top-md top-0 h-20 w-20 -mt-10 rounded-full flex items-center justify-center text-4xl ".concat(o.isOver&&h>0?"bg-green-500":"bg-gray-400"," ").concat(o.question.type===z.GEO?"left-0":"")},d&&!o.isOver&&r.a.createElement("span",{className:"absolute"},r.a.createElement(Ct.CountdownCircleTimer,{isPlaying:d,size:80,strokeWidth:5,duration:15,colors:[["#004777",.5],["#A30000",1]],trailColor:"#9ca3af"})),r.a.createElement("span",null,r.a.createElement(Fe,{player:i,isQuestionRoundOver:o.isOver,isTurnPlayer:!o.isOver&&i.id===(null===m||void 0===m?void 0:m.currentPlayer.id),hasFolded:!(!o||!_e(o,i.id)),changeInMoney:h,allPlayersPlacedTheirGuess:E,playerHasPlacedTheirGuess:!!p}))),g!==z.GEO&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-xs mt-12"},"Your Answer"),r.a.createElement("span",{className:"text-2xl overflow-hidden max-h-24"},p&&r.a.createElement(ie,{guess:p.guess,questionType:g,alternatives:o.question.alternatives})))),r.a.createElement("div",{className:"flex items-center ".concat(o.isOver?"flex-col":"md:flex-col")},r.a.createElement("div",{className:"flex flex-col items-center mr-3 sm:mr-5 md:mr-0"},r.a.createElement("p",{className:"text-xs"},"Available money"),r.a.createElement("div",{className:"flex items-center mb-6 text-2xl"},r.a.createElement(qe.b,{className:"mx-1"}),r.a.createElement("span",null,f),0!==h&&r.a.createElement("span",{className:"ml-2 ".concat(h>0?"text-green-500":"text-red-500")},"(",h>0?"+":"",h,")"))),!c&&l.questionRounds.length>1&&r.a.createElement("button",{className:"new-question-button bg-blue-500 rounded-lg font-bold text-white text-center px-3 py-2 md:px-4 md:py-3 text-xs md:text-base transition duration-300 ease-in-out hover:bg-blue-600 mx-auto",onClick:function(){u(!0)}},"Answer New Question"),c&&i.id&&r.a.createElement(Rt,{game:l,usedQuestionRound:o,currentBettingRound:m,placeBet:s,playerId:i.id,isAppPlayerTurn:d}))))},qt=n(127),At=n.n(qt);var Tt,Dt=function(e){var t=e.gameId,n=e.playerId,l=e.gameHasStarted,o=e.setPlayerId,i=Object(a.useState)(),s=Object(g.a)(i,2),c=(s[0],s[1]),u=Object(v.b)(Q,{onError:function(e){c((function(){throw e}))},onCompleted:function(){t&&(!function(e){localStorage.removeItem("".concat(be,"_").concat(e))}(t),o(void 0))}}),m=Object(g.a)(u,1)[0];return t&&n?r.a.createElement(Ne,{onConfirm:function(){m({variables:{playerId:n,gameId:t}})},dialogTitle:r.a.createElement(r.a.Fragment,null,"Are you sure?",l&&r.a.createElement("p",null,"If you leave the game, you cannot join again later.")),confirmLabel:"Leave Game",buttonLabel:r.a.createElement(At.a,null),btnClassName:"leave-game btn btn-link btn-lg"}):null},Lt=n(128),Gt=n(129),Mt=n(136),Ft=n(133),Qt=n(131),Bt=function(e){Object(Mt.a)(n,e);var t=Object(Ft.a)(n);function n(){var e;Object(Lt.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1,error:void 0},e}return Object(Gt.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error("Uncaught error:",e,t)}},{key:"render",value:function(){if(this.state.hasError){var e,t=null===(e=this.state.error)||void 0===e?void 0:e.message.replace("GraphQL error: ","");return r.a.createElement("p",{className:"text-lg mt-6 flex items-center font-semibold"},r.a.createElement(Qt.a,{className:"text-4xl text-red-600 mr-3"}),"Game not found"===t?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(r.a.Fragment,null,'A technical error has occurred: "',t,'"',r.a.createElement("br",null)," Try to refresh the page."))}return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(r.a.Component),Ut=n.p+"static/media/turn-notification.e2e956ce.mp3",Ht=n.p+"static/media/turn-alert.11acdad1.wav",$t=(n(196),function(e){window.navigator.vibrate&&window.navigator.vibrate(e)});function _t(){var e=Object(a.useState)(void 0),t=Object(g.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(void 0),i=Object(g.a)(o,2),s=i[0],c=i[1],u=Be(s),m=Ue(u),d=Object(a.useState)(!1),p=Object(g.a)(d,2),f=p[0],h=p[1],E=Object(a.useState)(!1),y=Object(g.a)(E,2),x=y[0],w=y[1],N=Object(b.g)().gameId,O=Object(a.useState)(),I=Object(g.a)(O,2),j=(I[0],I[1]),C=Object(a.useState)(new Audio(Ut)),S=Object(g.a)(C,1)[0],k=Object(a.useState)(new Audio(Ht)),R=Object(g.a)(k,1)[0],P=function(e){j((function(){throw e}))},q=Object(v.a)(T,{fetchPolicy:"cache-and-network",onError:P,onCompleted:function(e){var t=e.game;c(t)}}),A=Object(g.a)(q,2),Q=A[0],B=A[1].loading,U=Object(v.b)(L,{onError:P}),H=Object(g.a)(U,2),$=H[0],_=H[1].data,Y=Object(v.b)(G,{onError:P}),z=Object(g.a)(Y,1)[0],K=Object(v.b)(M,{onError:P}),W=Object(g.a)(K,1)[0],V=Object(v.b)(F,{onError:P}),J=Object(g.a)(V,1)[0],Z=Object(v.c)(D,{variables:{gameId:N,hash:he(N)||ve(N)},onSubscriptionData:function(e){var t,a,r=e.subscriptionData;clearInterval(Tt);var l=null===(t=r.data)||void 0===t?void 0:t.gameUpdated;c(l);var o=Be(l),i=Ue(o),s=null===(a=r.data)||void 0===a?void 0:a.gameUpdated.players,u=o&&s&&He(o,s);u&&w(!1),!(null===l||void 0===l?void 0:l.isOver)&&(null===i||void 0===i?void 0:i.currentPlayer.id)===n&&u&&(S.play(),$t(200),Tt=setInterval((function(){R.play(),$t(200)}),15e3))}}).error;if(Object(a.useEffect)((function(){Z&&P(Z)}),[Z]),Object(a.useEffect)((function(){Q({variables:{gameId:N}})}),[Q,N]),Object(a.useEffect)((function(){if(N){var e,t=function(e){return localStorage.getItem("".concat(be,"_").concat(e))}(N),n=null===_||void 0===_||null===(e=_.addPlayer)||void 0===e?void 0:e.id;t&&l(t),n&&(!function(e,t){localStorage.setItem("".concat(be,"_").concat(e),t)}(N,n),l(n))}}),[N,_]),B)return r.a.createElement("h3",{className:"text-lg mt-6 font-semibold"},"Loading...");if(!s)return r.a.createElement("p",{className:"text-lg mt-6 flex items-center font-semibold"},r.a.createElement(fe.b,{className:"text-4xl mr-2"})," Game not found.");var X=s.players.find((function(e){return e.id===n})),ee=!!(null===u||void 0===u?void 0:u.guesses.find((function(e){return e.playerId===n}))),te=!!s.questionRounds.length,ne=te&&(!X||X.isDead),ae=function(e){var t;return null===e||void 0===e?void 0:e.questionRounds[(null===e||void 0===e||null===(t=e.questionRounds)||void 0===t?void 0:t.length)-(e.isOver?1:2)]}(s),re=!!ae&&(s.isOver||!ee&&!ne||ne&&!!u&&!x&&!He(u,s.players))?ae:u;return r.a.createElement("div",{className:"p-2 flex flex-col md:justify-center ".concat(ne||!te?"min-h-screen":"min-h-screen-minus-52 mb-52")},r.a.createElement("div",{className:"flex flex-col md:my-auto"},!te&&r.a.createElement(Pe,{players:s.players,gameLink:window.location.href,startGame:z,gameId:s.id,createPlayer:$,playerId:n,setNames:s.setNames}),te&&re&&r.a.createElement(ht,{game:s,usedQuestionRound:re,currentBettingRound:m,playerId:n,isSpectator:ne}),ne&&(null===re||void 0===re?void 0:re.isOver)&&!s.isOver&&r.a.createElement("button",{className:"bg-blue-500 rounded-lg font-bold text-white text-center px-4 py-3 transition duration-300 ease-in-out hover:bg-blue-600 mx-auto mt-5",onClick:function(){w(!0)}},"Show Next Question")),u&&n&&r.a.createElement(jt,{game:s,addGuessMutation:J,currentQuestionRound:u,player:X,showAnswerDrawer:f,setShowAnswerDrawer:h,hasPlayerPlacedGuessInCurrentQuestionRound:ee}),!s.isOver&&X&&!ne&&re&&r.a.createElement(Pt,{game:s,usedQuestionRound:re,placeBet:W,player:X,startGame:z,hasPlayerPlacedGuessInCurrentQuestionRound:ee,setShowAnswerDrawer:h,currentBettingRound:m}),r.a.createElement(Dt,{gameId:N,playerId:n,gameHasStarted:te,setPlayerId:l}))}var Yt=function(){return r.a.createElement(Bt,null,r.a.createElement(_t,null))};function zt(){return r.a.createElement("p",null,"Page not found.")}var Kt=function(){return r.a.createElement("div",{className:"mx-auto flex flex-col max-w-full sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl px-3"},r.a.createElement(i.b,{to:"/",className:"mt-4 text-3xl font-bold"},"Certainty Poker"),r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",component:pe,exact:!0}),r.a.createElement(b.a,{path:"/:gameId",component:Yt,exact:!0}),r.a.createElement(b.a,{path:"/questions/:setName",component:pe,exact:!0}),r.a.createElement(b.a,{component:zt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wt="s://certainty-poker.herokuapp.com",Vt=(n(197),new m.a({uri:"http".concat(Wt,"/query")})),Jt=new u.a({uri:"ws".concat(Wt,"/query"),options:{reconnect:!0}}),Zt=Object(d.d)((function(e){var t=e.query,n=Object(p.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r}),Jt,Vt),Xt=new s.c({link:Zt,cache:new f.a});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{client:Xt},r.a.createElement(i.a,null,r.a.createElement(Kt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[206,1,2]]]);
//# sourceMappingURL=main.5c9001d5.chunk.js.map